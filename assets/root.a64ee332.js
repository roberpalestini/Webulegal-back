import{o as l,c as i,a as p,b as e,k as a,u as x,F as h,D as v,H as m,A as u,M as _,l as f,m as y,n as c,p as k}from"./vendor.3ce90362.js";import{_ as g}from"./admin-add.c0a05d7b.js";import{_ as w,a as F}from"./delete.89e1e206.js";import{_ as C}from"./boligrafo.1cbc6d81.js";import{n as S,c as N}from"./navbar.3dc83e26.js";import"./core.77a31e8a.js";import{T as D}from"./vuejs-tree.common.02dd7996.js";import"./Logocompleto.3df4452e.js";const M={class:"container-fluid"},E=e("div",{class:"popnewCategorie"},[c(" Si consideras que es necesario una nueva carpeta dentro de esta seccion, la podes solicitar "),e("a",{href:"#"},"aca"),c(". ")],-1),B={class:"col-md-2",style:{height:"calc(100vh - 70px)",overflow:"hidden","overflow-y":"auto",padding:"0"}},z={class:"col-md-10 text-center",style:{padding:"20px",border:"1px solid #F3F3F3",background:"rgb(255,255,255,0.1)",height:"calc(100vh - 70px)",overflow:"hidden","overflow-y":"auto","padding-top":"60px"}},P={class:"row"},I={class:"col-md-4",style:{height:"calc(100vh - 70px)",overflow:"hidden","overflow-y":"auto"}},O=e("div",{class:"col-md-12"},[e("h4",{style:{"font-weight":"bold","text-align":"left","font-size":"17px"}},"Navegacion")],-1),L={class:"col-12 text-left",style:{"padding-top":"30px","padding-bottom":"30px"}},T=e("img",{src:g,style:{width:"20px"}},null,-1),V=c(" Nueva carpeta raiz"),X=[T,V],Y=e("hr",null,null,-1),j={style:{padding:"0px","list-style":"none",width:"100%",display:"flex","justify-content":"flex-start","align-items":"center","flex-direction":"column","align-content":"flex-start"}},q={style:{width:"100%",display:"flex","justify-content":"flex-start","align-items":"flex-start","flex-direction":"column","align-content":"flex-start","margin-bottom":"5px"}},A={href:"#",style:{"font-size":"12px",padding:"5px",background:"rgb(234, 234, 234)","border-radius":"30px",display:"flex","place-content":"flex-start","align-items":"center","flex-direction":"row","padding-left":"10px","padding-right":"10px"}},H=["onClick"],R=e("i",{class:"fas fa-times"},null,-1),G=[R],U={style:{"text-align":"left"}},J={key:0},K={key:0},Q={key:1},W={class:"row"},Z={class:"col-3",style:{padding:"5px"}},ee={class:"col-12 text-center folder"},te=["onClick"],oe=["onClick"],se=["onClick"],de=e("img",{src:C,style:{width:"15px",height:"15px"}},null,-1),ae=[de],le=["onClick"],ie=e("img",{src:F,style:{width:"15px",height:"15px"}},null,-1),ne=[ie],re={style:{padding:"0",margin:"0","list-style":"none"}},ce=e("a",{href:"#",style:{"font-size":"11px","font-weight":"600",color:"black"}},[e("img",{src:g}),c(" Carpeta nueva")],-1),pe=[ce],he={class:"modal fade",id:"staticBackdrop","data-backdrop":"static","data-keyboard":"true",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},me={class:"modal-dialog modal-dialog-centered modal-sm"},ue=e("div",{class:"modal-header",style:{border:"none"}},[e("h5",{class:"modal-title",id:"staticBackdropLabel",style:{"font-size":"15px"}},"Nueva carpeta"),e("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},[e("span",{"aria-hidden":"true"},"\xD7")])],-1),fe={class:"modal-body"},ye=e("div",{class:"modal-footer",style:{border:"none"}},[e("button",{type:"submit",class:"btn btn-primary",style:{"font-size":"15px"}},"Crear carpeta")],-1),ve={class:"modal fade",id:"staticBackdrop3","data-backdrop":"static","data-keyboard":"true",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},ge={class:"modal-dialog modal-dialog-centered modal-sm"},be=e("div",{class:"modal-header",style:{border:"none"}},[e("h5",{class:"modal-title",id:"staticBackdropLabel",style:{"font-size":"15px"}},"Nueva carpeta"),e("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},[e("span",{"aria-hidden":"true"},"\xD7")])],-1),xe={class:"modal-body"},_e=e("div",{class:"modal-footer",style:{border:"none"}},[e("button",{type:"submit",class:"btn btn-primary",style:{"font-size":"15px"}},"Crear carpeta")],-1),ke={class:"modal fade",id:"staticBackdrop2","data-backdrop":"static","data-keyboard":"true",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},we={class:"modal-dialog modal-dialog-centered modal-sm"},Fe=e("div",{class:"modal-header",style:{border:"none"}},[e("h5",{class:"modal-title",id:"staticBackdropLabel",style:{"font-size":"15px"}},"Editar carpeta"),e("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},[e("span",{"aria-hidden":"true"},"\xD7")])],-1),Ce={class:"modal-body"},Se=e("div",{class:"modal-footer",style:{border:"none"}},[e("button",{type:"submit",class:"btn btn-primary",style:{"font-size":"15px"}},"Guardar")],-1),Ne={class:"modal fade",id:"staticBackdrop4","data-backdrop":"static","data-keyboard":"true",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},De={class:"modal-dialog modal-dialog-centered modal-sm"},$e=k('<div class="modal-header" style="border:none;"><h5 class="modal-title" id="staticBackdropLabel" style="font-size:15px;">Eliminar carpeta</h5><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">\xD7</span></button></div><div class="modal-body text-danger"> Esta accion no se puede deshacer </div><div class="modal-footer" style="border:none;"><button type="submit" class="btn btn-primary" style="font-size:15px;">Eliminar</button></div>',3),Me=[$e],Ee={data(){return{data:{},auth:localStorage.getItem("auth"),endpointGetAll:window.ENDPOINT+"/folders/default/documents",endpointSave:window.ENDPOINT+"/folders/default/documents/edit",leaveFolderItem:!1,targetEditIndex:0,nameEditFolder:{title:null},showContextMenu:!1,selected:{row:{},action:"",clientX:null,clientY:null},showContextMenuFolder:!1,selectedFolder:{row:{},action:"",clientX:null,clientY:null},nameNewFolder:{title:null},modalCreate:!1,inputCreate:null,categories:[],categoriesSelected:[],tags:[],tagSelected:[],title:null,description:null,id_document:this.$route.params.id,nodeSelect:[],pathMoveSelected:[],treeDisplayData:[],temp:{index:null,node:null}}},created(){document.addEventListener("click",()=>{this.showContextMenu=!1,this.selected.row={},this.selected.clientX=null,this.selected.clientY=null})},mounted(){this.getFolderAll()},computed:{myCustomStyles2(){return{tree:{style:{height:"auto",maxHeight:"300px",overflowY:"visible",display:"inline-block",textAlign:"left"}},addNode:{class:"button-add-tree",style:{color:"#EE5F5B"}},editNode:{class:"button-edit-tree",style:{color:"#EE5F5B"}},deleteNode:{class:"button-move-tree",style:{color:"#EE5F5B"}},row:{style:{width:"500px",cursor:"pointer"},child:{class:"",style:{height:"35px"},active:{style:{height:"35px"}}}},rowIndent:{paddingLeft:"20px"},text:{style:{"font-weight":"600","font-size":"12px"},active:{style:{"font-weight":"bold",color:"#1200FF","font-size":"12px"}}}}},myCustomOptions2(){return{treeEvents:{expanded:{state:!0,fn:this.expandTreeFunction},collapsed:{state:!0,fn:this.mySelectedFunction},selected:{state:!1,fn:this.mySelectedFunction},checked:{state:!1,fn:this.myCheckedFunction}},events:{expanded:{state:!0},selected:{state:!0},checked:{state:!0},editableName:{state:!0,calledEvent:"expanded"}},addNode:{state:!0,fn:d=>{this.nodeSelect=d,this.openModalCreateFolder()},appearOnHover:!1},editNode:{state:!0,fn:this.deleteFolder,appearOnHover:!1},deleteNode:{state:!0,fn:this.selectPathMove,appearOnHover:!1},showTags:!0}}},methods:{modalDeleteFolder(){console.log("target delete",this.temp);const t=this.$refs["my-tree"].findNodePath(this.temp.node.id).slice(-2,-1)[0];if(t===void 0){console.log("noCHILD");var s=this.$refs["my-tree"].nodes.findIndex(o=>o.id==this.temp.node.id);this.$refs["my-tree"].nodes.splice(s,1)}else{const o=this.$refs["my-tree"].findNode(t);if(o.nodes===void 0){var s=this.$refs["my-tree"].nodes.findIndex(b=>b.id==this.temp.node.id);this.$refs["my-tree"].nodes.splice(s,1),$("#staticBackdrop4").modal("hide"),this.saveFolders();return}const n=o.nodes.findIndex(r=>r.id==this.temp.node.id);o.nodes.splice(n,1)}$("#staticBackdrop4").modal("hide"),this.saveFolders()},deleteFolder(d,t){console.log("deleteforlder",d,t),this.temp={index:t,node:d},$("#staticBackdrop4").modal("show")},editFolder(){this.nodeSelect.nodes[this.targetEditIndex].text=this.nameEditFolder.title,this.nameEditFolder={title:null},$("#staticBackdrop2").modal("hide"),this.saveFolders()},openModalEdit(d,t){this.targetEditIndex=t,$("#staticBackdrop2").modal("show")},openModalCreateFolder(){$("#staticBackdrop").modal("show")},openCreateFolderRootModal(){$("#staticBackdrop3").modal("show")},expandTreeFunction(d){this.selectPathMove(this.$refs["my-tree"].findNode(d))},openContextmenu(d,t){this.showContextMenu=!0,this.selected.row=t,this.selected.clientX=(d.pageX||d.clientX)+1+"px",this.selected.clientY=(d.pageY||d.clientY)+"px",this.selectedIdDocument=t._id,this.pathMoveSelected=t.data.categories},createFolderRoot(){const d={text:this.nameNewFolder.title,id:Math.floor(Math.random()*100),state:{checked:!1,selected:!1,expanded:!1}};this.treeDisplayData.push(d),$("#staticBackdrop3").modal("hide"),this.nameNewFolder={title:null},this.$Progress.finish(),this.saveFolders()},createFolder(d=null){this.$Progress.start();const t={text:this.nameNewFolder.title,id:Math.floor(Math.random()*100),state:{checked:!1,selected:!1,expanded:!1}};this.nodeSelect.nodes===void 0?(this.nodeSelect.nodes=[],this.nodeSelect.nodes.push(t)):this.nodeSelect.nodes.push(t),$("#staticBackdrop").modal("hide"),this.nameNewFolder={title:null},this.$Progress.finish(),this.saveFolders()},pathMoveSelectedRemove(d,t){delete this.pathMoveSelected[d],this.pathMoveSelected=this.pathMoveSelected.filter(function(s){return typeof s!="undefined"})},selectPathMove(d){this.nodeSelect=d},selectPathMoveChild(d){this.nodeSelect=d,this.nodeSelect.state={checked:!0,selected:!0,expanded:!0}},mySelectedFunction:function(d,t){},getFolderAll(){const d={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({auth:this.auth})};fetch(this.endpointGetAll,d).then(t=>t.json()).then(t=>{this.treeDisplayData=t})},saveFolders(){this.$Progress.start();const d={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({auth:this.auth,data:this.treeDisplayData})};fetch(this.endpointSave,d).then(t=>t.json()).then(t=>{this.$Progress.finish()})}}},Xe=Object.assign(Ee,{setup(d){return(t,s)=>(l(),i(h,null,[p(S),e("main",null,[e("div",M,[E,e("form",{class:"row",onSubmit:s[2]||(s[2]=a(o=>t.save(),["prevent"]))},[e("div",B,[p(N)]),e("div",z,[e("div",P,[e("div",I,[O,e("div",L,[e("a",{href:"#",style:{"font-size":"13pX","font-weight":"600"},onClick:s[0]||(s[0]=a(o=>t.openCreateFolderRootModal(),["prevent"]))},X),Y,p(x(D),{id:"my-tree-id",ref:"my-tree","custom-options":t.myCustomOptions2,"custom-styles":t.myCustomStyles2,nodes:t.treeDisplayData},null,8,["custom-options","custom-styles","nodes"]),e("ul",j,[(l(!0),i(h,null,v(t.pathMoveSelected,(o,n)=>(l(),i("li",q,[e("a",A,[c(m(o.text)+" ",1),e("a",{href:"#",style:{"margin-left":"10px"},onClick:r=>t.pathMoveSelectedRemove(n,o.id)},G,8,H)])]))),256))])])]),e("div",{class:"col-md-8 text-left",style:{height:"calc(100vh - 70px)","border-left":"1px solid #e0e0e0","border-top":"1px solid #e0e0e0",padding:"20px",overflow:"hidden","overflow-y":"auto"},onContextmenu:s[1]||(s[1]=a(o=>t.openContextmenu(o,t.document),["prevent"]))},[e("h4",U,m(t.nodeSelect.text),1),t.nodeSelect.nodes?(l(),i("span",J,[t.nodeSelect.nodes.length===0?(l(),i("span",K," No se encontraron carpetas..")):u("",!0)])):u("",!0),t.nodeSelect.nodes?u("",!0):(l(),i("span",Q," No se encontraron carpetas.. ")),e("div",W,[(l(!0),i(h,null,v(t.nodeSelect.nodes,(o,n)=>(l(),i("div",Z,[e("div",ee,[e("img",{src:w,style:{cursor:"pointer"},onClick:a(r=>t.selectPathMoveChild(o),["prevent"])},null,8,te),e("p",{class:"text-center",style:{"font-size":"13px","font-weight":"500",cursor:"pointer"},onClick:a(r=>t.selectPathMoveChild(o),["prevent"])},m(o.text),9,oe),e("a",{style:{position:"absolute",top:"0",right:"0",margin:"5px"},href:"#",onClick:a(r=>t.openModalEdit(o,n),["prevent"])},ae,8,se),e("a",{style:{position:"absolute",top:"30",right:"0",margin:"5px"},href:"#",onClick:a(r=>t.deleteFolder(o,n),["prevent"])},ne,8,le)])]))),256))])],32)])])],32)])]),e("div",{class:"box",onContextmenu:s[4]||(s[4]=o=>t.onContextMenu(o)),style:_([{position:"fixed","z-index":"1000",background:"#f3f1f1",width:"auto",height:"auto",padding:"0",border:"1px solid #E2E2E2 !important",transition:"all .2s ease"},{top:t.selected.clientY,left:t.selected.clientX}])},[e("ul",re,[e("li",{style:{padding:"10px",margin:"0","list-style":"none","padding-top":"6px","padding-bottom":"6px"},onClick:s[3]||(s[3]=o=>t.openModalCreateFolder())},pe)])],36),e("div",he,[e("div",me,[e("form",{class:"modal-content",onSubmit:s[6]||(s[6]=a(o=>t.createFolder(),["prevent"]))},[ue,e("div",fe,[f(e("input",{type:"text",class:"form-control",style:{border:"1px solid #DDDDDD","border-radius":"5px",height:"30px",padding:"5px","max-height":"30px","min-height":"36px",background:"transparent"},"onUpdate:modelValue":s[5]||(s[5]=o=>t.nameNewFolder.title=o),required:"true"},null,512),[[y,t.nameNewFolder.title]])]),ye],32)])]),e("div",ve,[e("div",ge,[e("form",{class:"modal-content",onSubmit:s[8]||(s[8]=a(o=>t.createFolderRoot(),["prevent"]))},[be,e("div",xe,[f(e("input",{type:"text",class:"form-control",style:{border:"1px solid #DDDDDD","border-radius":"5px",height:"30px",padding:"5px","max-height":"30px","min-height":"36px",background:"transparent"},"onUpdate:modelValue":s[7]||(s[7]=o=>t.nameNewFolder.title=o),required:"true"},null,512),[[y,t.nameNewFolder.title]])]),_e],32)])]),e("div",ke,[e("div",we,[e("form",{class:"modal-content",onSubmit:s[10]||(s[10]=a(o=>t.editFolder(),["prevent"]))},[Fe,e("div",Ce,[f(e("input",{type:"text",class:"form-control",style:{border:"1px solid #DDDDDD","border-radius":"5px",height:"30px",padding:"5px","max-height":"30px","min-height":"36px",background:"transparent"},"onUpdate:modelValue":s[9]||(s[9]=o=>t.nameEditFolder.title=o),required:"true"},null,512),[[y,t.nameEditFolder.title]])]),Se],32)])]),e("div",Ne,[e("div",De,[e("form",{class:"modal-content",onSubmit:s[11]||(s[11]=a(o=>t.modalDeleteFolder(),["prevent"]))},Me,32)])])],64))}});export{Xe as default};
