import{j as u,o as a,c as n,a as p,b as o,k as m,l as r,a1 as f,A as d,F as g,p as c,n as h}from"./vendor.3ce90362.js";import{_}from"./flecha-izquierda.f982a190.js";import{s as b}from"./striptags.65da94af.js";import{n as v,c as y}from"./navbar.3dc83e26.js";import"./core.77a31e8a.js";import"./Logocompleto.3df4452e.js";const x={class:"container-fluid"},k={class:"row"},w={class:"col-md-2",style:{height:"calc(100vh - 70px)",overflow:"hidden","overflow-y":"auto",padding:"0"}},S={class:"col-md-10 text-center create-doc-normal"},T={key:0,class:"row"},C={class:"col-12 text-left",style:{"padding-top":"20px","padding-bottom":"20px"}},L=o("img",{src:_,style:{height:"20px",width:"20px"}},null,-1),D=[L],N={id:"editparent",class:"col-12",style:{"text-align":"left",padding:"5px",position:"sticky",background:"#fbfbfb",top:"0"}},j={id:"editControls",style:{"text-align":"center",padding:"5px"}},P={class:"btn-group"},E=c('<option value="1">8px</option><option value="2">10px</option><option value="3">12px</option><option value="4">14px</option><option value="5">16px</option><option value="6">18px</option><option value="7">20px</option>',7),O=[E],I={class:"btn-group"},z=o("span",{class:"material-icons"},"undo",-1),A=[z],F=o("span",{class:"material-icons"},"redo",-1),q=[F],B={class:"btn-group"},M=o("span",{class:"material-icons"},"format_bold",-1),U=[M],V=o("span",{class:"material-icons"},"format_italic",-1),H=[V],J=o("span",{class:"material-icons"},"format_underline",-1),R=[J],W=o("span",{class:"material-icons"},"strikethrough_s",-1),Q=[W],G={class:"btn-group"},K=o("span",{class:"material-icons"},"format_align_left",-1),X=[K],Y=o("span",{class:"material-icons"},"format_align_center",-1),Z=[Y],tt=o("span",{class:"material-icons"},"format_align_right",-1),et=[tt],st=o("span",{class:"material-icons"},"format_align_justify",-1),ot=[st],it={class:"btn-group"},at=o("span",{class:"material-icons"},"format_indent_increase",-1),nt=[at],rt=o("span",{class:"material-icons"},"format_indent_decrease",-1),lt=[rt],dt={class:"btn-group"},pt=o("span",{class:"material-icons"},"format_list_bulleted",-1),ct=[pt],ht=o("span",{class:"material-icons"},"format_list_numbered",-1),ut=[ht],mt=c('<div class="btn-group"><a class="btn" data-role="subscript" href="#"><i class="icon-subscript"></i></a><a class="btn" data-role="superscript" href="#"><i class="icon-superscript"></i></a></div>',1),ft={class:"btn-group"},gt=o("label",{for:"actual-btn",class:"btn btn-attach"},[o("span",{class:"material-icons"},"attach_file "),h(" Adjuntar archivo")],-1),_t=["innerHTML"],bt={key:0,class:"col-12",style:{position:"relative"}},vt={key:1,type:"submit",class:"btn btn-primary",style:{width:"120px",position:"relative"},disabled:"true"},yt=o("div",{class:"spinner-border text-light spinner-border-sm",role:"status",style:{width:"15px",height:"15px","border-width":"1px",margin:"0"}},[o("span",{class:"sr-only"},"Loading...")],-1),xt=[yt],kt={key:2,style:{display:"flex",top:"0px",left:"0px",right:"0px",position:"fixed",bottom:"0","align-content":"center","justify-content":"center","align-items":"center"}},wt={style:{color:"rgb(52, 52, 52)",width:"355px",right:"180px","font-size":"14px","border-radius":"8px","font-weight":"600",background:"#e7e7e7",padding:"10px"}},St=o("span",{"aria-hidden":"true"},"\xD7",-1),Tt=[St],Ct=h(" El archivo de biblioteca se guardar\xE1 en tu carpeta privada \u201CMi biblioteca\u201D. \xBFQuer\xE9s compartirlo con la comunidad legal? "),Lt={class:"col-12 text-right",style:{display:"flex"}},Dt=["disabled"],Nt={key:0},$t={key:1,class:"spinner-border spinner-border-sm",role:"status",style:{height:"10px",margin:"0px",padding:"0px",width:"10px !important",color:"white","margin-top":"-10px !important"}},jt=o("span",{class:"sr-only"},"Loading...",-1),Pt=[jt],Et=["disabled"],Ot={key:0},It={key:1,class:"spinner-border spinner-border-sm",role:"status",style:{height:"10px",margin:"0px",padding:"0px",width:"10px !important",color:"white","margin-top":"-10px !important"}},zt=o("span",{class:"sr-only"},"Loading...",-1),At=[zt],Ft={components:{},data(){return{editor:null,data:{},auth:localStorage.getItem("auth"),endpointUpload:window.ENDPOINT+"/upload",endpoint:window.ENDPOINT+"/documents/save",endpointShare:window.ENDPOINT+"/documents/save",popshared:!1,editor_view:!0,categories_view:!1,searchInputTags:null,showEditorLoading:!1,showPopSelected:!1,getSelection:null,replace_text:null,temp_content:null,fields:[],replaceforExistent:!1,replaceforExistentIndex:0,shopsavepop:!1,titleDocument:null,descriptionDocument:null,saveLoadingShare:!1,saveLoadingShareDisabled:!1,saveLoadingNtShare:!1,saveLoadingNtShareDisabled:!1,attachFiles:[]}},created(){this.contentText=""},mounted(){document.querySelector("#editor3").addEventListener("paste",l=>{l.preventDefault();var e=(l.originalEvent||l).clipboardData.getData("text/html")||prompt("Paste something..");e=b(e,["span","table","tbody","tr","td","h1","h2","h3","h4","h5","b","em","strong","br","u","strike","p"]),document.execCommand("insertHtml",!1,e.replace(/[\s;]background-color:[^;]+(?=;)|^background-color:[^;]+;/g,"").replace(/[\s;]color:[^;]+(?=;)|^color:[^;]+;/g,""))})},methods:{attachFile(l){this.$Progress.start(),console.log(l);const e=l.target.files[0],t=new FormData;t.append("file",e),fetch(this.endpointUpload,{method:"POST",body:t}).then(i=>i.json()).then(i=>{if(i.status){const s=window.PATHUPLOAD+i.data.name;i.data.ext.startsWith(".doc")&&$("#editor3").append(' <iframe src="https://view.officeapps.live.com/op/embed.aspx?src='+s+'" width="100%" height="500px"></iframe><br/><p></p>'),i.data.ext===".pdf"&&$("#editor3").append(' <iframe src="'+s+'" width="100%" height="500px"></iframe><br/><p></p>'),i.data.ext.startsWith(".xl")&&$("#editor3").append(' <iframe src="https://view.officeapps.live.com/op/embed.aspx?src='+s+'" width="100%" height="500px"></iframe><br/><p></p>'),this.attachFiles.push(i.data),this.$Progress.finish()}console.log(i)}).catch(i=>{console.error(i)})},actionTeste(l,e){switch(e=="size"&&document.execCommand("fontSize",!1,this.temp.editSize),e){case"h1":case"h2":case"p":document.execCommand("formatBlock",!1,e);break;default:document.execCommand(e,!1,null);break}},saveShare(l){console.log(this.data),l==1?(this.saveLoadingShare=!0,this.saveLoadingNtShareDisabled=!0,this.saveLoadingShareDisabled=!0,this.$router.push({name:"document-organize",params:{id:this.data.insertedId}})):(this.saveLoadingNtShare=!0,this.saveLoadingShareDisabled=!0,this.saveLoadingNtShareDisabled=!0,this.popshared=!1,this.$router.push({name:"librarie-folders",query:{id:this.data.insertedId}}),this.$toast.success("Archivo creado",{position:"bottom-right"}))},save(){this.shopsavepop=!0;for(var l=[],e=this.fields,t=e.length-1;t>=0;t--)e[t].element=null,l.push(e[t]);const i={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({auth:this.auth,data:{type:"document",content:document.querySelector("#editor3").innerHTML,fields:l,title:"Documento sin titulo",description:"Documento sin descripcion",categories:[],tags:[],attachment:this.attachFiles}})};fetch(this.endpoint,i).then(s=>s.json()).then(s=>{console.log(s),setTimeout(()=>{this.shopsavepop=!1,this.popshared=!0},1500),this.data=s})},next(){this.text_view=!0,this.help_view=!1,this.categories_view=!1}}},Jt=Object.assign(Ft,{setup(l){return(e,t)=>{const i=u("tooltip");return a(),n(g,null,[p(v),o("main",null,[o("div",x,[o("div",k,[o("div",w,[p(y)]),o("div",S,[e.editor_view?(a(),n("div",T,[o("div",C,[o("a",{href:"@",onClick:t[0]||(t[0]=m(s=>e.$router.go(-1),["prevent"]))},D)]),o("div",N,[o("div",j,[o("div",P,[r(o("select",{class:"btn","onUpdate:modelValue":t[1]||(t[1]=s=>e.temp.editSize=s),onChange:t[2]||(t[2]=s=>e.actionTeste(s,"size"))},O,544),[[f,e.temp.editSize]])]),o("div",I,[r((a(),n("a",{class:"btn",onClick:t[3]||(t[3]=s=>e.actionTeste(s,"undo")),href:"#"},A)),[[i,"Deshacer"]]),r((a(),n("a",{class:"btn",onClick:t[4]||(t[4]=s=>e.actionTeste(s,"redo")),href:"#"},q)),[[i,"Rehacer"]])]),o("div",B,[r((a(),n("a",{class:"btn",onClick:t[5]||(t[5]=s=>e.actionTeste(s,"bold")),href:"#"},U)),[[i,"Bold"]]),r((a(),n("a",{class:"btn",onClick:t[6]||(t[6]=s=>e.actionTeste(s,"italic")),href:"#"},H)),[[i,"Italic"]]),r((a(),n("a",{class:"btn",onClick:t[7]||(t[7]=s=>e.actionTeste(s,"underline")),href:"#"},R)),[[i,"Underline"]]),r((a(),n("a",{class:"btn",onClick:t[8]||(t[8]=s=>e.actionTeste(s,"strikeThrough")),href:"#"},Q)),[[i,"Tachar"]])]),o("div",G,[r((a(),n("a",{class:"btn",onClick:t[9]||(t[9]=s=>e.actionTeste(s,"justifyLeft")),href:"#"},X)),[[i,"Alinear Izquierda"]]),r((a(),n("a",{class:"btn",onClick:t[10]||(t[10]=s=>e.actionTeste(s,"justifyCenter")),href:"#"},Z)),[[i,"Alinear Centro"]]),r((a(),n("a",{class:"btn",onClick:t[11]||(t[11]=s=>e.actionTeste(s,"justifyRight")),href:"#"},et)),[[i,"Alinear Derecha"]]),r((a(),n("a",{class:"btn",onClick:t[12]||(t[12]=s=>e.actionTeste(s,"justifyFull")),href:"#"},ot)),[[i,"Justificar"]])]),o("div",it,[r((a(),n("a",{class:"btn",onClick:t[13]||(t[13]=s=>e.actionTeste(s,"indent")),href:"#"},nt)),[[i,"Agregar Sangria"]]),r((a(),n("a",{class:"btn",onClick:t[14]||(t[14]=s=>e.actionTeste(s,"outdent")),href:"#"},lt)),[[i,"Eliminar Sangria"]])]),o("div",dt,[r((a(),n("a",{class:"btn",onClick:t[15]||(t[15]=s=>e.actionTeste(s,"insertUnorderedList")),href:"#"},ct)),[[i,"Lista"]]),r((a(),n("a",{class:"btn",onClick:t[16]||(t[16]=s=>e.actionTeste(s,"insertOrderedList")),href:"#"},ut)),[[i,"Lista Numerada"]])]),mt,o("div",ft,[o("form",null,[o("input",{type:"file",id:"actual-btn",hidden:"",onChange:t[17]||(t[17]=s=>e.attachFile(s))},null,32),gt])])])]),o("div",{id:"editor3",style:{width:"100%",padding:"20px",outline:"none !important",border:"1px solid dashed #D9D9D9 !important","min-height":"350px",color:"black"},contenteditable:"true",class:"text-left",innerHTML:e.contentText,"data-text":"Pega o escribi aca el contenido legal que quieras agregar."},null,8,_t),e.editor_view?(a(),n("div",bt,[e.shopsavepop?d("",!0):(a(),n("button",{key:0,type:"submit",class:"btn btn-primary",style:{width:"120px",position:"relative"},onClick:t[18]||(t[18]=s=>e.save())},"Crear")),e.shopsavepop?(a(),n("button",vt,xt)):d("",!0),e.popshared?(a(),n("div",kt,[o("div",wt,[o("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close",onClick:t[19]||(t[19]=s=>e.popshared=!1)},Tt),Ct,o("div",Lt,[o("button",{class:"btn btn-primary",style:{margin:"5px"},onClick:t[20]||(t[20]=s=>e.saveShare(1)),disabled:e.saveLoadingShareDisabled},[e.saveLoadingShare?d("",!0):(a(),n("span",Nt,"Si")),e.saveLoadingShare?(a(),n("div",$t,Pt)):d("",!0)],8,Dt),o("button",{href:"#",class:"btn btn-primary",style:{margin:"5px"},onClick:t[21]||(t[21]=s=>e.saveShare(0)),disabled:e.saveLoadingNtShareDisabled},[e.saveLoadingNtShare?d("",!0):(a(),n("span",Ot,"No")),e.saveLoadingNtShare?(a(),n("div",It,At)):d("",!0)],8,Et)])])])):d("",!0)])):d("",!0)])):d("",!0)])])])])],64)}}});export{Jt as default};
