import{j as y,o as d,c as r,a as h,b as t,l,k as p,H as n,x as f,A as b,F as u,D as v,m,n as c}from"./vendor.3ce90362.js";import{_}from"./flecha-izquierda.f982a190.js";import{_ as x}from"./etiqueta.f26d8a8f.js";import{n as w,c as T}from"./navbar.3dc83e26.js";import{T as g}from"./toolbar-document-comunity.d85733d3.js";import"./Logocompleto.3df4452e.js";import"./cuota.edac84f3.js";const D={class:"container-fluid"},N={class:"row"},O={class:"col-md-2",style:{height:"calc(100vh - 70px)",overflow:"hidden","overflow-y":"auto",padding:"0"}},C={class:"col-md-10 text-center",style:{padding:"20px",border:"1px solid #E2E2E2",background:"rgb(255,255,255,0.1)",height:"calc(100vh - 70px)",overflow:"hidden","overflow-y":"auto"}},S={class:"row justify-content-center"},P={class:"col-12 text-left",style:{"padding-top":"0","padding-bottom":"20px"}},k=t("img",{src:_,style:{height:"20px",width:"20px"}},null,-1),E=[k],j={class:"col-12"},M={class:"row"},L={class:"col-6 text-left"},I={style:{padding:"0",margin:"0","margin-top":"8px","font-size":"14px"}},q=c("Compartido por: "),z={style:{padding:"0",margin:"0","margin-top":"8px","font-size":"14px"}},V=c("Puntuacion: "),B=["innerHTML"],H={class:"col-12",style:{"border-radius":"8px",padding:"0",border:"1px solid #E2E2E2"}},J=["innerHTML"],R={class:"col-12",style:{"margin-top":"100px"}},A=t("div",{class:"col-12 text-left"},[t("b",null,"Comentarios")],-1),U={class:"col-12",style:{"margin-top":"20px",display:"flex","margin-bottom":"50px"}},F={class:"",style:{display:"flex",width:"auto","text-align":"left","flex-direction":"column"}},G={style:{"font-size":"13px"}},K={class:"",style:{display:"flex",width:"auto",background:"rgb(246 246 246 / 39%)","align-items":"center",padding:"15px","border-radius":"14px","text-align":"left","margin-top":"10px",border:"1px solid #d6d6d6","padding-left":"20px"}},Q={style:{"font-size":"11px",opacity:"0.8","margin-left":"20px"}},W={style:{display:"flex","align-items":"center","justify-content":"center","align-content":"center",width:"50px","padding-left":"20px","padding-top":"20px"}},X=["onClick"],Y=t("img",{src:x},null,-1),Z=[Y],tt={style:{display:"flex",width:"100%"}},et=t("div",{style:{display:"flex",width:"250px"}},[t("button",{type:"submit",class:"btn btn-primary",style:{width:"auto",position:"relative"}},"Enviar comentario")],-1),ot={class:"modal fade commentModal",id:"report-content",tabindex:"-1",role:"dialog","aria-labelledby":"report-contentTitle","aria-hidden":"true"},st={class:"modal-dialog modal-dialog-centered modal-sm",role:"document"},it={class:"modal-content",style:{"border-radius":"10px",border:"none"}},nt=t("div",{class:"modal-header text-center",style:{background:"#dedcdc",color:"#454545","border-top-left-radius":"10px","border-top-right-radius":"10px"}},[t("h5",{class:"modal-title",style:{"font-size":"15px","font-weight":"600","text-align":"center !important",display:"block !important",width:"100%"}},"A\xF1adir nuevo comentario"),t("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},[t("span",{"aria-hidden":"true"},"\xD7")])],-1),at={class:"col-md-12",style:{"margin-top":"20px"}},dt=t("div",{class:"col-md-12 text-center",style:{"margin-top":"20px"}},[t("button",{type:"submit",class:"btn btn-primary",style:{width:"auto",position:"relative"}},"Enviar comentario")],-1),rt={class:"modal fade",id:"report-content-message",tabindex:"-1",role:"dialog","aria-labelledby":"report-contentTitle","aria-hidden":"true"},lt={class:"modal-dialog modal-dialog-centered modal-sm",role:"document"},pt={class:"modal-content",style:{"border-radius":"10px",border:"none"}},ct=t("div",{class:"modal-header text-center",style:{background:"#dedcdc",color:"#454545","border-top-left-radius":"10px","border-top-right-radius":"10px"}},[t("h5",{class:"modal-title",style:{"font-size":"15px","font-weight":"600","text-align":"center !important",display:"block !important",width:"100%"}},"Denunciar comentario"),t("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},[t("span",{"aria-hidden":"true"},"\xD7")])],-1),mt=c(" \xBFPor qu\xE9 quer\xE9s denunciar este comentario ? "),ht={class:"col-md-12",style:{"margin-top":"20px"}},ut=t("div",{class:"col-md-12 text-center",style:{"margin-top":"20px"}},[t("button",{type:"submit",class:"btn btn-primary",style:{width:"120px",position:"relative"}},"Denunciar")],-1),gt={components:{ToolBarDocument:g},data(){return{comments:[],temp:{comment:null,report:null,id:null},auth:localStorage.getItem("auth"),endpoint:window.ENDPOINT+"/comunity/documents/get",endpointTextPreview:window.ENDPOINT+"/comunity/fields/preview",endpointSaveDocument:window.ENDPOINT+"/comunity/document/copy/library",endpointDetails:window.ENDPOINT+"/comunity/documents/check/details",documentCopy:!1,getDetails:!1,user:{},fields:[],content:null,details:{copy:!1,validate:!1},document:{data:{title:"",description:"",content:"",validate:!1,user:{data:{profile:{lastname:null,firstname:null}}}}}}},created(){this.getDocument(this.$route.params.id),this.getAllComments(this.$route.params.id),this.getUserData()},mounted(){},computed:{},methods:{sendReport(){const s={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"comment",message:this.temp.report,id:this.temp.id,auth:localStorage.getItem("auth")})};fetch(window.ENDPOINT+"/requests/new/report/comments",s).then(e=>e.json()).then(e=>{this.$toast.success("Tu solicitud ha sido procesada. Muchas gracias por ayudarnos a mejorar",{position:"bottom-right"}),$("#report-content-message").modal("hide"),this.temp.report=null})},openReportModal(s){$("#report-content-message").modal("show"),this.temp.id=s},getUserData(){const s={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({auth:localStorage.getItem("auth")})};fetch(window.ENDPOINT+"/users/auth",s).then(e=>e.json()).then(e=>{this.user=e.data})},getAllComments(s){const e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({auth:this.auth,id:s})};fetch(window.ENDPOINT+"/comunity/comments/document",e).then(o=>o.json()).then(o=>{this.comments=o})},saveComment(){this.$Progress.start();const s={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({auth:this.auth,id:this.document._id,comment:this.temp.comment})};fetch(window.ENDPOINT+"/comunity/comments/create",s).then(e=>e.json()).then(e=>{this.$Progress.finish(),this.$toast.success("Comentario publicado",{position:"bottom-right"}),this.temp.comment=null,$(".commentModal").modal("hide"),this.getAllComments(this.$route.params.id)})},openNewComment(){$(".commentModal").modal("show")},getStars(s){if(s<=10)return 1;if(s<=20)return 2;if(s<=30)return 3;if(s<=40)return 4;if(s<=50||s>=50)return 5},displayStars(s){for(var e='<svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="24px" viewBox="0 0 24 24" width="24px" fill="#000000" style="fill: #ead723"><g><path d="M0,0h24v24H0V0z" fill="none"/><path d="M0,0h24v24H0V0z" fill="none"/></g><g><path d="M12,17.27L18.18,21l-1.64-7.03L22,9.24l-7.19-0.61L12,2L9.19,8.63L2,9.24l5.46,4.73L5.82,21L12,17.27z"/></g></svg>',o=this.getStars(s),a=1,i="";a<=o;)i=i+e,a++;return console.log(o,a,i),i},getDocument(s){this.$Progress.start();const e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({auth:this.auth,id:s})};fetch(this.endpoint,e).then(o=>o.json()).then(o=>{this.getDetails=!0,this.document=o,this.content=o.data.content,this.content=o.data.content.replace("http://","https://"),this.$Progress.finish()})},getDetails(){this.$Progress.start();const s={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({auth:this.auth,id:this.$route.params.id})};fetch(this.endpointDetails,s).then(e=>e.json()).then(e=>{this.details=e,this.$Progress.finish()})},fieldsDisplay(s){this.fields=s},changeMode(s){},search(){},pause(){},hover(){}}},Dt=Object.assign(gt,{setup(s){return(e,o)=>{const a=y("tooltip");return d(),r(u,null,[h(w),t("main",null,[t("div",D,[t("div",N,[t("div",O,[h(T)]),t("div",C,[t("div",S,[t("div",P,[l((d(),r("a",{href:"@",onClick:o[0]||(o[0]=p(i=>e.$router.go(-1),["prevent"]))},E)),[[a,"Regresar"]])]),t("div",j,[t("div",M,[t("div",L,[t("b",null,n(e.document.data.title),1),t("p",null,n(e.document.data.description),1),t("p",I,[q,t("b",null,n(e.document.data.user.data.profile.firstname)+" "+n(e.document.data.user.data.profile.lastname),1)]),t("p",z,[V,t("div",{innerHTML:e.displayStars(e.document.data.cout_validate),style:{display:"inline-block"}},null,8,B)])])])]),e.getDetails?(d(),f(g,{key:0,id:e.document._id},null,8,["id"])):b("",!0),t("div",H,[t("div",{class:"col-12",style:{height:"auto",padding:"20px",overflow:"hidden","overflow-y":"auto",color:"black"},innerHTML:e.content},null,8,J)]),t("div",R,[A,(d(!0),r(u,null,v(e.comments,i=>(d(),r("div",U,[t("div",F,[t("b",G,n(i.user.firstname)+" "+n(i.user.lastname),1),t("div",K,[c(n(i.comment)+" ",1),t("small",Q,n(i.date),1)])]),t("div",W,[l((d(),r("a",{href:"#",class:"icons-link",onClick:p(yt=>e.openReportModal(i._id),["prevent"])},Z,8,X)),[[a,"Reportar Comentario"]])])]))),256)),t("form",{onSubmit:o[2]||(o[2]=p(i=>e.saveComment(),["prevent"])),class:"col-12",style:{"margin-top":"20px",display:"flex"}},[t("div",tt,[l(t("input",{type:"text",class:"form-control","onUpdate:modelValue":o[1]||(o[1]=i=>e.temp.comment=i),placeholder:"Escribe un comentario..",style:{"border-radius":"30px",border:"1px solid rgb(199, 199, 199) !important",background:"rgb(251 251 251) !important"}},null,512),[[m,e.temp.comment]])]),et],32)])])])])])]),t("div",ot,[t("div",st,[t("div",it,[nt,t("form",{onSubmit:o[4]||(o[4]=p(i=>e.saveComment(),["prevent"])),class:"modal-body"},[t("div",at,[l(t("textarea",{class:"form-control","onUpdate:modelValue":o[3]||(o[3]=i=>e.temp.comment=i),placeholder:"Escribe un comentario..",style:{"min-height":"100px","border-radius":"30px",border:"1px solid rgb(199, 199, 199)",background:"rgb(231, 231, 231)"}},null,512),[[m,e.temp.comment]])]),dt],32)])])]),t("div",rt,[t("div",lt,[t("div",pt,[ct,t("form",{onSubmit:o[6]||(o[6]=p(i=>e.sendReport(),["prevent"])),class:"modal-body"},[mt,t("div",ht,[l(t("input",{type:"text",class:"form-control","onUpdate:modelValue":o[5]||(o[5]=i=>e.temp.report=i),style:{height:"30px","min-height":"33px","border-radius":"30px",border:"1px solid rgb(199, 199, 199)",background:"rgb(231, 231, 231)"}},null,512),[[m,e.temp.report]])]),ut],32)])])])],64)}}});export{Dt as default};
