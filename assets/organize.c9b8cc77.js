import{_,o as a,c as n,b as t,k as h,l as u,m as g,F as p,n as d,q as b,s as w,a as c,u as S,D as f,A as y,H as x}from"./vendor.3ce90362.js";import{_ as T}from"./flecha-izquierda.f982a190.js";import{_ as N}from"./cerrar-simbolo-de-boton-circular.c7ee96d7.js";import{_ as C}from"./boton-agregar.c9c97214.js";import{N as O}from"./new-tags-suggest.36b6f8fc.js";import{n as k,c as F}from"./navbar.3dc83e26.js";import"./core.77a31e8a.js";import{T as E}from"./vuejs-tree.common.02dd7996.js";/* empty css                                                                     */import"./Logocompleto.3df4452e.js";const D={data(){return{temp:{input:null},endpoint:window.ENDPOINT+"/requests/new/folder"}},created(){},mounted(){},computed:{},methods:{open(){$("#exampleModalLong").modal("show")},save(){const s={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({rol:"documents",message:this.temp.input,auth:localStorage.getItem("auth")})};fetch(this.endpoint,s).then(e=>e.json()).then(e=>{this.$toast.success("Tu solicitud ha sido procesada. Muchas gracias por ayudarnos a mejorar.",{position:"bottom-right"}),$("#exampleModalLong").modal("hide"),this.temp.input=null})}}},v=s=>(b("data-v-72cf6b84"),s=s(),w(),s),M={class:"popnewCategorie"},I=d(" Si consideras que es necesario una nueva carpeta dentro de esta seccion, la podes solicitar "),P=d(". "),q={class:"modal fade",id:"exampleModalLong",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLongTitle","aria-hidden":"true"},j={class:"modal-dialog modal-dialog-centered modal-sm",role:"document"},z={class:"modal-content",style:{"border-radius":"10px",border:"none"}},A=v(()=>t("div",{class:"modal-header text-center",style:{background:"#dedcdc",color:"#454545","border-top-left-radius":"10px","border-top-right-radius":"10px"}},[t("h5",{class:"modal-title",style:{"font-size":"15px","font-weight":"600","text-align":"center !important",display:"block !important",width:"100%"}}," Agregar carpeta "),t("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},[t("span",{"aria-hidden":"true"},"\xD7")])],-1)),L=d(" Escrib\xED el nombre de la nueva carpeta y especific\xE1 dentro de qu\xE9 carpeta deberia estar. "),H={class:"col-md-12",style:{"margin-top":"20px"}},V=v(()=>t("div",{class:"col-md-12 text-center",style:{"margin-top":"20px"}},[t("button",{type:"submit",class:"btn btn-primary",style:{width:"120px",position:"relative"}}," Solicitar ")],-1));function J(s,e,o,i,r,l){return a(),n(p,null,[t("div",M,[I,t("a",{href:"#",onClick:e[0]||(e[0]=h(m=>l.open(),["prevent"]))},"ac\xE1"),P]),t("div",q,[t("div",j,[t("div",z,[A,t("form",{onSubmit:e[2]||(e[2]=h(m=>l.save(),["prevent"])),class:"modal-body"},[L,t("div",H,[u(t("input",{type:"text",class:"form-control","onUpdate:modelValue":e[1]||(e[1]=m=>r.temp.input=m),style:{height:"30px","min-height":"33px","border-radius":"30px",border:"1px solid rgb(199, 199, 199)",background:"rgb(231, 231, 231)"}},null,512),[[g,r.temp.input]])]),V],32)])])])],64)}var B=_(D,[["render",J],["__scopeId","data-v-72cf6b84"]]);const U={class:"container-fluid"},G={class:"col-md-2",style:{height:"calc(100vh - 70px)",overflow:"hidden","overflow-y":"auto",padding:"0"}},R={class:"col-md-10 text-center",style:{padding:"20px",border:"1px solid #F3F3F3",background:"rgb(255,255,255,0.1)",height:"calc(100vh - 70px)",overflow:"hidden","overflow-y":"auto"}},Y={class:"col-12 text-left",style:{"padding-top":"20px","padding-bottom":"20px"}},K=t("img",{src:T,style:{height:"20px",width:"20px"}},null,-1),Q=[K],W={class:"row"},X={class:"col-md-5"},Z=t("div",{class:"col-md-12"},[t("h4",{style:{"font-weight":"bold","text-align":"left","font-size":"17px"}},"Clasifica el documento dentro de la categoria que corresponda.")],-1),ee={class:"col-12",style:{"padding-top":"30px","padding-bottom":"30px"}},te={style:{padding:"0px","list-style":"none",width:"100%",display:"flex","justify-content":"flex-start","align-items":"center","flex-direction":"column","align-content":"flex-start","margin-top":"30px"}},se={style:{width:"100%",display:"flex","justify-content":"flex-start","align-items":"flex-start","flex-direction":"column","align-content":"flex-start","margin-bottom":"5px"}},oe={href:"#",style:{"font-size":"12px",padding:"5px",background:"rgb(234, 234, 234)","border-radius":"30px",display:"flex","place-content":"flex-start","align-items":"center","flex-direction":"row","padding-left":"10px","padding-right":"10px"}},ie=["onClick"],ae=t("i",{class:"fas fa-times"},null,-1),ne=[ae],re={class:"col-md-7",style:{position:"relative","padding-top":"0"}},de={style:{position:"sticky",top:"0","padding-top":"0"}},le={style:{padding:"0","list-style":"none","border-top-left-radius":"10px","border-top-right-radius":"10px",display:"flex","flex-wrap":"wrap","flex-direction":"row","margin-top":"0","margin-bottom":"15px"}},ce={style:{padding:"5px",background:"#ECECEC","border-radius":"30px","font-size":"12px","font-weight":"600","margin-right":"10px","padding-left":"8px","padding-right":"8px","margin-bottom":"5px"}},pe=["onClick"],he=t("img",{src:N,style:{"max-width":"15px","max-height":"15px"}},null,-1),ue=[he],ge={class:"col-12",style:{"padding-top":"0px"}},me=t("h4",{style:{"font-weight":"bold","text-align":"left","font-size":"17px"}},"Asignale al documento como minimo tres etiquetas",-1),fe={key:0,class:"col-12",style:{"border-radius":"8px","margin-top":"10px","max-height":"400px",overflow:"hidden","overflow-y":"auto",padding:"0"}},ye={style:{width:"100%",padding:"0",margin:"0","list-style":"none"}},xe={style:{padding:"15px",width:"100%","text-align":"left",background:"#f6f5f5","border-bottom":"1px solid #e6e6e6","font-size":"12px",color:"black","font-weight":"500"}},ve=["onClick"],_e=t("img",{src:C,style:{width:"20px",height:"20px"}},null,-1),be=[_e],we={class:"col-12",style:{"padding-top":"50px"}},Se=t("h4",{style:{"font-weight":"bold","text-align":"left","font-size":"17px"}},"Escribe un titulo para tu documento",-1),Te={class:"col-12",style:{"padding-top":"50px"}},Ne=t("h4",{style:{"font-weight":"bold","text-align":"left","font-size":"17px"}},"Escribe una descripcion para tu documento",-1),$e={class:"col-12 text-center",style:{"padding-top":"50px"}},Ce={key:0,type:"submit",class:"btn btn-primary",style:{width:"120px",position:"relative"}},Oe={key:1,type:"submit",class:"btn btn-primary",style:{width:"120px",position:"relative"},disabled:"true"},ke=t("div",{class:"spinner-border text-light spinner-border-sm",role:"status"},[t("span",{class:"sr-only"},"Loading...")],-1),Fe=[ke],Ee={data(){return{categories_view:!0,tags_view:!1,currentType:0,currentName:null,searchInputTags:{target:null},saveCreateLoading:!1,loadingStart:!0,loadingSave:!1,data:{title:null,description:null},auth:localStorage.getItem("auth"),endpointDocument:window.ENDPOINT+"/library/get/document",endpointGet:"http://api.webu.lt/categories/get",endpointGetAll:window.ENDPOINT+"/folders/default/documents",endpointTags:"http://api.webu.lt/search/tags/default",endpointSave:window.ENDPOINT+"/library/organize",endpointSearchTags:window.ENDPOINT+"/search/tags",modalCreate:!1,inputCreate:null,categories:[],categoriesSelected:[],tags:[],tagSelected:[],title:null,description:null,id_document:this.$route.params.id,pathMoveSelected:[],treeDisplayData:[]}},created(){},mounted(){this.getFolderAll()},computed:{myCustomStyles(){return{tree:{style:{height:"auto",maxHeight:"300px",overflowY:"visible",display:"inline-block",textAlign:"left"}},row:{style:{width:"500px",cursor:"pointer"},child:{class:"",style:{height:"35px"},active:{style:{height:"35px"}}}},rowIndent:{paddingLeft:"20px"},text:{style:{"font-weight":"600","font-size":"12px"},active:{style:{"font-weight":"bold",color:"#1200FF","font-size":"12px"}}}}},myCustomOptions(){return{treeEvents:{expanded:{state:!0,fn:this.getDocumentsFromFolder},collapsed:{state:!0,fn:this.getDocumentsFromFolder},selected:{state:!1,fn:this.mySelectedFunction},checked:{state:!1,fn:this.myCheckedFunction}},events:{expanded:{state:!0},selected:{state:!0},checked:{state:!0},editableName:{state:!0,calledEvent:"expanded"}},addNode:{state:!0,class:"add_icon",style:{color:"red"},fn:this.addNodeFunction,appearOnHover:!0},editNode:{state:!0,fn:null,appearOnHover:!0},deleteNode:{state:!0,fn:this.deleteNodeFunction,appearOnHover:!0},showTags:!0}},myCustomStyles2(){return{tree:{style:{height:"auto",maxHeight:"300px",overflowY:"visible",display:"inline-block",textAlign:"left"}},deleteNode:{class:"button-move-tree",style:{color:"#EE5F5B"}},row:{style:{width:"500px",cursor:"pointer"},child:{class:"",style:{height:"35px"},active:{style:{height:"35px"}}}},rowIndent:{paddingLeft:"20px"},text:{style:{"font-weight":"600","font-size":"12px"},active:{style:{"font-weight":"bold",color:"#1200FF","font-size":"12px"}}}}},myCustomOptions2(){return{treeEvents:{expanded:{state:!0,fn:s=>{this.getChilds(s)}},collapsed:{state:!0,fn:this.mySelectedFunction},selected:{state:!1,fn:this.mySelectedFunction},checked:{state:!1,fn:this.myCheckedFunction}},events:{expanded:{state:!0},selected:{state:!0},checked:{state:!0},editableName:{state:!0,calledEvent:"expanded"}},addNode:{state:!1,class:"add_icon",style:{color:"red"},fn:this.addNodeFunction,appearOnHover:!0},editNode:{state:!1,fn:null,appearOnHover:!0},deleteNode:{state:!0,fn:this.selectPathMove,appearOnHover:!1},showTags:!0}}},methods:{getFolderAll(){const s={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({auth:this.auth})};fetch(window.ENDPOINT+"/folders/v2/default/documents",s).then(e=>e.json()).then(e=>{this.treeDisplayData=this.prepareArray(e)})},pathMoveSelectedRemove(s,e){delete this.pathMoveSelected[s],this.pathMoveSelected=this.pathMoveSelected.filter(function(o){return typeof o!="undefined"})},selectPathMove(s){console.log(s),this.pathMoveSelected.length<1?this.pathMoveSelected.push({id:s.id,text:s.text}):this.$toast.show("Solo puedes seleccionar una categoria",{position:"bottom-right"})},mySelectedFunction:function(s,e){console.log(`is ${s} selected ? ${e}`),console.log(this.$refs["my-tree"].getSelectedNode())},getDocument(){this.$Progress.start();const s={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({auth:this.auth,id:this.$route.params.id})};fetch(this.endpointDocument,s).then(e=>e.json()).then(e=>{console.log(e),this.document=e,this.$Progress.finish()})},save(){if(this.tagSelected.length<3){this.$toast.error("Por favor , selecciona como minimo 3 etiquetas",{position:"bottom-right"});return}if(this.pathMoveSelected.length<1){this.$toast.error("Por favor , selecciona una categoria",{position:"bottom-right"});return}const s={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({auth:this.auth,categories:this.pathMoveSelected,title:this.data.title,description:this.data.description,tags:this.tagSelected,id_document:this.id_document})};fetch(this.endpointSave,s).then(e=>e.json()).then(e=>{e.insertedId?(this.$router.push({name:"librarie-folders",query:{id:this.id_document}}),this.$toast.success("Gracias por compartir con la comunidad tu documento",{position:"bottom-right"})):this.$toast.error("Ocurrio un error , por favor intente luego",{position:"bottom-right"})})},selectCategorie(s){this.categoriesSelected.push(s)},removeCategorie(s){this.categoriesSelected.splice(s,1)},removeTag(s){this.tagSelected.splice(s,1)},selectTag(s){this.tagSelected.length<5?this.tagSelected.push(this.tags[s]):this.$toast.show("Solo puedes seleccionar 5 etiquetas",{position:"bottom-right"})},searchTags(){const s={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({auth:this.auth,search:this.searchInputTags.target})};fetch(this.endpointSearchTags,s).then(e=>e.json()).then(e=>{e.empty?this.tags=[]:this.tags=e})},getChilds(s){this.$Progress.start();const e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({auth:this.auth,parent:s})};fetch(window.ENDPOINT+"/folders/v2/default/documents/childs",e).then(o=>o.json()).then(o=>{this.$refs["my-tree"].findNode(s).nodes=this.prepareArray(o),this.nodeSelect=this.prepareArray(o),this.$Progress.finish()})},prepareArray(s){for(var e=[],o=s.length-1;o>=0;o--)e.push({id:s[o]._id,text:s[o].data.text,nodes:[{id:"934",text:"Cargando carpetas..",nodes:[],state:{checked:!1,selected:!1,expanded:!1}}],state:{checked:!1,selected:!1,expanded:!1}});return e}}},Ve=Object.assign(Ee,{setup(s){return(e,o)=>(a(),n(p,null,[c(k),t("main",null,[t("div",U,[t("form",{class:"row",onSubmit:o[5]||(o[5]=h(i=>e.save(),["prevent"]))},[t("div",G,[c(F)]),t("div",R,[t("div",Y,[t("a",{href:"@",onClick:o[0]||(o[0]=h(i=>e.$router.go(-1),["prevent"]))},Q)]),t("div",W,[t("div",X,[Z,t("div",ee,[c(S(E),{id:"my-tree-id",ref:"my-tree","custom-options":e.myCustomOptions2,"custom-styles":e.myCustomStyles2,nodes:e.treeDisplayData},null,8,["custom-options","custom-styles","nodes"]),t("ul",te,[(a(!0),n(p,null,f(e.pathMoveSelected,(i,r)=>(a(),n("li",se,[t("a",oe,[d(x(i.text)+" ",1),t("a",{href:"#",style:{"margin-left":"10px"},onClick:l=>e.pathMoveSelectedRemove(r,i.id)},ne,8,ie)])]))),256))]),c(B)])]),t("div",re,[t("div",de,[t("ul",le,[(a(!0),n(p,null,f(e.tagSelected,(i,r)=>(a(),n("li",ce,[d(x(i.data.title)+" ",1),t("a",{href:"#",onClick:l=>e.removeTag(r)},ue,8,pe)]))),256))]),t("div",ge,[me,u(t("input",{type:"text",class:"form-control input-search-dashboard",placeholder:"Escribe para agregar una etiqueta",onKeyup:o[1]||(o[1]=(...i)=>e.searchTags&&e.searchTags(...i)),"onUpdate:modelValue":o[2]||(o[2]=i=>e.searchInputTags.target=i)},null,544),[[g,e.searchInputTags.target]]),c(O,{style:{"z-index":"1000"}})]),e.searchInputTags.target?(a(),n("div",fe,[t("ul",ye,[(a(!0),n(p,null,f(e.tags,(i,r)=>(a(),n("li",xe,[d(x(i.data.title)+" ",1),t("a",{href:"#",style:{"font-size":"13px","font-weight":"600"},onClick:h(l=>e.selectTag(r),["prevent"])},be,8,ve)]))),256))])])):y("",!0),t("div",we,[Se,u(t("input",{type:"text",class:"form-control input-search-dashboard",placeholder:"Escribir titulo","onUpdate:modelValue":o[3]||(o[3]=i=>e.data.title=i),required:"true",maxlength:"100"},null,512),[[g,e.data.title]])]),t("div",Te,[Ne,u(t("input",{type:"text",class:"form-control input-search-dashboard",placeholder:"Escribir descripcion","onUpdate:modelValue":o[4]||(o[4]=i=>e.data.description=i),required:"true",maxlength:"350"},null,512),[[g,e.data.description]])]),t("div",$e,[e.loadingSave?y("",!0):(a(),n("button",Ce," Crear")),e.loadingSave?(a(),n("button",Oe,Fe)):y("",!0)])])])])])],32)])])],64))}});export{Ve as default};
