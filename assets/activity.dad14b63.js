import{o as n,c as d,a as h,b as t,F as c,D as m,k as p,l,m as r,A as f,H as i,n as u}from"./vendor.3ce90362.js";import{n as g,c as _}from"./navbar.3dc83e26.js";import"./Logocompleto.3df4452e.js";const b={class:"container-fluid"},y={class:"row"},v={class:"col-md-2",style:{height:"calc(100vh - 70px)",overflow:"hidden","overflow-y":"auto",padding:"0"}},E={class:"col-md-10 text-center",style:{padding:"20px",border:"1px solid #E2E2E2",background:"white",height:"calc(100vh - 70px)",overflow:"hidden","overflow-y":"auto","border-bottom":"1px solid #E5E5E5"}},P={class:"row justify-content-center"},S={class:"col-md-12"},w=t("div",{class:"col-md-12",style:{"margin-bottom":"30px"}},[t("h4",{style:{"font-weight":"bold","text-align":"left","font-size":"17px"}},"Actividad")],-1),N={class:"table"},O=t("thead",null,[t("tr",null,[t("th",{scope:"col"},"Email"),t("th",{scope:"col"},"Nombre y apellido"),t("th",{scope:"col"},"Accion"),t("th",{scope:"col"},"Fecha")])],-1),T={class:"modal fade",id:"createPayment","data-backdrop":"static","data-keyboard":"true",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},x={class:"modal-dialog modal-dialog-centered"},k=t("div",{class:"modal-header text-center"},[t("h5",{class:"modal-title"},"Nuevo codigo"),t("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},[t("span",{"aria-hidden":"true"},"\xD7")])],-1),j={class:"modal-body"},C={class:"form-group"},I=t("label",null,"Titulo",-1),D={class:"form-group"},V=t("label",null,"Codigo",-1),U={class:"form-group"},B=t("label",null,"Precio",-1),L=t("div",{class:"modal-footer",style:{border:"none"}},[t("button",{type:"submit",class:"btn btn-primary",style:{"font-size":"15px"}}," Guardar ")],-1),q={class:"modal fade",id:"editPayment","data-backdrop":"static","data-keyboard":"true",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},J={class:"modal-dialog modal-dialog-centered"},z=t("div",{class:"modal-header text-center"},[t("h5",{class:"modal-title"},"Editar codigo"),t("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},[t("span",{"aria-hidden":"true"},"\xD7")])],-1),A={class:"modal-body"},F={class:"form-group"},R=t("label",null,"Titulo",-1),G={class:"form-group"},M=t("label",null,"Codigo",-1),H={class:"form-group"},K=t("label",null,"Precio",-1),Q=t("div",{class:"modal-footer",style:{border:"none"}},[t("button",{type:"submit",class:"btn btn-primary",style:{"font-size":"15px"}}," Guardar ")],-1),W={class:"modal fade",id:"openRegisters","data-backdrop":"static","data-keyboard":"true",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},X={class:"modal-dialog modal-dialog-centered"},Y={class:"modal-content"},Z=t("div",{class:"modal-header text-center"},[t("h5",{class:"modal-title"},"Usuarios registrados"),t("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},[t("span",{"aria-hidden":"true"},"\xD7")])],-1),tt={key:0,class:"modal-body"},et={class:"col-md-12 text-left",style:{padding:"15px","font-size":"12px","margin-bottom":"15px",border:"1px solid #E7E7E7"}},ot=["src"],st=u(),at={style:{"font-weight":"600","font-size":"14px"}},it={data(){return{settings:{access_token:null,mode:null},form:{title:null,unit_price:0,code:null},formEdit:{title:null,unit_price:0,code:null},endpoint:window.ENDPOINT+"/admin/activity",endpointSave:window.ENDPOINT+"/admin/payments/code/create",endpointUpdate:window.ENDPOINT+"/admin/payments/code/edit",endpointDelete:window.ENDPOINT+"/admin/payments/code/delete",endpointSaveSettings:window.ENDPOINT+"/admin/payments/settings/edit",endpointLoadSettings:window.ENDPOINT+"/admin/payments/settings/get",data:[],registers:[]}},created(){this.load()},mounted(){},computed:{},methods:{openRegisters(a){a.length>0&&(this.registers=a,$("#openRegisters").modal("show"))},openNew(){$("#createPayment").modal("show")},openEdit(a){this.formEdit=this.data[a],$("#editPayment").modal("show")},removeAction(a){this.$Progress.start();const e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({auth:localStorage.getItem("auth"),id:a})};fetch(this.endpointDelete,e).then(s=>s.json()).then(s=>{this.$Progress.finish(),this.load()})},load(){this.$Progress.start();const a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({auth:localStorage.getItem("auth")})};fetch(this.endpoint,a).then(e=>e.json()).then(e=>{this.data=e,this.$Progress.finish()})},loadSettings(){this.$Progress.start();const a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({auth:localStorage.getItem("auth")})};fetch(this.endpointLoadSettings,a).then(e=>e.json()).then(e=>{this.settings=e,this.$Progress.finish()})},saveSettings(){this.$Progress.start();const a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({auth:localStorage.getItem("auth"),data:this.settings})};fetch(this.endpointSaveSettings,a).then(e=>e.json()).then(e=>{this.$Progress.finish(),this.load(),this.loadSettings()})},save(){this.$Progress.start();const a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({auth:localStorage.getItem("auth"),data:this.form})};fetch(this.endpointSave,a).then(e=>e.json()).then(e=>{this.$Progress.finish(),this.load(),$("#createPayment").modal("hide")})},saveEdit(){this.$Progress.start();const a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({auth:localStorage.getItem("auth"),data:{title:this.formEdit.title,unit_price:this.formEdit.unit_price,active:this.formEdit.active},id:this.formEdit._id})};fetch(this.endpointUpdate,a).then(e=>e.json()).then(e=>{this.$Progress.finish(),this.load(),$("#editPayment").modal("hide")})}}},ct=Object.assign(it,{setup(a){return(e,s)=>(n(),d(c,null,[h(g),t("main",null,[t("div",b,[t("div",y,[t("div",v,[h(_)]),t("div",E,[t("div",P,[t("div",S,[w,t("table",N,[O,t("tbody",null,[(n(!0),d(c,null,m(e.data,(o,nt)=>(n(),d("tr",null,[t("td",null,i(o.user.email),1),t("td",null,i(o.user.firstname)+" "+i(o.user.lastname),1),t("td",null,[t("b",null,i(o.msg),1)]),t("td",null,i(o.date),1)]))),256))])])])])])])])]),t("div",T,[t("div",x,[t("form",{class:"modal-content",onSubmit:s[3]||(s[3]=p(o=>e.save(),["prevent"]))},[k,t("div",j,[t("div",C,[I,l(t("input",{type:"text",class:"form-control","onUpdate:modelValue":s[0]||(s[0]=o=>e.form.title=o)},null,512),[[r,e.form.title]])]),t("div",D,[V,l(t("input",{type:"text",class:"form-control","onUpdate:modelValue":s[1]||(s[1]=o=>e.form.code=o)},null,512),[[r,e.form.code]])]),t("div",U,[B,l(t("input",{type:"number",class:"form-control","onUpdate:modelValue":s[2]||(s[2]=o=>e.form.unit_price=o)},null,512),[[r,e.form.unit_price]])])]),L],32)])]),t("div",q,[t("div",J,[t("form",{class:"modal-content",onSubmit:s[7]||(s[7]=p(o=>e.saveEdit(),["prevent"]))},[z,t("div",A,[t("div",F,[R,l(t("input",{type:"text",class:"form-control","onUpdate:modelValue":s[4]||(s[4]=o=>e.formEdit.title=o)},null,512),[[r,e.formEdit.title]])]),t("div",G,[M,l(t("input",{type:"text",class:"form-control","onUpdate:modelValue":s[5]||(s[5]=o=>e.formEdit.code=o)},null,512),[[r,e.formEdit.code]])]),t("div",H,[K,l(t("input",{type:"number",class:"form-control","onUpdate:modelValue":s[6]||(s[6]=o=>e.formEdit.unit_price=o)},null,512),[[r,e.formEdit.unit_price]])])]),Q],32)])]),t("div",W,[t("div",X,[t("form",Y,[Z,e.registers.length>0?(n(),d("div",tt,[(n(!0),d(c,null,m(e.registers,o=>(n(),d("div",et,[t("img",{src:"https://ui-avatars.com/api/?background=000000&color=fff&name="+o.firstname+o.lastname,style:{height:"30px","border-radius":"100%"}},null,8,ot),st,t("span",at,i(o.firstname)+" "+i(o.lastname),1),u(" "+i(o.email),1)]))),256))])):f("",!0)])])])],64))}});export{ct as default};
