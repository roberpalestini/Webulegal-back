import{o as a,c as d,a as u,b as t,k as l,F as p,D as g,A as _,l as r,m as c,n as h,H as n}from"./vendor.3ce90362.js";import{_ as y}from"./edit.dc69b3f2.js";import{_ as b}from"./trash.123024ab.js";import{n as v,c as E}from"./navbar.3dc83e26.js";import"./Logocompleto.3df4452e.js";const w={class:"container-fluid"},P={class:"row"},S={class:"col-md-2",style:{height:"calc(100vh - 70px)",overflow:"hidden","overflow-y":"auto",padding:"0"}},N={class:"col-md-10 text-center",style:{padding:"20px",border:"1px solid #E2E2E2",background:"white",height:"calc(100vh - 70px)",overflow:"hidden","overflow-y":"auto","border-bottom":"1px solid #E5E5E5"}},O={class:"row justify-content-center"},k={class:"col-md-12"},T={class:"col-md-12",style:{"margin-bottom":"30px"}},C={style:{"font-weight":"bold","text-align":"left","font-size":"17px"}},x=h("Codigos promocionales "),j={class:"table"},I=t("thead",null,[t("tr",null,[t("th",{scope:"col"},"#"),t("th",{scope:"col"},"Titulo"),t("th",{scope:"col"},"Codigo"),t("th",{scope:"col"},"Precio final"),t("th",{scope:"col"})])],-1),D={scope:"row"},V=["onClick"],U=h(" registrados"),B=["onClick"],L=t("img",{src:y,style:{width:"14px",height:"14px","margin-right":"5px"}},null,-1),q=h(" Editar"),z=[L,q],J=["onClick"],A=t("img",{src:b,style:{width:"14px",height:"14px","margin-right":"5px"}},null,-1),R=h(" Eliminar"),F=[A,R],G={class:"modal fade",id:"createPayment","data-backdrop":"static","data-keyboard":"true",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},M={class:"modal-dialog modal-dialog-centered"},H=t("div",{class:"modal-header text-center"},[t("h5",{class:"modal-title"},"Nuevo codigo"),t("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},[t("span",{"aria-hidden":"true"},"\xD7")])],-1),K={class:"modal-body"},Q={class:"form-group"},W=t("label",null,"Titulo",-1),X={class:"form-group"},Y=t("label",null,"Codigo",-1),Z={class:"form-group"},tt=t("label",null,"Precio",-1),et=t("div",{class:"modal-footer",style:{border:"none"}},[t("button",{type:"submit",class:"btn btn-primary",style:{"font-size":"15px"}}," Guardar ")],-1),ot={class:"modal fade",id:"editPayment","data-backdrop":"static","data-keyboard":"true",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},st={class:"modal-dialog modal-dialog-centered"},it=t("div",{class:"modal-header text-center"},[t("h5",{class:"modal-title"},"Editar codigo"),t("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},[t("span",{"aria-hidden":"true"},"\xD7")])],-1),nt={class:"modal-body"},at={class:"form-group"},dt=t("label",null,"Titulo",-1),lt={class:"form-group"},rt=t("label",null,"Codigo",-1),ct={class:"form-group"},ht=t("label",null,"Precio",-1),pt=t("div",{class:"modal-footer",style:{border:"none"}},[t("button",{type:"submit",class:"btn btn-primary",style:{"font-size":"15px"}}," Guardar ")],-1),mt={class:"modal fade",id:"openRegisters","data-backdrop":"static","data-keyboard":"true",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},ut={class:"modal-dialog modal-dialog-centered"},gt={class:"modal-content"},_t=t("div",{class:"modal-header text-center"},[t("h5",{class:"modal-title"},"Usuarios registrados"),t("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},[t("span",{"aria-hidden":"true"},"\xD7")])],-1),ft={key:0,class:"modal-body"},yt={class:"col-md-12 text-left",style:{padding:"15px","font-size":"12px","margin-bottom":"15px",border:"1px solid #E7E7E7"}},bt=["src"],vt=h(),Et={style:{"font-weight":"600","font-size":"14px"}},wt={data(){return{settings:{access_token:null,mode:null},form:{title:null,unit_price:0,code:null},formEdit:{title:null,unit_price:0,code:null},endpoint:window.ENDPOINT+"/admin/payments/code",endpointSave:window.ENDPOINT+"/admin/payments/code/create",endpointUpdate:window.ENDPOINT+"/admin/payments/code/edit",endpointDelete:window.ENDPOINT+"/admin/payments/code/delete",endpointSaveSettings:window.ENDPOINT+"/admin/payments/settings/edit",endpointLoadSettings:window.ENDPOINT+"/admin/payments/settings/get",data:[],registers:[]}},created(){this.load()},mounted(){},computed:{},methods:{openRegisters(i){i.length>0&&(this.registers=i,$("#openRegisters").modal("show"))},openNew(){$("#createPayment").modal("show")},openEdit(i){this.formEdit=this.data[i],$("#editPayment").modal("show")},removeAction(i){this.$Progress.start();const e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({auth:localStorage.getItem("auth"),id:i})};fetch(this.endpointDelete,e).then(o=>o.json()).then(o=>{this.$Progress.finish(),this.load()})},load(){this.$Progress.start();const i={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({auth:localStorage.getItem("auth")})};fetch(this.endpoint,i).then(e=>e.json()).then(e=>{this.$Progress.finish();for(let o=0;o<e.length;o++)e[o].registers==null&&(e[o].registers=[]),e[o].registers||(e[o].registers=[]);this.data=e})},loadSettings(){this.$Progress.start();const i={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({auth:localStorage.getItem("auth")})};fetch(this.endpointLoadSettings,i).then(e=>e.json()).then(e=>{this.settings=e,this.$Progress.finish()})},saveSettings(){this.$Progress.start();const i={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({auth:localStorage.getItem("auth"),data:this.settings})};fetch(this.endpointSaveSettings,i).then(e=>e.json()).then(e=>{this.$Progress.finish(),this.load(),this.loadSettings()})},save(){this.$Progress.start();const i={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({auth:localStorage.getItem("auth"),data:this.form})};fetch(this.endpointSave,i).then(e=>e.json()).then(e=>{this.$Progress.finish(),this.load(),$("#createPayment").modal("hide")})},saveEdit(){this.$Progress.start();const i={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({auth:localStorage.getItem("auth"),data:{title:this.formEdit.title,unit_price:this.formEdit.unit_price,active:this.formEdit.active},id:this.formEdit._id})};fetch(this.endpointUpdate,i).then(e=>e.json()).then(e=>{this.$Progress.finish(),this.load(),$("#editPayment").modal("hide")})}}},kt=Object.assign(wt,{setup(i){return(e,o)=>(a(),d(p,null,[u(v),t("main",null,[t("div",w,[t("div",P,[t("div",S,[u(E)]),t("div",N,[t("div",O,[t("div",k,[t("div",T,[t("h4",C,[x,t("button",{type:"submit",class:"btn btn-primary",style:{width:"auto",position:"relative","z-index":"1000"},onClick:o[0]||(o[0]=l(s=>e.openNew(),["prevent"]))},"A\xF1adir nuevo")])]),t("table",j,[I,t("tbody",null,[e.data.length>0?(a(!0),d(p,{key:0},g(e.data,(s,f)=>(a(),d("tr",null,[t("th",D,n(s._id),1),t("td",null,n(s.title),1),t("td",null,[t("b",null,n(s.code),1)]),t("td",null,"$"+n(s.unit_price),1),t("td",null,[t("span",{onClick:l(m=>e.openRegisters(s.registers),["prevent"]),style:{cursor:"pointer"}},[t("b",null,n(s.registers.length),1),U],8,V)]),t("td",null,[t("a",{href:"#",onClick:l(m=>e.openEdit(f),["prevent"])},z,8,B),t("a",{href:"#",onClick:l(m=>e.removeAction(s._id),["prevent"]),style:{"font-weight":"500","margin-left":"15px"}},F,8,J)])]))),256)):_("",!0)])])])])])])])]),t("div",G,[t("div",M,[t("form",{class:"modal-content",onSubmit:o[4]||(o[4]=l(s=>e.save(),["prevent"]))},[H,t("div",K,[t("div",Q,[W,r(t("input",{type:"text",class:"form-control","onUpdate:modelValue":o[1]||(o[1]=s=>e.form.title=s)},null,512),[[c,e.form.title]])]),t("div",X,[Y,r(t("input",{type:"text",class:"form-control","onUpdate:modelValue":o[2]||(o[2]=s=>e.form.code=s)},null,512),[[c,e.form.code]])]),t("div",Z,[tt,r(t("input",{type:"number",class:"form-control","onUpdate:modelValue":o[3]||(o[3]=s=>e.form.unit_price=s)},null,512),[[c,e.form.unit_price]])])]),et],32)])]),t("div",ot,[t("div",st,[t("form",{class:"modal-content",onSubmit:o[8]||(o[8]=l(s=>e.saveEdit(),["prevent"]))},[it,t("div",nt,[t("div",at,[dt,r(t("input",{type:"text",class:"form-control","onUpdate:modelValue":o[5]||(o[5]=s=>e.formEdit.title=s)},null,512),[[c,e.formEdit.title]])]),t("div",lt,[rt,r(t("input",{type:"text",class:"form-control","onUpdate:modelValue":o[6]||(o[6]=s=>e.formEdit.code=s)},null,512),[[c,e.formEdit.code]])]),t("div",ct,[ht,r(t("input",{type:"number",class:"form-control","onUpdate:modelValue":o[7]||(o[7]=s=>e.formEdit.unit_price=s)},null,512),[[c,e.formEdit.unit_price]])])]),pt],32)])]),t("div",mt,[t("div",ut,[t("form",gt,[_t,e.registers.length>0?(a(),d("div",ft,[(a(!0),d(p,null,g(e.registers,s=>(a(),d("div",yt,[t("img",{src:"https://ui-avatars.com/api/?background=000000&color=fff&name="+s.firstname+s.lastname,style:{height:"30px","border-radius":"100%"}},null,8,bt),vt,t("span",Et,n(s.firstname)+" "+n(s.lastname),1),h(" "+n(s.email),1)]))),256))])):_("",!0)])])])],64))}});export{kt as default};
