var ji=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports);var au=ji((Ze,Je)=>{var Vn={exports:{}};(function(n,e){(function(t,r){n.exports=t()})(function(){var t="object",r="function",i="undefined",l=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],p=["setStart","setStartBefore","setStartAfter","setEnd","setEndBefore","setEndAfter","collapse","selectNode","selectNodeContents","compareBoundaryPoints","deleteContents","extractContents","cloneContents","insertNode","surroundContents","cloneRange","toString","detach"],w=["boundingHeight","boundingLeft","boundingTop","boundingWidth","htmlText","text"],S=["collapse","compareEndPoints","duplicate","moveToElementText","parentElement","select","setEndPoint","getBoundingClientRect"];function Q(g,O){var R=typeof g[O];return R==r||!!(R==t&&g[O])||R=="unknown"}function Y(g,O){return!!(typeof g[O]==t&&g[O])}function Re(g,O){return typeof g[O]!=i}function Pe(g){return function(O,R){for(var P=R.length;P--;)if(!g(O,R[P]))return!1;return!0}}var $e=Pe(Q),De=Pe(Y),et=Pe(Re);function Qe(g){return g&&$e(g,S)&&et(g,w)}function dt(g){return Y(g,"body")?g.body:g.getElementsByTagName("body")[0]}var It=[].forEach?function(g,O){g.forEach(O)}:function(g,O){for(var R=0,P=g.length;R<P;++R)O(g[R],R)},gt={},it=typeof window!=i&&typeof document!=i,at={isHostMethod:Q,isHostObject:Y,isHostProperty:Re,areHostMethods:$e,areHostObjects:De,areHostProperties:et,isTextRange:Qe,getBody:dt,forEach:It},ee={version:"1.3.0",initialized:!1,isBrowser:it,supported:!0,util:at,features:{},modules:gt,config:{alertOnFail:!1,alertOnWarn:!1,preferTextRange:!1,autoInitialize:typeof rangyAutoInitialize==i?!0:rangyAutoInitialize}};function Tt(g){typeof console!=i&&Q(console,"log")&&console.log(g)}function xt(g,O){it&&O?alert(g):Tt(g)}function ct(g){ee.initialized=!0,ee.supported=!1,xt("Rangy is not supported in this environment. Reason: "+g,ee.config.alertOnFail)}ee.fail=ct;function wn(g){xt("Rangy warning: "+g,ee.config.alertOnWarn)}ee.warn=wn;var At;({}).hasOwnProperty?(at.extend=At=function(g,O,R){var P,L;for(var G in O)O.hasOwnProperty(G)&&(P=g[G],L=O[G],R&&P!==null&&typeof P=="object"&&L!==null&&typeof L=="object"&&At(P,L,!0),g[G]=L);return O.hasOwnProperty("toString")&&(g.toString=O.toString),g},at.createOptions=function(g,O){var R={};return At(R,O),g&&At(R,g),R}):ct("hasOwnProperty not supported"),it||ct("Rangy can only run in a browser"),function(){var g;if(it){var O=document.createElement("div");O.appendChild(document.createElement("span"));var R=[].slice;try{R.call(O.childNodes,0)[0].nodeType==1&&(g=function(P){return R.call(P,0)})}catch{}}g||(g=function(P){for(var L=[],G=0,q=P.length;G<q;++G)L[G]=P[G];return L}),at.toArray=g}();var pt;it&&(Q(document,"addEventListener")?pt=function(g,O,R){g.addEventListener(O,R,!1)}:Q(document,"attachEvent")?pt=function(g,O,R){g.attachEvent("on"+O,R)}:ct("Document does not have required addEventListener or attachEvent method"),at.addListener=pt);var Lt=[];function Xt(g){return g.message||g.description||String(g)}function Ft(){if(!(!it||ee.initialized)){var g,O=!1,R=!1;Q(document,"createRange")&&(g=document.createRange(),$e(g,p)&&et(g,l)&&(O=!0));var P=dt(document);if(!P||P.nodeName.toLowerCase()!="body"){ct("No body element found");return}if(P&&Q(P,"createTextRange")&&(g=P.createTextRange(),Qe(g)&&(R=!0)),!O&&!R){ct("Neither Range nor TextRange are available");return}ee.initialized=!0,ee.features={implementsDomRange:O,implementsTextRange:R};var L,G;for(var q in gt)(L=gt[q])instanceof wt&&L.init(L,ee);for(var pe=0,we=Lt.length;pe<we;++pe)try{Lt[pe](ee)}catch(Be){G="Rangy init listener threw an exception. Continuing. Detail: "+Xt(Be),Tt(G)}}}function Zt(g,O,R){R&&(g+=" in module "+R.name),ee.warn("DEPRECATED: "+g+" is deprecated. Please use "+O+" instead.")}function Jt(g,O,R,P){g[O]=function(){return Zt(O,R,P),g[R].apply(g,at.toArray(arguments))}}at.deprecationNotice=Zt,at.createAliasForDeprecatedMethod=Jt,ee.init=Ft,ee.addInitListener=function(g){ee.initialized?g(ee):Lt.push(g)};var mt=[];ee.addShimListener=function(g){mt.push(g)};function yt(g){g=g||window,Ft();for(var O=0,R=mt.length;O<R;++O)mt[O](g)}it&&(ee.shim=ee.createMissingNativeApi=yt,Jt(ee,"createMissingNativeApi","shim"));function wt(g,O,R){this.name=g,this.dependencies=O,this.initialized=!1,this.supported=!1,this.initializer=R}wt.prototype={init:function(){for(var g=this.dependencies||[],O=0,R=g.length,P,L;O<R;++O){if(L=g[O],P=gt[L],!P||!(P instanceof wt))throw new Error("required module '"+L+"' not found");if(P.init(),!P.supported)throw new Error("required module '"+L+"' not supported")}this.initializer(this)},fail:function(g){throw this.initialized=!0,this.supported=!1,new Error(g)},warn:function(g){ee.warn("Module "+this.name+": "+g)},deprecationNotice:function(g,O){ee.warn("DEPRECATED: "+g+" in module "+this.name+" is deprecated. Please use "+O+" instead")},createError:function(g){return new Error("Error in Rangy "+this.name+" module: "+g)}};function Wt(g,O,R){var P=new wt(g,O,function(L){if(!L.initialized){L.initialized=!0;try{R(ee,L),L.supported=!0}catch(q){var G="Module '"+g+"' failed to load: "+Xt(q);Tt(G),q.stack&&Tt(q.stack)}}});return gt[g]=P,P}ee.createModule=function(g){var O,R;arguments.length==2?(O=arguments[1],R=[]):(O=arguments[2],R=arguments[1]);var P=Wt(g,R,O);ee.initialized&&ee.supported&&P.init()},ee.createCoreModule=function(g,O,R){Wt(g,O,R)};function St(){}ee.RangePrototype=St,ee.rangePrototype=new St;function en(){}ee.selectionPrototype=new en,ee.createCoreModule("DomUtil",[],function(g,O){var R="undefined",P=g.util,L=P.getBody;P.areHostMethods(document,["createDocumentFragment","createElement","createTextNode"])||O.fail("document missing a Node creation method"),P.isHostMethod(document,"getElementsByTagName")||O.fail("document missing getElementsByTagName method");var G=document.createElement("div");P.areHostMethods(G,["insertBefore","appendChild","cloneNode"])||O.fail("Incomplete Element implementation"),P.isHostProperty(G,"innerHTML")||O.fail("Element is missing innerHTML property");var q=document.createTextNode("test");P.areHostMethods(q,["splitText","deleteData","insertData","appendData","cloneNode"])||O.fail("Incomplete Text Node implementation");var pe=function(m,E){for(var X=m.length;X--;)if(m[X]===E)return!0;return!1};function we(m){var E;return typeof m.namespaceURI==R||(E=m.namespaceURI)===null||E=="http://www.w3.org/1999/xhtml"}function Be(m){var E=m.parentNode;return E.nodeType==1?E:null}function oe(m){for(var E=0;m=m.previousSibling;)++E;return E}function ae(m){switch(m.nodeType){case 7:case 10:return 0;case 3:case 8:return m.length;default:return m.childNodes.length}}function Ie(m,E){var X=[],H;for(H=m;H;H=H.parentNode)X.push(H);for(H=E;H;H=H.parentNode)if(pe(X,H))return H;return null}function Se(m,E,X){for(var H=X?E:E.parentNode;H;){if(H===m)return!0;H=H.parentNode}return!1}function Me(m,E){return Se(m,E,!0)}function de(m,E,X){for(var H,be=X?m:m.parentNode;be;){if(H=be.parentNode,H===E)return be;be=H}return null}function Le(m){var E=m.nodeType;return E==3||E==4||E==8}function x(m){if(!m)return!1;var E=m.nodeType;return E==3||E==8}function te(m,E){var X=E.nextSibling,H=E.parentNode;return X?H.insertBefore(m,X):H.appendChild(m),m}function I(m,E,X){var H=m.cloneNode(!1);if(H.deleteData(0,E),m.deleteData(E,m.length-E),te(H,m),X)for(var be=0,a;a=X[be++];)a.node==m&&a.offset>E?(a.node=H,a.offset-=E):a.node==m.parentNode&&a.offset>oe(m)&&++a.offset;return H}function ce(m){if(m.nodeType==9)return m;if(typeof m.ownerDocument!=R)return m.ownerDocument;if(typeof m.document!=R)return m.document;if(m.parentNode)return ce(m.parentNode);throw O.createError("getDocument: no document found for node")}function ve(m){var E=ce(m);if(typeof E.defaultView!=R)return E.defaultView;if(typeof E.parentWindow!=R)return E.parentWindow;throw O.createError("Cannot get a window object for node")}function ne(m){if(typeof m.contentDocument!=R)return m.contentDocument;if(typeof m.contentWindow!=R)return m.contentWindow.document;throw O.createError("getIframeDocument: No Document object found for iframe element")}function K(m){if(typeof m.contentWindow!=R)return m.contentWindow;if(typeof m.contentDocument!=R)return m.contentDocument.defaultView;throw O.createError("getIframeWindow: No Window object found for iframe element")}function ge(m){return m&&P.isHostMethod(m,"setTimeout")&&P.isHostObject(m,"document")}function le(m,E,X){var H;if(m?P.isHostProperty(m,"nodeType")?H=m.nodeType==1&&m.tagName.toLowerCase()=="iframe"?ne(m):ce(m):ge(m)&&(H=m.document):H=document,!H)throw E.createError(X+"(): Parameter must be a Window object or DOM node");return H}function ue(m){for(var E;E=m.parentNode;)m=E;return m}function _e(m,E,X,H){var be,a,c,u,d;if(m==X)return E===H?0:E<H?-1:1;if(be=de(X,m,!0))return E<=oe(be)?-1:1;if(be=de(m,X,!0))return oe(be)<H?-1:1;if(a=Ie(m,X),!a)throw new Error("comparePoints error: nodes have no common ancestor");if(c=m===a?a:de(m,a,!0),u=X===a?a:de(X,a,!0),c===u)throw O.createError("comparePoints got to case 4 and childA and childB are the same!");for(d=a.firstChild;d;){if(d===c)return-1;if(d===u)return 1;d=d.nextSibling}}var M=!1;function $(m){var E;try{return E=m.parentNode,!1}catch{return!0}}(function(){var m=document.createElement("b");m.innerHTML="1";var E=m.firstChild;m.innerHTML="<br />",M=$(E),g.features.crashyTextNodes=M})();function re(m){if(!m)return"[No node]";if(M&&$(m))return"[Broken node]";if(Le(m))return'"'+m.data+'"';if(m.nodeType==1){var E=m.id?' id="'+m.id+'"':"";return"<"+m.nodeName+E+">[index:"+oe(m)+",length:"+m.childNodes.length+"]["+(m.innerHTML||"[innerHTML not supported]").slice(0,25)+"]"}return m.nodeName}function he(m){for(var E=ce(m).createDocumentFragment(),X;X=m.firstChild;)E.appendChild(X);return E}var Ce;typeof window.getComputedStyle!=R?Ce=function(m,E){return ve(m).getComputedStyle(m,null)[E]}:typeof document.documentElement.currentStyle!=R?Ce=function(m,E){return m.currentStyle?m.currentStyle[E]:""}:O.fail("No means of obtaining computed style properties found");function qe(m,E,X){var H=L(m),be=m.createElement("div");be.contentEditable=""+!!X,E&&(be.innerHTML=E);var a=H.firstChild;return a?H.insertBefore(be,a):H.appendChild(be),be}function Ae(m){return m.parentNode.removeChild(m)}function Te(m){this.root=m,this._next=m}Te.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){var m=this._current=this._next,E,X;if(this._current)if(E=m.firstChild,E)this._next=E;else{for(X=null;m!==this.root&&!(X=m.nextSibling);)m=m.parentNode;this._next=X}return this._current},detach:function(){this._current=this._next=this.root=null}};function Ue(m){return new Te(m)}function ke(m,E){this.node=m,this.offset=E}ke.prototype={equals:function(m){return!!m&&this.node===m.node&&this.offset==m.offset},inspect:function(){return"[DomPosition("+re(this.node)+":"+this.offset+")]"},toString:function(){return this.inspect()}};function tt(m){this.code=this[m],this.codeName=m,this.message="DOMException: "+this.codeName}tt.prototype={INDEX_SIZE_ERR:1,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INVALID_STATE_ERR:11,INVALID_NODE_TYPE_ERR:24},tt.prototype.toString=function(){return this.message},g.dom={arrayContains:pe,isHtmlNamespace:we,parentElement:Be,getNodeIndex:oe,getNodeLength:ae,getCommonAncestor:Ie,isAncestorOf:Se,isOrIsAncestorOf:Me,getClosestAncestorIn:de,isCharacterDataNode:Le,isTextOrCommentNode:x,insertAfter:te,splitDataNode:I,getDocument:ce,getWindow:ve,getIframeWindow:K,getIframeDocument:ne,getBody:L,isWindow:ge,getContentDocument:le,getRootContainer:ue,comparePoints:_e,isBrokenNode:$,inspectNode:re,getComputedStyleProperty:Ce,createTestElement:qe,removeNode:Ae,fragmentFromNodeChildren:he,createIterator:Ue,DomPosition:ke},g.DOMException=tt}),ee.createCoreModule("DomRange",["DomUtil"],function(g,O){var R=g.dom,P=g.util,L=R.DomPosition,G=g.DOMException,q=R.isCharacterDataNode,pe=R.getNodeIndex,we=R.isOrIsAncestorOf,Be=R.getDocument,oe=R.comparePoints,ae=R.splitDataNode,Ie=R.getClosestAncestorIn,Se=R.getNodeLength,Me=R.arrayContains,de=R.getRootContainer,Le=g.features.crashyTextNodes,x=R.removeNode;function te(o,f){return o.nodeType!=3&&(we(o,f.startContainer)||we(o,f.endContainer))}function I(o){return o.document||Be(o.startContainer)}function ce(o){return de(o.startContainer)}function ve(o){return new L(o.parentNode,pe(o))}function ne(o){return new L(o.parentNode,pe(o)+1)}function K(o,f,y){var k=o.nodeType==11?o.firstChild:o;return q(f)?y==f.length?R.insertAfter(o,f):f.parentNode.insertBefore(o,y==0?f:ae(f,y)):y>=f.childNodes.length?f.appendChild(o):f.insertBefore(o,f.childNodes[y]),k}function ge(o,f,y){if(C(o),C(f),I(f)!=I(o))throw new G("WRONG_DOCUMENT_ERR");var k=oe(o.startContainer,o.startOffset,f.endContainer,f.endOffset),W=oe(o.endContainer,o.endOffset,f.startContainer,f.startOffset);return y?k<=0&&W>=0:k<0&&W>0}function le(o){for(var f,y,k=I(o.range).createDocumentFragment(),W;y=o.next();){if(f=o.isPartiallySelectedSubtree(),y=y.cloneNode(!f),f&&(W=o.getSubtreeIterator(),y.appendChild(le(W)),W.detach()),y.nodeType==10)throw new G("HIERARCHY_REQUEST_ERR");k.appendChild(y)}return k}function ue(o,f,y){var k,W;y=y||{stop:!1};for(var ie,_;ie=o.next();)if(o.isPartiallySelectedSubtree()){if(f(ie)===!1){y.stop=!0;return}else if(_=o.getSubtreeIterator(),ue(_,f,y),_.detach(),y.stop)return}else for(k=R.createIterator(ie);W=k.next();)if(f(W)===!1){y.stop=!0;return}}function _e(o){for(var f;o.next();)o.isPartiallySelectedSubtree()?(f=o.getSubtreeIterator(),_e(f),f.detach()):o.remove()}function M(o){for(var f,y=I(o.range).createDocumentFragment(),k;f=o.next();){if(o.isPartiallySelectedSubtree()?(f=f.cloneNode(!1),k=o.getSubtreeIterator(),f.appendChild(M(k)),k.detach()):o.remove(),f.nodeType==10)throw new G("HIERARCHY_REQUEST_ERR");y.appendChild(f)}return y}function $(o,f,y){var k=!!(f&&f.length),W,ie=!!y;k&&(W=new RegExp("^("+f.join("|")+")$"));var _=[];return ue(new he(o,!1),function(F){if(!(k&&!W.test(F.nodeType))&&!(ie&&!y(F))){var z=o.startContainer;if(!(F==z&&q(z)&&o.startOffset==z.length)){var se=o.endContainer;F==se&&q(se)&&o.endOffset==0||_.push(F)}}}),_}function re(o){var f=typeof o.getName=="undefined"?"Range":o.getName();return"["+f+"("+R.inspectNode(o.startContainer)+":"+o.startOffset+", "+R.inspectNode(o.endContainer)+":"+o.endOffset+")]"}function he(o,f){if(this.range=o,this.clonePartiallySelectedTextNodes=f,!o.collapsed){this.sc=o.startContainer,this.so=o.startOffset,this.ec=o.endContainer,this.eo=o.endOffset;var y=o.commonAncestorContainer;this.sc===this.ec&&q(this.sc)?(this.isSingleCharacterDataNode=!0,this._first=this._last=this._next=this.sc):(this._first=this._next=this.sc===y&&!q(this.sc)?this.sc.childNodes[this.so]:Ie(this.sc,y,!0),this._last=this.ec===y&&!q(this.ec)?this.ec.childNodes[this.eo-1]:Ie(this.ec,y,!0))}}he.prototype={_current:null,_next:null,_first:null,_last:null,isSingleCharacterDataNode:!1,reset:function(){this._current=null,this._next=this._first},hasNext:function(){return!!this._next},next:function(){var o=this._current=this._next;return o&&(this._next=o!==this._last?o.nextSibling:null,q(o)&&this.clonePartiallySelectedTextNodes&&(o===this.ec&&(o=o.cloneNode(!0)).deleteData(this.eo,o.length-this.eo),this._current===this.sc&&(o=o.cloneNode(!0)).deleteData(0,this.so))),o},remove:function(){var o=this._current,f,y;q(o)&&(o===this.sc||o===this.ec)?(f=o===this.sc?this.so:0,y=o===this.ec?this.eo:o.length,f!=y&&o.deleteData(f,y-f)):o.parentNode&&x(o)},isPartiallySelectedSubtree:function(){var o=this._current;return te(o,this.range)},getSubtreeIterator:function(){var o;if(this.isSingleCharacterDataNode)o=this.range.cloneRange(),o.collapse(!1);else{o=new He(I(this.range));var f=this._current,y=f,k=0,W=f,ie=Se(f);we(f,this.sc)&&(y=this.sc,k=this.so),we(f,this.ec)&&(W=this.ec,ie=this.eo),Ve(o,y,k,W,ie)}return new he(o,this.clonePartiallySelectedTextNodes)},detach:function(){this.range=this._current=this._next=this._first=this._last=this.sc=this.so=this.ec=this.eo=null}};var Ce=[1,3,4,5,7,8,10],qe=[2,9,11],Ae=[5,6,10,12],Te=[1,3,4,5,7,8,10,11],Ue=[1,3,4,5,7,8];function ke(o){return function(f,y){for(var k,W=y?f:f.parentNode;W;){if(k=W.nodeType,Me(o,k))return W;W=W.parentNode}return null}}var tt=ke([9,11]),m=ke(Ae),E=ke([6,10,12]);function X(o,f){if(E(o,f))throw new G("INVALID_NODE_TYPE_ERR")}function H(o,f){if(!Me(f,o.nodeType))throw new G("INVALID_NODE_TYPE_ERR")}function be(o,f){if(f<0||f>(q(o)?o.length:o.childNodes.length))throw new G("INDEX_SIZE_ERR")}function a(o,f){if(tt(o,!0)!==tt(f,!0))throw new G("WRONG_DOCUMENT_ERR")}function c(o){if(m(o,!0))throw new G("NO_MODIFICATION_ALLOWED_ERR")}function u(o,f){if(!o)throw new G(f)}function d(o,f){return f<=(q(o)?o.length:o.childNodes.length)}function v(o){return!!o.startContainer&&!!o.endContainer&&!(Le&&(R.isBrokenNode(o.startContainer)||R.isBrokenNode(o.endContainer)))&&de(o.startContainer)==de(o.endContainer)&&d(o.startContainer,o.startOffset)&&d(o.endContainer,o.endOffset)}function C(o){if(!v(o))throw new Error("Range error: Range is not valid. This usually happens after DOM mutation. Range: ("+o.inspect()+")")}var B=document.createElement("style"),T=!1;try{B.innerHTML="<b>x</b>",T=B.firstChild.nodeType==3}catch{}g.features.htmlParsingConforms=T;var V=T?function(o){var f=this.startContainer,y=Be(f);if(!f)throw new G("INVALID_STATE_ERR");var k=null;return f.nodeType==1?k=f:q(f)&&(k=R.parentElement(f)),k===null||k.nodeName=="HTML"&&R.isHtmlNamespace(Be(k).documentElement)&&R.isHtmlNamespace(k)?k=y.createElement("body"):k=k.cloneNode(!1),k.innerHTML=o,R.fragmentFromNodeChildren(k)}:function(o){var f=I(this),y=f.createElement("body");return y.innerHTML=o,R.fragmentFromNodeChildren(y)};function A(o,f){C(o);var y=o.startContainer,k=o.startOffset,W=o.endContainer,ie=o.endOffset,_=y===W;q(W)&&ie>0&&ie<W.length&&ae(W,ie,f),q(y)&&k>0&&k<y.length&&(y=ae(y,k,f),_?(ie-=k,W=y):W==y.parentNode&&ie>=pe(y)&&ie++,k=0),o.setStartAndEnd(y,k,W,ie)}function U(o){C(o);var f=o.commonAncestorContainer.parentNode.cloneNode(!1);return f.appendChild(o.cloneContents()),f.innerHTML}var j=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],fe=0,ye=1,Fe=2,Ye=3,nt=0,ut=1,s=2,h=3;P.extend(g.rangePrototype,{compareBoundaryPoints:function(o,f){C(this),a(this.startContainer,f.startContainer);var y,k,W,ie,_=o==Ye||o==fe?"start":"end",F=o==ye||o==fe?"start":"end";return y=this[_+"Container"],k=this[_+"Offset"],W=f[F+"Container"],ie=f[F+"Offset"],oe(y,k,W,ie)},insertNode:function(o){if(C(this),H(o,Te),c(this.startContainer),we(o,this.startContainer))throw new G("HIERARCHY_REQUEST_ERR");var f=K(o,this.startContainer,this.startOffset);this.setStartBefore(f)},cloneContents:function(){C(this);var o,f;if(this.collapsed)return I(this).createDocumentFragment();if(this.startContainer===this.endContainer&&q(this.startContainer))return o=this.startContainer.cloneNode(!0),o.data=o.data.slice(this.startOffset,this.endOffset),f=I(this).createDocumentFragment(),f.appendChild(o),f;var y=new he(this,!0);return o=le(y),y.detach(),o},canSurroundContents:function(){C(this),c(this.startContainer),c(this.endContainer);var o=new he(this,!0),f=o._first&&te(o._first,this)||o._last&&te(o._last,this);return o.detach(),!f},surroundContents:function(o){if(H(o,Ue),!this.canSurroundContents())throw new G("INVALID_STATE_ERR");var f=this.extractContents();if(o.hasChildNodes())for(;o.lastChild;)o.removeChild(o.lastChild);K(o,this.startContainer,this.startOffset),o.appendChild(f),this.selectNode(o)},cloneRange:function(){C(this);for(var o=new He(I(this)),f=j.length,y;f--;)y=j[f],o[y]=this[y];return o},toString:function(){C(this);var o=this.startContainer;if(o===this.endContainer&&q(o))return o.nodeType==3||o.nodeType==4?o.data.slice(this.startOffset,this.endOffset):"";var f=[],y=new he(this,!0);return ue(y,function(k){(k.nodeType==3||k.nodeType==4)&&f.push(k.data)}),y.detach(),f.join("")},compareNode:function(o){C(this);var f=o.parentNode,y=pe(o);if(!f)throw new G("NOT_FOUND_ERR");var k=this.comparePoint(f,y),W=this.comparePoint(f,y+1);return k<0?W>0?s:nt:W>0?ut:h},comparePoint:function(o,f){return C(this),u(o,"HIERARCHY_REQUEST_ERR"),a(o,this.startContainer),oe(o,f,this.startContainer,this.startOffset)<0?-1:oe(o,f,this.endContainer,this.endOffset)>0?1:0},createContextualFragment:V,toHtml:function(){return U(this)},intersectsNode:function(o,f){if(C(this),de(o)!=ce(this))return!1;var y=o.parentNode,k=pe(o);if(!y)return!0;var W=oe(y,k,this.endContainer,this.endOffset),ie=oe(y,k+1,this.startContainer,this.startOffset);return f?W<=0&&ie>=0:W<0&&ie>0},isPointInRange:function(o,f){return C(this),u(o,"HIERARCHY_REQUEST_ERR"),a(o,this.startContainer),oe(o,f,this.startContainer,this.startOffset)>=0&&oe(o,f,this.endContainer,this.endOffset)<=0},intersectsRange:function(o){return ge(this,o,!1)},intersectsOrTouchesRange:function(o){return ge(this,o,!0)},intersection:function(o){if(this.intersectsRange(o)){var f=oe(this.startContainer,this.startOffset,o.startContainer,o.startOffset),y=oe(this.endContainer,this.endOffset,o.endContainer,o.endOffset),k=this.cloneRange();return f==-1&&k.setStart(o.startContainer,o.startOffset),y==1&&k.setEnd(o.endContainer,o.endOffset),k}return null},union:function(o){if(this.intersectsOrTouchesRange(o)){var f=this.cloneRange();return oe(o.startContainer,o.startOffset,this.startContainer,this.startOffset)==-1&&f.setStart(o.startContainer,o.startOffset),oe(o.endContainer,o.endOffset,this.endContainer,this.endOffset)==1&&f.setEnd(o.endContainer,o.endOffset),f}else throw new G("Ranges do not intersect")},containsNode:function(o,f){return f?this.intersectsNode(o,!1):this.compareNode(o)==h},containsNodeContents:function(o){return this.comparePoint(o,0)>=0&&this.comparePoint(o,Se(o))<=0},containsRange:function(o){var f=this.intersection(o);return f!==null&&o.equals(f)},containsNodeText:function(o){var f=this.cloneRange();f.selectNode(o);var y=f.getNodes([3]);if(y.length>0){f.setStart(y[0],0);var k=y.pop();return f.setEnd(k,k.length),this.containsRange(f)}else return this.containsNodeContents(o)},getNodes:function(o,f){return C(this),$(this,o,f)},getDocument:function(){return I(this)},collapseBefore:function(o){this.setEndBefore(o),this.collapse(!1)},collapseAfter:function(o){this.setStartAfter(o),this.collapse(!0)},getBookmark:function(o){var f=I(this),y=g.createRange(f);o=o||R.getBody(f),y.selectNodeContents(o);var k=this.intersection(y),W=0,ie=0;return k&&(y.setEnd(k.startContainer,k.startOffset),W=y.toString().length,ie=W+k.toString().length),{start:W,end:ie,containerNode:o}},moveToBookmark:function(o){var f=o.containerNode,y=0;this.setStart(f,0),this.collapse(!0);for(var k=[f],W,ie=!1,_=!1,F,z,se;!_&&(W=k.pop());)if(W.nodeType==3)F=y+W.length,!ie&&o.start>=y&&o.start<=F&&(this.setStart(W,o.start-y),ie=!0),ie&&o.end>=y&&o.end<=F&&(this.setEnd(W,o.end-y),_=!0),y=F;else for(se=W.childNodes,z=se.length;z--;)k.push(se[z])},getName:function(){return"DomRange"},equals:function(o){return He.rangesEqual(this,o)},isValid:function(){return v(this)},inspect:function(){return re(this)},detach:function(){}});function N(o){o.START_TO_START=fe,o.START_TO_END=ye,o.END_TO_END=Fe,o.END_TO_START=Ye,o.NODE_BEFORE=nt,o.NODE_AFTER=ut,o.NODE_BEFORE_AND_AFTER=s,o.NODE_INSIDE=h}function D(o){N(o),N(o.prototype)}function J(o,f){return function(){C(this);var y=this.startContainer,k=this.startOffset,W=this.commonAncestorContainer,ie=new he(this,!0),_,F;y!==W&&(_=Ie(y,W,!0),F=ne(_),y=F.node,k=F.offset),ue(ie,c),ie.reset();var z=o(ie);return ie.detach(),f(this,y,k,y,k),z}}function me(o,f){function y(_,F){return function(z){H(z,Ce),H(de(z),qe);var se=(_?ve:ne)(z);(F?k:W)(this,se.node,se.offset)}}function k(_,F,z){var se=_.endContainer,Ge=_.endOffset;(F!==_.startContainer||z!==_.startOffset)&&((de(F)!=de(se)||oe(F,z,se,Ge)==1)&&(se=F,Ge=z),f(_,F,z,se,Ge))}function W(_,F,z){var se=_.startContainer,Ge=_.startOffset;(F!==_.endContainer||z!==_.endOffset)&&((de(F)!=de(se)||oe(F,z,se,Ge)==-1)&&(se=F,Ge=z),f(_,se,Ge,F,z))}var ie=function(){};ie.prototype=g.rangePrototype,o.prototype=new ie,P.extend(o.prototype,{setStart:function(_,F){X(_,!0),be(_,F),k(this,_,F)},setEnd:function(_,F){X(_,!0),be(_,F),W(this,_,F)},setStartAndEnd:function(){var _=arguments,F=_[0],z=_[1],se=F,Ge=z;switch(_.length){case 3:Ge=_[2];break;case 4:se=_[2],Ge=_[3];break}f(this,F,z,se,Ge)},setBoundary:function(_,F,z){this["set"+(z?"Start":"End")](_,F)},setStartBefore:y(!0,!0),setStartAfter:y(!1,!0),setEndBefore:y(!0,!1),setEndAfter:y(!1,!1),collapse:function(_){C(this),_?f(this,this.startContainer,this.startOffset,this.startContainer,this.startOffset):f(this,this.endContainer,this.endOffset,this.endContainer,this.endOffset)},selectNodeContents:function(_){X(_,!0),f(this,_,0,_,Se(_))},selectNode:function(_){X(_,!1),H(_,Ce);var F=ve(_),z=ne(_);f(this,F.node,F.offset,z.node,z.offset)},extractContents:J(M,f),deleteContents:J(_e,f),canSurroundContents:function(){C(this),c(this.startContainer),c(this.endContainer);var _=new he(this,!0),F=_._first&&te(_._first,this)||_._last&&te(_._last,this);return _.detach(),!F},splitBoundaries:function(){A(this)},splitBoundariesPreservingPositions:function(_){A(this,_)},normalizeBoundaries:function(){C(this);var _=this.startContainer,F=this.startOffset,z=this.endContainer,se=this.endOffset,Ge=function(Ke){var lt=Ke.nextSibling;lt&&lt.nodeType==Ke.nodeType&&(z=Ke,se=Ke.length,Ke.appendData(lt.data),x(lt))},fr=function(Ke){var lt=Ke.previousSibling;if(lt&&lt.nodeType==Ke.nodeType){_=Ke;var Vi=Ke.length;if(F=lt.length,Ke.insertData(0,lt.data),x(lt),_==z)se+=F,z=_;else if(z==Ke.parentNode){var hr=pe(Ke);se==hr?(z=Ke,se=Vi):se>hr&&se--}}},Sn=!0,rt;if(q(z))se==z.length?Ge(z):se==0&&(rt=z.previousSibling,rt&&rt.nodeType==z.nodeType&&(se=rt.length,_==z&&(Sn=!1),rt.appendData(z.data),x(z),z=rt));else{if(se>0){var Nn=z.childNodes[se-1];Nn&&q(Nn)&&Ge(Nn)}Sn=!this.collapsed}if(Sn){if(q(_))F==0?fr(_):F==_.length&&(rt=_.nextSibling,rt&&rt.nodeType==_.nodeType&&(z==rt&&(z=_,se+=_.length),_.appendData(rt.data),x(rt)));else if(F<_.childNodes.length){var Rn=_.childNodes[F];Rn&&q(Rn)&&fr(Rn)}}else _=z,F=se;f(this,_,F,z,se)},collapseToPoint:function(_,F){X(_,!0),be(_,F),this.setStartAndEnd(_,F)}}),D(o)}function We(o){o.collapsed=o.startContainer===o.endContainer&&o.startOffset===o.endOffset,o.commonAncestorContainer=o.collapsed?o.startContainer:R.getCommonAncestor(o.startContainer,o.endContainer)}function Ve(o,f,y,k,W){o.startContainer=f,o.startOffset=y,o.endContainer=k,o.endOffset=W,o.document=R.getDocument(f),We(o)}function He(o){this.startContainer=o,this.startOffset=0,this.endContainer=o,this.endOffset=0,this.document=o,We(this)}me(He,Ve),P.extend(He,{rangeProperties:j,RangeIterator:he,copyComparisonConstants:D,createPrototypeRange:me,inspect:re,toHtml:U,getRangeDocument:I,rangesEqual:function(o,f){return o.startContainer===f.startContainer&&o.startOffset===f.startOffset&&o.endContainer===f.endContainer&&o.endOffset===f.endOffset}}),g.DomRange=He}),ee.createCoreModule("WrappedRange",["DomRange"],function(g,O){var R,P,L=g.dom,G=g.util,q=L.DomPosition,pe=g.DomRange,we=L.getBody,Be=L.getContentDocument,oe=L.isCharacterDataNode;if(g.features.implementsDomRange&&function(){var x,te=pe.rangeProperties;function I(M){for(var $=te.length,re;$--;)re=te[$],M[re]=M.nativeRange[re];M.collapsed=M.startContainer===M.endContainer&&M.startOffset===M.endOffset}function ce(M,$,re,he,Ce){var qe=M.startContainer!==$||M.startOffset!=re,Ae=M.endContainer!==he||M.endOffset!=Ce,Te=!M.equals(M.nativeRange);(qe||Ae||Te)&&(M.setEnd(he,Ce),M.setStart($,re))}var ve;R=function(M){if(!M)throw O.createError("WrappedRange: Range must be specified");this.nativeRange=M,I(this)},pe.createPrototypeRange(R,ce),x=R.prototype,x.selectNode=function(M){this.nativeRange.selectNode(M),I(this)},x.cloneContents=function(){return this.nativeRange.cloneContents()},x.surroundContents=function(M){this.nativeRange.surroundContents(M),I(this)},x.collapse=function(M){this.nativeRange.collapse(M),I(this)},x.cloneRange=function(){return new R(this.nativeRange.cloneRange())},x.refresh=function(){I(this)},x.toString=function(){return this.nativeRange.toString()};var ne=document.createTextNode("test");we(document).appendChild(ne);var K=document.createRange();K.setStart(ne,0),K.setEnd(ne,0);try{K.setStart(ne,1),x.setStart=function(M,$){this.nativeRange.setStart(M,$),I(this)},x.setEnd=function(M,$){this.nativeRange.setEnd(M,$),I(this)},ve=function(M){return function($){this.nativeRange[M]($),I(this)}}}catch{x.setStart=function($,re){try{this.nativeRange.setStart($,re)}catch{this.nativeRange.setEnd($,re),this.nativeRange.setStart($,re)}I(this)},x.setEnd=function($,re){try{this.nativeRange.setEnd($,re)}catch{this.nativeRange.setStart($,re),this.nativeRange.setEnd($,re)}I(this)},ve=function($,re){return function(he){try{this.nativeRange[$](he)}catch{this.nativeRange[re](he),this.nativeRange[$](he)}I(this)}}}x.setStartBefore=ve("setStartBefore","setEndBefore"),x.setStartAfter=ve("setStartAfter","setEndAfter"),x.setEndBefore=ve("setEndBefore","setStartBefore"),x.setEndAfter=ve("setEndAfter","setStartAfter"),x.selectNodeContents=function(M){this.setStartAndEnd(M,0,L.getNodeLength(M))},K.selectNodeContents(ne),K.setEnd(ne,3);var ge=document.createRange();ge.selectNodeContents(ne),ge.setEnd(ne,4),ge.setStart(ne,2),K.compareBoundaryPoints(K.START_TO_END,ge)==-1&&K.compareBoundaryPoints(K.END_TO_START,ge)==1?x.compareBoundaryPoints=function(M,$){return $=$.nativeRange||$,M==$.START_TO_END?M=$.END_TO_START:M==$.END_TO_START&&(M=$.START_TO_END),this.nativeRange.compareBoundaryPoints(M,$)}:x.compareBoundaryPoints=function(M,$){return this.nativeRange.compareBoundaryPoints(M,$.nativeRange||$)};var le=document.createElement("div");le.innerHTML="123";var ue=le.firstChild,_e=we(document);_e.appendChild(le),K.setStart(ue,1),K.setEnd(ue,2),K.deleteContents(),ue.data=="13"&&(x.deleteContents=function(){this.nativeRange.deleteContents(),I(this)},x.extractContents=function(){var M=this.nativeRange.extractContents();return I(this),M}),_e.removeChild(le),_e=null,G.isHostMethod(K,"createContextualFragment")&&(x.createContextualFragment=function(M){return this.nativeRange.createContextualFragment(M)}),we(document).removeChild(ne),x.getName=function(){return"WrappedRange"},g.WrappedRange=R,g.createNativeRange=function(M){return M=Be(M,O,"createNativeRange"),M.createRange()}}(),g.features.implementsTextRange){var ae=function(x){var te=x.parentElement(),I=x.duplicate();I.collapse(!0);var ce=I.parentElement();I=x.duplicate(),I.collapse(!1);var ve=I.parentElement(),ne=ce==ve?ce:L.getCommonAncestor(ce,ve);return ne==te?ne:L.getCommonAncestor(te,ne)},Ie=function(x){return x.compareEndPoints("StartToEnd",x)==0},Se=function(x,te,I,ce,ve){var ne=x.duplicate();ne.collapse(I);var K=ne.parentElement();if(L.isOrIsAncestorOf(te,K)||(K=te),!K.canHaveHTML){var ge=new q(K.parentNode,L.getNodeIndex(K));return{boundaryPosition:ge,nodeInfo:{nodeIndex:ge.offset,containerElement:ge.node}}}var le=L.getDocument(K).createElement("span");le.parentNode&&L.removeNode(le);for(var ue,_e=I?"StartToStart":"StartToEnd",M,$,re,he,Ce=ve&&ve.containerElement==K?ve.nodeIndex:0,qe=K.childNodes.length,Ae=qe,Te=Ae;Te==qe?K.appendChild(le):K.insertBefore(le,K.childNodes[Te]),ne.moveToElementText(le),ue=ne.compareEndPoints(_e,x),!(ue==0||Ce==Ae);){if(ue==-1){if(Ae==Ce+1)break;Ce=Te}else Ae=Ae==Ce+1?Ce:Te;Te=Math.floor((Ce+Ae)/2),K.removeChild(le)}if(he=le.nextSibling,ue==-1&&he&&oe(he)){ne.setEndPoint(I?"EndToStart":"EndToEnd",x);var Ue;if(/[\r\n]/.test(he.data)){var ke=ne.duplicate(),tt=ke.text.replace(/\r\n/g,"\r").length;for(Ue=ke.moveStart("character",tt);(ue=ke.compareEndPoints("StartToEnd",ke))==-1;)Ue++,ke.moveStart("character",1)}else Ue=ne.text.length;re=new q(he,Ue)}else M=(ce||!I)&&le.previousSibling,$=(ce||I)&&le.nextSibling,$&&oe($)?re=new q($,0):M&&oe(M)?re=new q(M,M.data.length):re=new q(K,L.getNodeIndex(le));return L.removeNode(le),{boundaryPosition:re,nodeInfo:{nodeIndex:Te,containerElement:K}}},Me=function(x,te){var I,ce,ve=x.offset,ne=L.getDocument(x.node),K,ge,le=we(ne).createTextRange(),ue=oe(x.node);return ue?(I=x.node,ce=I.parentNode):(ge=x.node.childNodes,I=ve<ge.length?ge[ve]:null,ce=x.node),K=ne.createElement("span"),K.innerHTML="&#feff;",I?ce.insertBefore(K,I):ce.appendChild(K),le.moveToElementText(K),le.collapse(!te),ce.removeChild(K),ue&&le[te?"moveStart":"moveEnd"]("character",ve),le};P=function(x){this.textRange=x,this.refresh()},P.prototype=new pe(document),P.prototype.refresh=function(){var x,te,I,ce=ae(this.textRange);Ie(this.textRange)?te=x=Se(this.textRange,ce,!0,!0).boundaryPosition:(I=Se(this.textRange,ce,!0,!1),x=I.boundaryPosition,te=Se(this.textRange,ce,!1,!1,I.nodeInfo).boundaryPosition),this.setStart(x.node,x.offset),this.setEnd(te.node,te.offset)},P.prototype.getName=function(){return"WrappedTextRange"},pe.copyComparisonConstants(P);var de=function(x){if(x.collapsed)return Me(new q(x.startContainer,x.startOffset),!0);var te=Me(new q(x.startContainer,x.startOffset),!0),I=Me(new q(x.endContainer,x.endOffset),!1),ce=we(pe.getRangeDocument(x)).createTextRange();return ce.setEndPoint("StartToStart",te),ce.setEndPoint("EndToEnd",I),ce};if(P.rangeToTextRange=de,P.prototype.toTextRange=function(){return de(this)},g.WrappedTextRange=P,!g.features.implementsDomRange||g.config.preferTextRange){var Le=function(x){return x("return this;")()}(Function);typeof Le.Range=="undefined"&&(Le.Range=P),g.createNativeRange=function(x){return x=Be(x,O,"createNativeRange"),we(x).createTextRange()},g.WrappedRange=P}}g.createRange=function(x){return x=Be(x,O,"createRange"),new g.WrappedRange(g.createNativeRange(x))},g.createRangyRange=function(x){return x=Be(x,O,"createRangyRange"),new pe(x)},G.createAliasForDeprecatedMethod(g,"createIframeRange","createRange"),G.createAliasForDeprecatedMethod(g,"createIframeRangyRange","createRangyRange"),g.addShimListener(function(x){var te=x.document;typeof te.createRange=="undefined"&&(te.createRange=function(){return g.createRange(te)}),te=x=null})}),ee.createCoreModule("WrappedSelection",["DomRange","WrappedRange"],function(g,O){g.config.checkSelectionRanges=!0;var R="boolean",P="number",L=g.dom,G=g.util,q=G.isHostMethod,pe=g.DomRange,we=g.WrappedRange,Be=g.DOMException,oe=L.DomPosition,ae,Ie,Se=g.features,Me="Control",de=L.getDocument,Le=L.getBody,x=pe.rangesEqual;function te(s){return typeof s=="string"?/^backward(s)?$/i.test(s):!!s}function I(s,h){if(s){if(L.isWindow(s))return s;if(s instanceof v)return s.win;var N=L.getContentDocument(s,O,h);return L.getWindow(N)}else return window}function ce(s){return I(s,"getWinSelection").getSelection()}function ve(s){return I(s,"getDocSelection").document.selection}function ne(s){var h=!1;return s.anchorNode&&(h=L.comparePoints(s.anchorNode,s.anchorOffset,s.focusNode,s.focusOffset)==1),h}var K=q(window,"getSelection"),ge=G.isHostObject(document,"selection");Se.implementsWinGetSelection=K,Se.implementsDocSelection=ge;var le=ge&&(!K||g.config.preferTextRange);if(le)ae=ve,g.isSelectionValid=function(s){var h=I(s,"isSelectionValid").document,N=h.selection;return N.type!="None"||de(N.createRange().parentElement())==h};else if(K)ae=ce,g.isSelectionValid=function(){return!0};else return O.fail("Neither document.selection or window.getSelection() detected."),!1;g.getNativeSelection=ae;var ue=ae();if(!ue)return O.fail("Native selection was null (possibly issue 138?)"),!1;var _e=g.createNativeRange(document),M=Le(document),$=G.areHostProperties(ue,["anchorNode","focusNode","anchorOffset","focusOffset"]);Se.selectionHasAnchorAndFocus=$;var re=q(ue,"extend");Se.selectionHasExtend=re;var he=typeof ue.rangeCount==P;Se.selectionHasRangeCount=he;var Ce=!1,qe=!0,Ae=re?function(s,h){var N=pe.getRangeDocument(h),D=g.createRange(N);D.collapseToPoint(h.endContainer,h.endOffset),s.addRange(E(D)),s.extend(h.startContainer,h.startOffset)}:null;G.areHostMethods(ue,["addRange","getRangeAt","removeAllRanges"])&&typeof ue.rangeCount==P&&Se.implementsDomRange&&function(){var s=window.getSelection();if(s){for(var h=s.rangeCount,N=h>1,D=[],J=ne(s),me=0;me<h;++me)D[me]=s.getRangeAt(me);var We=L.createTestElement(document,"",!1),Ve=We.appendChild(document.createTextNode("\xA0\xA0\xA0")),He=document.createRange();if(He.setStart(Ve,1),He.collapse(!0),s.removeAllRanges(),s.addRange(He),qe=s.rangeCount==1,s.removeAllRanges(),!N){var o=window.navigator.appVersion.match(/Chrome\/(.*?) /);if(o&&parseInt(o[1])>=36)Ce=!1;else{var f=He.cloneRange();He.setStart(Ve,0),f.setEnd(Ve,3),f.setStart(Ve,2),s.addRange(He),s.addRange(f),Ce=s.rangeCount==2}}for(L.removeNode(We),s.removeAllRanges(),me=0;me<h;++me)me==0&&J?Ae?Ae(s,D[me]):(g.warn("Rangy initialization: original selection was backwards but selection has been restored forwards because the browser does not support Selection.extend"),s.addRange(D[me])):s.addRange(D[me])}}(),Se.selectionSupportsMultipleRanges=Ce,Se.collapsedNonEditableSelectionsSupported=qe;var Te=!1,Ue;M&&q(M,"createControlRange")&&(Ue=M.createControlRange(),G.areHostProperties(Ue,["item","add"])&&(Te=!0)),Se.implementsControlRange=Te,$?Ie=function(s){return s.anchorNode===s.focusNode&&s.anchorOffset===s.focusOffset}:Ie=function(s){return s.rangeCount?s.getRangeAt(s.rangeCount-1).collapsed:!1};function ke(s,h,N){var D=N?"end":"start",J=N?"start":"end";s.anchorNode=h[D+"Container"],s.anchorOffset=h[D+"Offset"],s.focusNode=h[J+"Container"],s.focusOffset=h[J+"Offset"]}function tt(s){var h=s.nativeSelection;s.anchorNode=h.anchorNode,s.anchorOffset=h.anchorOffset,s.focusNode=h.focusNode,s.focusOffset=h.focusOffset}function m(s){s.anchorNode=s.focusNode=null,s.anchorOffset=s.focusOffset=0,s.rangeCount=0,s.isCollapsed=!0,s._ranges.length=0}function E(s){var h;return s instanceof pe?(h=g.createNativeRange(s.getDocument()),h.setEnd(s.endContainer,s.endOffset),h.setStart(s.startContainer,s.startOffset)):s instanceof we?h=s.nativeRange:Se.implementsDomRange&&s instanceof L.getWindow(s.startContainer).Range&&(h=s),h}function X(s){if(!s.length||s[0].nodeType!=1)return!1;for(var h=1,N=s.length;h<N;++h)if(!L.isAncestorOf(s[0],s[h]))return!1;return!0}function H(s){var h=s.getNodes();if(!X(h))throw O.createError("getSingleElementFromRange: range "+s.inspect()+" did not consist of a single element");return h[0]}function be(s){return!!s&&typeof s.text!="undefined"}function a(s,h){var N=new we(h);s._ranges=[N],ke(s,N,!1),s.rangeCount=1,s.isCollapsed=N.collapsed}function c(s){if(s._ranges.length=0,s.docSelection.type=="None")m(s);else{var h=s.docSelection.createRange();if(be(h))a(s,h);else{s.rangeCount=h.length;for(var N,D=de(h.item(0)),J=0;J<s.rangeCount;++J)N=g.createRange(D),N.selectNode(h.item(J)),s._ranges.push(N);s.isCollapsed=s.rangeCount==1&&s._ranges[0].collapsed,ke(s,s._ranges[s.rangeCount-1],!1)}}}function u(s,h){for(var N=s.docSelection.createRange(),D=H(h),J=de(N.item(0)),me=Le(J).createControlRange(),We=0,Ve=N.length;We<Ve;++We)me.add(N.item(We));try{me.add(D)}catch{throw O.createError("addRange(): Element within the specified Range could not be added to control selection (does it have layout?)")}me.select(),c(s)}var d;q(ue,"getRangeAt")?d=function(s,h){try{return s.getRangeAt(h)}catch{return null}}:$&&(d=function(s){var h=de(s.anchorNode),N=g.createRange(h);return N.setStartAndEnd(s.anchorNode,s.anchorOffset,s.focusNode,s.focusOffset),N.collapsed!==this.isCollapsed&&N.setStartAndEnd(s.focusNode,s.focusOffset,s.anchorNode,s.anchorOffset),N});function v(s,h,N){this.nativeSelection=s,this.docSelection=h,this._ranges=[],this.win=N,this.refresh()}v.prototype=g.selectionPrototype;function C(s){s.win=s.anchorNode=s.focusNode=s._ranges=null,s.rangeCount=s.anchorOffset=s.focusOffset=0,s.detached=!0}var B=[];function T(s,h){for(var N=B.length,D,J;N--;)if(D=B[N],J=D.selection,h=="deleteAll")C(J);else if(D.win==s)return h=="delete"?(B.splice(N,1),!0):J;return h=="deleteAll"&&(B.length=0),null}var V=function(s){if(s&&s instanceof v)return s.refresh(),s;s=I(s,"getNativeSelection");var h=T(s),N=ae(s),D=ge?ve(s):null;return h?(h.nativeSelection=N,h.docSelection=D,h.refresh()):(h=new v(N,D,s),B.push({win:s,selection:h})),h};g.getSelection=V,G.createAliasForDeprecatedMethod(g,"getIframeSelection","getSelection");var A=v.prototype;function U(s,h){for(var N=de(h[0].startContainer),D=Le(N).createControlRange(),J=0,me,We=h.length;J<We;++J){me=H(h[J]);try{D.add(me)}catch{throw O.createError("setRanges(): Element within one of the specified Ranges could not be added to control selection (does it have layout?)")}}D.select(),c(s)}if(!le&&$&&G.areHostMethods(ue,["removeAllRanges","addRange"])){A.removeAllRanges=function(){this.nativeSelection.removeAllRanges(),m(this)};var j=function(s,h){Ae(s.nativeSelection,h),s.refresh()};he?A.addRange=function(s,h){if(Te&&ge&&this.docSelection.type==Me)u(this,s);else if(te(h)&&re)j(this,s);else{var N;Ce?N=this.rangeCount:(this.removeAllRanges(),N=0);var D=E(s).cloneRange();try{this.nativeSelection.addRange(D)}catch{}if(this.rangeCount=this.nativeSelection.rangeCount,this.rangeCount==N+1){if(g.config.checkSelectionRanges){var J=d(this.nativeSelection,this.rangeCount-1);J&&!x(J,s)&&(s=new we(J))}this._ranges[this.rangeCount-1]=s,ke(this,s,Fe(this.nativeSelection)),this.isCollapsed=Ie(this)}else this.refresh()}}:A.addRange=function(s,h){te(h)&&re?j(this,s):(this.nativeSelection.addRange(E(s)),this.refresh())},A.setRanges=function(s){if(Te&&ge&&s.length>1)U(this,s);else{this.removeAllRanges();for(var h=0,N=s.length;h<N;++h)this.addRange(s[h])}}}else if(q(ue,"empty")&&q(_e,"select")&&Te&&le)A.removeAllRanges=function(){try{if(this.docSelection.empty(),this.docSelection.type!="None"){var s;if(this.anchorNode)s=de(this.anchorNode);else if(this.docSelection.type==Me){var h=this.docSelection.createRange();h.length&&(s=de(h.item(0)))}if(s){var N=Le(s).createTextRange();N.select(),this.docSelection.empty()}}}catch{}m(this)},A.addRange=function(s){this.docSelection.type==Me?u(this,s):(g.WrappedTextRange.rangeToTextRange(s).select(),this._ranges[0]=s,this.rangeCount=1,this.isCollapsed=this._ranges[0].collapsed,ke(this,s,!1))},A.setRanges=function(s){this.removeAllRanges();var h=s.length;h>1?U(this,s):h&&this.addRange(s[0])};else return O.fail("No means of selecting a Range or TextRange was found"),!1;A.getRangeAt=function(s){if(s<0||s>=this.rangeCount)throw new Be("INDEX_SIZE_ERR");return this._ranges[s].cloneRange()};var fe;if(le)fe=function(s){var h;g.isSelectionValid(s.win)?h=s.docSelection.createRange():(h=Le(s.win.document).createTextRange(),h.collapse(!0)),s.docSelection.type==Me?c(s):be(h)?a(s,h):m(s)};else if(q(ue,"getRangeAt")&&typeof ue.rangeCount==P)fe=function(s){if(Te&&ge&&s.docSelection.type==Me)c(s);else if(s._ranges.length=s.rangeCount=s.nativeSelection.rangeCount,s.rangeCount){for(var h=0,N=s.rangeCount;h<N;++h)s._ranges[h]=new g.WrappedRange(s.nativeSelection.getRangeAt(h));ke(s,s._ranges[s.rangeCount-1],Fe(s.nativeSelection)),s.isCollapsed=Ie(s)}else m(s)};else if($&&typeof ue.isCollapsed==R&&typeof _e.collapsed==R&&Se.implementsDomRange)fe=function(s){var h,N=s.nativeSelection;N.anchorNode?(h=d(N,0),s._ranges=[h],s.rangeCount=1,tt(s),s.isCollapsed=Ie(s)):m(s)};else return O.fail("No means of obtaining a Range or TextRange from the user's selection was found"),!1;A.refresh=function(s){var h=s?this._ranges.slice(0):null,N=this.anchorNode,D=this.anchorOffset;if(fe(this),s){var J=h.length;if(J!=this._ranges.length||this.anchorNode!=N||this.anchorOffset!=D)return!0;for(;J--;)if(!x(h[J],this._ranges[J]))return!0;return!1}};var ye=function(s,h){var N=s.getAllRanges();s.removeAllRanges();for(var D=0,J=N.length;D<J;++D)x(h,N[D])||s.addRange(N[D]);s.rangeCount||m(s)};Te&&ge?A.removeRange=function(s){if(this.docSelection.type==Me){for(var h=this.docSelection.createRange(),N=H(s),D=de(h.item(0)),J=Le(D).createControlRange(),me,We=!1,Ve=0,He=h.length;Ve<He;++Ve)me=h.item(Ve),me!==N||We?J.add(h.item(Ve)):We=!0;J.select(),c(this)}else ye(this,s)}:A.removeRange=function(s){ye(this,s)};var Fe;!le&&$&&Se.implementsDomRange?(Fe=ne,A.isBackward=function(){return Fe(this)}):Fe=A.isBackward=function(){return!1},A.isBackwards=A.isBackward,A.toString=function(){for(var s=[],h=0,N=this.rangeCount;h<N;++h)s[h]=""+this._ranges[h];return s.join("")};function Ye(s,h){if(s.win.document!=de(h))throw new Be("WRONG_DOCUMENT_ERR")}A.collapse=function(s,h){Ye(this,s);var N=g.createRange(s);N.collapseToPoint(s,h),this.setSingleRange(N),this.isCollapsed=!0},A.collapseToStart=function(){if(this.rangeCount){var s=this._ranges[0];this.collapse(s.startContainer,s.startOffset)}else throw new Be("INVALID_STATE_ERR")},A.collapseToEnd=function(){if(this.rangeCount){var s=this._ranges[this.rangeCount-1];this.collapse(s.endContainer,s.endOffset)}else throw new Be("INVALID_STATE_ERR")},A.selectAllChildren=function(s){Ye(this,s);var h=g.createRange(s);h.selectNodeContents(s),this.setSingleRange(h)},A.deleteFromDocument=function(){if(Te&&ge&&this.docSelection.type==Me){for(var s=this.docSelection.createRange(),h;s.length;)h=s.item(0),s.remove(h),L.removeNode(h);this.refresh()}else if(this.rangeCount){var N=this.getAllRanges();if(N.length){this.removeAllRanges();for(var D=0,J=N.length;D<J;++D)N[D].deleteContents();this.addRange(N[J-1])}}},A.eachRange=function(s,h){for(var N=0,D=this._ranges.length;N<D;++N)if(s(this.getRangeAt(N)))return h},A.getAllRanges=function(){var s=[];return this.eachRange(function(h){s.push(h)}),s},A.setSingleRange=function(s,h){this.removeAllRanges(),this.addRange(s,h)},A.callMethodOnEachRange=function(s,h){var N=[];return this.eachRange(function(D){N.push(D[s].apply(D,h||[]))}),N};function nt(s){return function(h,N){var D;this.rangeCount?(D=this.getRangeAt(0),D["set"+(s?"Start":"End")](h,N)):(D=g.createRange(this.win.document),D.setStartAndEnd(h,N)),this.setSingleRange(D,this.isBackward())}}A.setStart=nt(!0),A.setEnd=nt(!1),g.rangePrototype.select=function(s){V(this.getDocument()).setSingleRange(this,s)},A.changeEachRange=function(s){var h=[],N=this.isBackward();this.eachRange(function(D){s(D),h.push(D)}),this.removeAllRanges(),N&&h.length==1?this.addRange(h[0],"backward"):this.setRanges(h)},A.containsNode=function(s,h){return this.eachRange(function(N){return N.containsNode(s,h)},!0)||!1},A.getBookmark=function(s){return{backward:this.isBackward(),rangeBookmarks:this.callMethodOnEachRange("getBookmark",[s])}},A.moveToBookmark=function(s){for(var h=[],N=0,D,J;D=s.rangeBookmarks[N++];)J=g.createRange(this.win),J.moveToBookmark(D),h.push(J);s.backward?this.setSingleRange(h[0],"backward"):this.setRanges(h)},A.saveRanges=function(){return{backward:this.isBackward(),ranges:this.callMethodOnEachRange("cloneRange")}},A.restoreRanges=function(s){this.removeAllRanges();for(var h=0,N;N=s.ranges[h];++h)this.addRange(N,s.backward&&h==0)},A.toHtml=function(){var s=[];return this.eachRange(function(h){s.push(pe.toHtml(h))}),s.join("")},Se.implementsTextRange&&(A.getNativeTextRange=function(){var s;if(s=this.docSelection){var h=s.createRange();if(be(h))return h;throw O.createError("getNativeTextRange: selection is a control selection")}else{if(this.rangeCount>0)return g.WrappedTextRange.rangeToTextRange(this.getRangeAt(0));throw O.createError("getNativeTextRange: selection contains no range")}});function ut(s){var h=[],N=new oe(s.anchorNode,s.anchorOffset),D=new oe(s.focusNode,s.focusOffset),J=typeof s.getName=="function"?s.getName():"Selection";if(typeof s.rangeCount!="undefined")for(var me=0,We=s.rangeCount;me<We;++me)h[me]=pe.inspect(s.getRangeAt(me));return"["+J+"(Ranges: "+h.join(", ")+")(anchor: "+N.inspect()+", focus: "+D.inspect()+"]"}A.getName=function(){return"WrappedSelection"},A.inspect=function(){return ut(this)},A.detach=function(){T(this.win,"delete"),C(this)},v.detachAll=function(){T(null,"deleteAll")},v.inspect=ut,v.isDirectionBackward=te,g.Selection=v,g.selectionPrototype=A,g.addShimListener(function(s){typeof s.getSelection=="undefined"&&(s.getSelection=function(){return V(s)}),s=null})});var tn=!1,Ht=function(g){tn||(tn=!0,!ee.initialized&&ee.config.autoInitialize&&Ft())};return it&&(document.readyState=="complete"?Ht():(Q(document,"addEventListener")&&document.addEventListener("DOMContentLoaded",Ht,!1),pt(window,"load",Ht))),ee})})(Vn);var Xe=Vn.exports,Z={log:!1,logErrors:!0,editableClass:"js-editable",editableDisabledClass:"js-editable-disabled",pastingAttribute:"data-editable-is-pasting",trimLeadingAndTrailingWhitespaces:!0,boldMarkup:{type:"tag",name:"strong",attribs:{},trim:!0},italicMarkup:{type:"tag",name:"em",attribs:{},trim:!0},underlineMarkup:{type:"tag",name:"u",attribs:{},trim:!1},linkMarkup:{type:"tag",name:"a",attribs:{},trim:!0},pastedHtmlRules:{allowedElements:{a:{href:!0,rel:!0,target:!0},strong:{},em:{},br:{}},requiredAttributes:{a:["href"]},transformElements:{b:"strong",i:"em"},splitIntoBlocks:["h1","h2","h3","h4","h5","h6","p","blockquote"],blockLevelElements:["h1","h2","h3","h4","h5","h6","div","p","pre","hr","blockquote","article","figure","header","footer","ul","ol","li","section","table","video"],blacklistedElements:["style","script"],keepInternalRelativeLinks:!1,replaceQuotes:{}}};function Ot(){if(Z.logErrors===!1)return;const n=arguments.length===1?arguments[0]:Array.from(arguments);if(!!global.console){if(typeof console.error=="function")return console.error(n);console.log(n)}}const zi=Object.prototype.toString,qi={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function Hr(n){return n.replace(/\s+$/,"")}function An(n){return n.replace(/^\s+|\s+$/g,"")}function dr(n){return zi.call(n)==="[object String]"}function Ui(n,e){e||(e="g");const t=n.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&");return new RegExp(t,e)}function Gi(n,e){return n.replace(e?/[&<>'"]/g:/[&<>]/g,function(t){return qi[t]})}function Ki(n,e,t){if(!n)return"";if(n=`${n}`,!e||t==null)return n;const r=n.lastIndexOf(e);return`${n.slice(0,r)}${t}${n.slice(r+e.length)}`}function Qi(n){return/\S+\s{1}$/.test(n)}const ot=1,xe=3,jn=11,Nt=(n,e)=>typeof n=="string"?Array.from(e.querySelectorAll(n)):n.tagName?[n]:Array.isArray(n)?n:Array.from(n),gr=(n,e)=>typeof n=="string"?e.querySelector(n):n.tagName?n:n[0]?n[0]:n,$r=(n,e=window)=>{const t=e.document.createElement("div");return t.innerHTML=n,t.firstElementChild},ln=(n,e)=>{if(n.closest||(n=n.parentNode),n&&n.closest)return n.closest(e)};function zn(n){return n=n.jquery?n[0]:n,ln(n,`.${Z.editableClass}`)}function fn(n){let e=0;for(;(n=n.previousSibling)!==null;)e++;return e}function Vr(n){for(const e of n.childNodes)if(e.nodeType===xe&&!jr(e)||e.nodeType===ot)return!1;return!0}function jr(n){return n.nodeType===xe&&!n.nodeValue}function zr(n){return n.nodeType===xe&&qn(n)===0}function qr(n){return n.nodeType===ot&&n.tagName==="BR"}function qn(n){if(n.nodeType===xe)return Hr(n.nodeValue).length;let e=0;return Array.from(n.childNodes).reverse().every((t,r,i)=>zr(t)||qr(t)?!0:(e=i.length-r,!1)),e}function hn(n,e,t){if(e===n)return On(e,t);if(On(e,t)){const r=fn(e);return hn(n,e.parentNode,r)}return!1}function Un(n,e,t){if(e===n)return Bn(e,t);if(Bn(e,t)){const r=fn(e)+1;return Un(n,e.parentNode,r)}return!1}function On(n,e){return n.nodeType===xe?e===0:n.childNodes.length===0||n.childNodes.length===1&&n.firstChild.nodeType===ot&&n.firstChild.getAttribute("data-editable")==="remove"?!0:n.childNodes[e]===n.firstChild}function Bn(n,e){return n.nodeType===xe?e===n.length:n.childNodes.length===0?!0:e>0?n.childNodes[e-1]===n.lastChild:!1}function dn(n,e,t){if(e===n)return _n(e,t);if(_n(e,t)){const r=fn(e)+1;return dn(n,e.parentNode,r)}return!1}function _n(n,e){if(n.nodeType===xe){const t=Hr(n.nodeValue);return e>=t.length}return n.childNodes.length===0?!0:e>=qn(n)}function Ur(n,e){let t,r,i;if(n.nodeType!==e.nodeType||n.nodeName!==e.nodeName)return!1;for(t=0,r=n.attributes.length;t<r;t++)if(i=n.attributes[t],e.getAttribute(i.name)!==i.value)return!1;return!0}function gn(n){return n.lastChild?gn(n.lastChild):n}function Yi(n){return console.warn("Editable.js: Using obsolete function parser.latestCild(), use lastChild() instead"),gn(n)}function kn(n){return n&&n.nodeType===jn&&n.childNodes.length===0}function Xi(n,e){switch((e.currentStyle||n.getComputedStyle(e,"")).display){case"inline":case"inline-block":return!0;default:return!1}}var Zi=Object.freeze(Object.defineProperty({__proto__:null,getHost:zn,getNodeIndex:fn,isVoid:Vr,isVoidTextNode:jr,isWhitespaceOnly:zr,isLinebreak:qr,lastOffsetWithContent:qn,isBeginningOfHost:hn,isEndOfHost:Un,isStartOffset:On,isEndOffset:Bn,isTextEndOfHost:dn,isTextEndOffset:_n,isSameNode:Ur,lastChild:gn,latestChild:Yi,isDocumentFragmentWithoutChildren:kn,isInlineElement:Xi},Symbol.toStringTag,{value:"Module"}));let Ji=0;const es="\uFEFF";function Gr(n,e){for(let t=0;t<n.children.length;t++)if(n.children[t]===e)return!0;return!1}function ts(n){const e=n.commonAncestorContainer;if(e.nodeType===3)return!1;const t=n.startContainer.parentElement;return Gr(e,t)}function ns(n){const e=n.commonAncestorContainer;if(e.nodeType===3)return!1;const t=n.endContainer.parentElement;return Gr(e,t)}function En(n,e){const t=n.commonAncestorContainer,r=ts(n)&&e,i=ns(n)&&!e;(t.ownerDocument===null||t.ownerDocument===void 0)&&Ot("Cannot save range: range is emtpy");const l=t.ownerDocument.defaultView.document,p=l.createElement("span");if(p.id=`editable-range-boundary-${++Ji}`,p.setAttribute("data-editable","remove"),p.style.lineHeight="0",p.style.display="none",p.appendChild(l.createTextNode(es)),r)n.endContainer.parentElement.insertBefore(p,n.startContainer.parentElement);else if(i)n.startContainer.parentElement.insertBefore(p,n.endContainer.parentElement.nextSibling);else{const w=n.cloneRange();w.collapse(e),w.insertNode(p)}return p}function pr(n,e,t,r){const i=Yr(n,t);if(!i)return console.log("Marker element has been removed. Cannot restore selection.");e[r?"setStartBefore":"setEndBefore"](i),i.remove()}function Kr(n){let e,t,r;return n.collapsed?(r=En(n,!1),e={markerId:r.id,collapsed:!0}):(r=En(n,!1),t=En(n,!0),e={startMarkerId:t.id,endMarkerId:r.id,collapsed:!1}),n.collapsed?n.collapseBefore(r):(n.setEndBefore(r),n.setStartAfter(t)),e}function Qr(n,e){if(e.restored)return;const t=Xe.createRange();if(e.collapsed){const r=Yr(n,e.markerId);if(r){r.style.display="inline";const i=r.previousSibling;i&&i.nodeType===xe?(r.remove(),t.collapseToPoint(i,i.length)):(t.collapseBefore(r),r.remove())}else console.log("Marker element has been removed. Cannot restore selection.")}else pr(n,t,e.startMarkerId,!0),pr(n,t,e.endMarkerId,!1);return t.normalizeBoundaries(),t}function Yr(n,e){return n.querySelector(`#${e}`)}function Gt(n,e,t){return e=Kr(e),t(),Qr(n,e)}const rs=/\u200B/g,is=/\uFEFF/g,ss=/[^\S ]/g;function qt(n){Gn(n)}function Gn(n){const e=document.createDocumentFragment();Kt(n,"firstChild"),Kt(n,"lastChild");for(const t of n.childNodes)if(!(t.nodeName!=="BR"&&!t.textContent)){if(t.nodeType===ot&&t.nodeName!=="BR"){let r=t;for(;(r=r.nextSibling)!==null&&Ur(r,t);){for(const i of r.childNodes)t.appendChild(i.cloneNode(!0));r.remove()}Gn(t)}e.appendChild(t.cloneNode(!0))}for(;n.firstChild;)n.removeChild(n.firstChild);n.appendChild(e)}function Xr(n){return n.replace(ss," ")}function Zr(n){n.innerHTML=Kn(n,!0)}function Kn(n,e){const t=(n.nodeType===jn?sn(n):n.innerHTML).replace(is,"").replace(rs,"<br>"),r=document.createElement("div");return r.innerHTML=t,Qn(r,e),Kt(r,"firstChild"),Kt(r,"lastChild"),r.innerHTML}function sn(n){const e=document.createElement("div");return e.appendChild(n),e.innerHTML}function _t(n){const e=document.createElement("div");e.innerHTML=n;const t=document.createDocumentFragment();for(;e.firstChild;)t.appendChild(e.firstChild);return t}function on(n,e){return n.ownerDocument!==e?e.adoptNode(n):n}function Mn(n){const t=n.cloneContents().childNodes[0],r=document.createDocumentFragment();for(;t.childNodes.length;)r.appendChild(t.childNodes[0]);return r}function Kt(n,e,t=!0){let r;for(;r=n[e];)if(r.nodeType===xe)if(/^\s+$/.test(r.textContent))n.removeChild(r);else break;else if(r.nodeName==="BR")r.remove();else{r[e]&&Kt(r,e,!1);break}!t||(r=n[e],(r==null?void 0:r.nodeType)===xe&&Z.trimLeadingAndTrailingWhitespaces&&(r.textContent=r.textContent.replace(e.startsWith("last")?/ +$/:/^ +/,"")))}function Qn(n,e){for(;n;){const t=n.nextSibling;if(n.nodeType!==ot){n=t;continue}const r=n.getAttribute("data-editable");n.firstChild&&Qn(n.firstChild,e),(r==="remove"||r==="ui-remove"&&!e)&&n.remove(),(r==="unwrap"||r==="ui-unwrap"&&!e)&&Ct(n),n=t}}function bt(n,e,t){const r=Zn(e,t),i=Yn(n,e,t);return r.concat(i)}function Yn(n,e,t){const r=[];let i=e.commonAncestorContainer;for(;i!==n;)(!t||t(i))&&r.push(i),i=i.parentNode;return r}function Jr(n,e,t){return bt(n,e,r=>r.nodeName.toUpperCase()===t.toUpperCase())}function ei(n,e,t){return bt(n,e,r=>r.nodeName.toUpperCase()===t.nodeName.toUpperCase()&&Xn(r.attributes,t.attributes))}function Xn(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++){const r=e[n[t].name];if(!(r&&r.value===n[t].value))return!1}return!0}function Zn(n,e){return n.getNodes([ot],e)}function ti(n=[]){return n.map(e=>e.nodeName)}function os(n,e,t){return bt(n,e).some(r=>r.nodeName===t.toUpperCase())}function as(n){const e=Xe.createRange();return e.selectNodeContents(n),e}function Jn(n,e,t){const r=Xe.createRange();if(r.selectNodeContents(e),!n.intersectsRange(r))return!1;let i=n.toString(),l=(e.jquery?e[0]:e).textContent;return t&&(i=An(i),l=An(l)),i!==""&&i===l}function ni(n,e,t){return e.selectNodeContents(t),e}function ri(n,e,t){const r=ei(n,e,t);return r.length===1&&Jn(e,r[0],"visible")?si(n,e,t):er(n,e,t)}function pn(n){return n.canSurroundContents()}function er(n,e,t){let r=Gt(n,e,()=>{nr(n,e,t)});return pn(r)||(r=Gt(n,r,()=>{tr(n,r)})),ii(r,t),r}function ii(n,e){if(!pn(n)){console.log("content.wrap(): can not surround range");return}typeof e=="string"&&(e=$r(e)),n.surroundContents(e)}function Ct(n){n=n.jquery?n[0]:n;const e=n.parentNode;for(;n.firstChild;)e.insertBefore(n.firstChild,n);e.removeChild(n)}function si(n,e,t){return Gt(n,e,()=>{nr(n,e,t)})}function oi(n,e,t){return Gt(n,e,()=>{tr(n,e,t)})}function tr(n,e,t){bt(n,e).forEach(r=>{r.nodeName.toUpperCase()!=="BR"&&(!t||r.matches(t))&&Ct(r)})}function nr(n,e,t){bt(n,e).forEach(r=>{r.nodeName.toUpperCase()!=="BR"&&(!t||r.nodeName.toUpperCase()===t.nodeName.toUpperCase()&&Xn(r.attributes,t.attributes))&&Ct(r)})}function Pn(n,e,t){const r=document.createTextNode(e),i=n.cloneRange();i.collapse(t),i.insertNode(r),n[t?"setStartBefore":"setEndAfter"](r),n.normalizeBoundaries()}function ai(n,e,t,r){return Pn(e,r||t,!1),Pn(e,t,!0),e}function jt(n,e,t){if(!rr(e,t))return e;e.splitBoundaries();const r=Gt(n,e,()=>{const i=Ui(t);e.getNodes([xe],l=>l.nodeValue.search(i)>=0).forEach(l=>{l.nodeValue=l.nodeValue.replace(i,"")})});return r.normalizeBoundaries(),r}function rr(n,e){return n.toString().indexOf(e)>=0}function cs(n,e,t){bt(n,e).forEach(r=>{r.nodeName.toUpperCase()===t.toUpperCase()&&Ct(r)})}var us=Object.freeze(Object.defineProperty({__proto__:null,tidyHtml:qt,normalizeTags:Gn,normalizeWhitespace:Xr,cleanInternals:Zr,extractContent:Kn,getInnerHtmlOfFragment:sn,createFragmentFromString:_t,adoptElement:on,cloneRangeContents:Mn,unwrapInternalNodes:Qn,getTags:bt,getAncestorTags:Yn,getTagsByName:Jr,getTagsByNameAndAttributes:ei,areSameAttributes:Xn,getInnerTags:Zn,getTagNames:ti,isAffectedBy:os,selectNodeContents:as,isExactSelection:Jn,expandTo:ni,toggleTag:ri,isWrappable:pn,forceWrap:er,wrap:ii,unwrap:Ct,removeFormattingElem:si,removeFormatting:oi,nuke:tr,nukeElem:nr,insertCharacter:Pn,surround:ai,deleteCharacter:jt,containsString:rr,nukeTag:cs},Symbol.toStringTag,{value:"Module"}));let mr=1;const ls={},vr=ci("nextElementSibling"),Cr=ci("previousElementSibling");function fs(n,{normalize:e,shouldSpellcheck:t}){ds(n),n.setAttribute("contenteditable",!0),n.setAttribute("spellcheck",Boolean(t)),n.classList.remove(Z.editableDisabledClass),n.classList.add(Z.editableClass),e&&qt(n)}function hs(n){n.removeAttribute("contenteditable"),n.removeAttribute("spellcheck"),gs(n,void 0),n.classList.remove(Z.editableClass),n.classList.add(Z.editableDisabledClass)}function ds(n){n.hasAttribute("data-editable")||(n.setAttribute("data-editable",`id-${mr}`),mr+=1)}function gs(n,e){if(n.hasAttribute("data-editable")){const t=n.getAttribute("data-editable");ls[t]=e}}function ci(n){return function(e){const t=e[n];return t&&t.getAttribute("contenteditable")?t:null}}const ps=[["\xAB","\xBB"],["\xBB","\xAB"],['"','"'],["\u201C","\u201D"],["\u201D","\u201D"],["\u201C","\u201C"],["\u201E","\u201C"]],ms=[["\u2018","\u2019"],["\u2039","\u203A"],["\u201A","\u2018"],["\u2019","\u2019"],["\u203A","\u2039"],["'","'"],["\u2018","\u2019"]],vs=["\u2019","'"],ui=/(['"])(?![^<]*?>)/g,Cs=/\s|[>\-"]/,bs=/\s|[<\-"'.;?:,]/;let ft;function ys(n,e){ft=e||{},ft.quotes=ft.quotes||[void 0,void 0],ft.singleQuotes=ft.singleQuotes||[void 0,void 0];const t=Ns(n);return t.length>0?(li(t,0),Rs(n,t)):n}function li(n,e){for(;e<n.length;){const t=ws(n,e);if(t){if(n[e].replace=t.type==="double"?ft.quotes[0]:ft.singleQuotes[0],n[t.position].replace=t.type==="double"?ft.quotes[1]:ft.singleQuotes[1],t.position!==e+1){const r=n.slice(e+1,t.position);r&&li(r,0)}e=t.position+1}else n[e].replace=Ss(n[e].char),e+=1}}function ws(n,e){if(e===n.length-1)return;const t=n[e],r=t.char;if(t.before&&!Cs.test(t.before))return;const i=br(r,ms),l=br(r,ps);for(let p=e+1;p<n.length;p++)if(n[p].after&&bs.test(n[p].after)||!n[p].after){if(i.includes(n[p].char))return{position:p,type:"single"};if(l.includes(n[p].char))return{position:p,type:"double"}}}function br(n,e){return e.filter(t=>t[0]===n).map(t=>t[1])}function Ss(n){if(vs.includes(n))return ft.apostrophe}function Ns(n){return[...n.matchAll(ui)].map(e=>{const t=e.index;return{char:e[1],before:t>0?n[t-1]:"",after:t+1<n.length?n[t+1]:""}})}function Rs(n,e){let t=0;return n.replace(ui,r=>{const i=e[t].replace||e[t].char;return t+=1,i})}let ir,fi,hi,Dn,zt,In,di;const gi=/^\s*$/,Ln="<!-- BLOCK -->";let pi;mi(Z);function mi(n){const e=n.pastedHtmlRules;ir=e.allowedElements||{},fi=e.requiredAttributes||{},hi=e.transformElements||{},di=e.blacklistedElements||[],pi=e.keepInternalRelativeLinks||!1,zt=e.replaceQuotes||{},Dn={},e.blockLevelElements.forEach(t=>{Dn[t]=!0}),In={},e.splitIntoBlocks.forEach(t=>{In[t]=!0})}function Es(n,e,t){const r=n.ownerDocument;n.setAttribute(Z.pastingAttribute,!0),e.isSelection&&(e=e.deleteContent());const i=r.createElement("div");i.innerHTML=t;const l=Ts(i);return n.removeAttribute(Z.pastingAttribute),{blocks:l,cursor:e}}function Ts(n){return vi(n).split(Ln).map(e=>An(ks(Ms(e)))).filter(e=>!gi.test(e))}function vi(n){return Array.from(n.childNodes).reduce((e,t)=>{if(di.indexOf(t.nodeName.toLowerCase())!==-1)return"";if(pi&&t.nodeName==="A"&&t.href){const r=t.getAttribute("href").replace(window.location.origin,"");t.setAttribute("href",r)}if(t.nodeType===ot){const r=vi(t);return e+xs(t,r)}return t.nodeType===xe?e+Gi(t.nodeValue):e},"")}function xs(n,e){let t=n.nodeName.toLowerCase();if(t=Os(t),_s(t,n)){const r=As(t,n);return t==="br"?`<${t+r}>`:gi.test(e)?e:`<${t+r}>${e}</${t}>`}return In[t]?Ln+e+Ln:Dn[t]?`${e} `:e}function As(n,e){return Array.from(e.attributes).reduce((t,{name:r,value:i})=>ir[n][r]&&i?`${t} ${r}="${i}"`:t,"")}function Os(n){return hi[n]||n}function Bs(n,e){const t=fi[n];return t?!t.some(r=>!e.getAttribute(r)):!0}function _s(n,e){return ir[n]&&Bs(n,e)}function ks(n){return n.replace(/\n/g," ").replace(/ {2,}/g," ").replace(/(.)\u00A0/g,(e,t)=>t+(/[\u0020]/.test(t)?"\xA0":" "))}function Ms(n){return zt.quotes||zt.singleQuotes||zt.apostrophe?ys(n,zt):n}const Ps={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},Ci={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},Oe={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},je={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},vt={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"};class b{static getFirstMatch(e,t){const r=t.match(e);return r&&r.length>0&&r[1]||""}static getSecondMatch(e,t){const r=t.match(e);return r&&r.length>1&&r[2]||""}static matchAndReturnConst(e,t,r){if(e.test(t))return r}static getWindowsVersionName(e){switch(e){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}static getMacOSVersionName(e){const t=e.split(".").splice(0,2).map(r=>parseInt(r,10)||0);if(t.push(0),t[0]===10)switch(t[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}}static getAndroidVersionName(e){const t=e.split(".").splice(0,2).map(r=>parseInt(r,10)||0);if(t.push(0),!(t[0]===1&&t[1]<5)){if(t[0]===1&&t[1]<6)return"Cupcake";if(t[0]===1&&t[1]>=6)return"Donut";if(t[0]===2&&t[1]<2)return"Eclair";if(t[0]===2&&t[1]===2)return"Froyo";if(t[0]===2&&t[1]>2)return"Gingerbread";if(t[0]===3)return"Honeycomb";if(t[0]===4&&t[1]<1)return"Ice Cream Sandwich";if(t[0]===4&&t[1]<4)return"Jelly Bean";if(t[0]===4&&t[1]>=4)return"KitKat";if(t[0]===5)return"Lollipop";if(t[0]===6)return"Marshmallow";if(t[0]===7)return"Nougat";if(t[0]===8)return"Oreo";if(t[0]===9)return"Pie"}}static getVersionPrecision(e){return e.split(".").length}static compareVersions(e,t,r=!1){const i=b.getVersionPrecision(e),l=b.getVersionPrecision(t);let p=Math.max(i,l),w=0;const S=b.map([e,t],Q=>{const Y=p-b.getVersionPrecision(Q),Re=Q+new Array(Y+1).join(".0");return b.map(Re.split("."),Pe=>new Array(20-Pe.length).join("0")+Pe).reverse()});for(r&&(w=p-Math.min(i,l)),p-=1;p>=w;){if(S[0][p]>S[1][p])return 1;if(S[0][p]===S[1][p]){if(p===w)return 0;p-=1}else if(S[0][p]<S[1][p])return-1}}static map(e,t){const r=[];let i;if(Array.prototype.map)return Array.prototype.map.call(e,t);for(i=0;i<e.length;i+=1)r.push(t(e[i]));return r}static find(e,t){let r,i;if(Array.prototype.find)return Array.prototype.find.call(e,t);for(r=0,i=e.length;r<i;r+=1){const l=e[r];if(t(l,r))return l}}static assign(e,...t){const r=e;let i,l;if(Object.assign)return Object.assign(e,...t);for(i=0,l=t.length;i<l;i+=1){const p=t[i];typeof p=="object"&&p!==null&&Object.keys(p).forEach(S=>{r[S]=p[S]})}return e}static getBrowserAlias(e){return Ps[e]}static getBrowserTypeByAlias(e){return Ci[e]||""}}const Ne=/version\/(\d+(\.?_?\d+)+)/i,Ds=[{test:[/googlebot/i],describe(n){const e={name:"Googlebot"},t=b.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,n)||b.getFirstMatch(Ne,n);return t&&(e.version=t),e}},{test:[/opera/i],describe(n){const e={name:"Opera"},t=b.getFirstMatch(Ne,n)||b.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,n);return t&&(e.version=t),e}},{test:[/opr\/|opios/i],describe(n){const e={name:"Opera"},t=b.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,n)||b.getFirstMatch(Ne,n);return t&&(e.version=t),e}},{test:[/SamsungBrowser/i],describe(n){const e={name:"Samsung Internet for Android"},t=b.getFirstMatch(Ne,n)||b.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,n);return t&&(e.version=t),e}},{test:[/Whale/i],describe(n){const e={name:"NAVER Whale Browser"},t=b.getFirstMatch(Ne,n)||b.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,n);return t&&(e.version=t),e}},{test:[/MZBrowser/i],describe(n){const e={name:"MZ Browser"},t=b.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,n)||b.getFirstMatch(Ne,n);return t&&(e.version=t),e}},{test:[/focus/i],describe(n){const e={name:"Focus"},t=b.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,n)||b.getFirstMatch(Ne,n);return t&&(e.version=t),e}},{test:[/swing/i],describe(n){const e={name:"Swing"},t=b.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,n)||b.getFirstMatch(Ne,n);return t&&(e.version=t),e}},{test:[/coast/i],describe(n){const e={name:"Opera Coast"},t=b.getFirstMatch(Ne,n)||b.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,n);return t&&(e.version=t),e}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe(n){const e={name:"Opera Touch"},t=b.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,n)||b.getFirstMatch(Ne,n);return t&&(e.version=t),e}},{test:[/yabrowser/i],describe(n){const e={name:"Yandex Browser"},t=b.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,n)||b.getFirstMatch(Ne,n);return t&&(e.version=t),e}},{test:[/ucbrowser/i],describe(n){const e={name:"UC Browser"},t=b.getFirstMatch(Ne,n)||b.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,n);return t&&(e.version=t),e}},{test:[/Maxthon|mxios/i],describe(n){const e={name:"Maxthon"},t=b.getFirstMatch(Ne,n)||b.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,n);return t&&(e.version=t),e}},{test:[/epiphany/i],describe(n){const e={name:"Epiphany"},t=b.getFirstMatch(Ne,n)||b.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,n);return t&&(e.version=t),e}},{test:[/puffin/i],describe(n){const e={name:"Puffin"},t=b.getFirstMatch(Ne,n)||b.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,n);return t&&(e.version=t),e}},{test:[/sleipnir/i],describe(n){const e={name:"Sleipnir"},t=b.getFirstMatch(Ne,n)||b.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,n);return t&&(e.version=t),e}},{test:[/k-meleon/i],describe(n){const e={name:"K-Meleon"},t=b.getFirstMatch(Ne,n)||b.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,n);return t&&(e.version=t),e}},{test:[/micromessenger/i],describe(n){const e={name:"WeChat"},t=b.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,n)||b.getFirstMatch(Ne,n);return t&&(e.version=t),e}},{test:[/qqbrowser/i],describe(n){const e={name:/qqbrowserlite/i.test(n)?"QQ Browser Lite":"QQ Browser"},t=b.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,n)||b.getFirstMatch(Ne,n);return t&&(e.version=t),e}},{test:[/msie|trident/i],describe(n){const e={name:"Internet Explorer"},t=b.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,n);return t&&(e.version=t),e}},{test:[/\sedg\//i],describe(n){const e={name:"Microsoft Edge"},t=b.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,n);return t&&(e.version=t),e}},{test:[/edg([ea]|ios)/i],describe(n){const e={name:"Microsoft Edge"},t=b.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,n);return t&&(e.version=t),e}},{test:[/vivaldi/i],describe(n){const e={name:"Vivaldi"},t=b.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,n);return t&&(e.version=t),e}},{test:[/seamonkey/i],describe(n){const e={name:"SeaMonkey"},t=b.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,n);return t&&(e.version=t),e}},{test:[/sailfish/i],describe(n){const e={name:"Sailfish"},t=b.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,n);return t&&(e.version=t),e}},{test:[/silk/i],describe(n){const e={name:"Amazon Silk"},t=b.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,n);return t&&(e.version=t),e}},{test:[/phantom/i],describe(n){const e={name:"PhantomJS"},t=b.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,n);return t&&(e.version=t),e}},{test:[/slimerjs/i],describe(n){const e={name:"SlimerJS"},t=b.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,n);return t&&(e.version=t),e}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(n){const e={name:"BlackBerry"},t=b.getFirstMatch(Ne,n)||b.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,n);return t&&(e.version=t),e}},{test:[/(web|hpw)[o0]s/i],describe(n){const e={name:"WebOS Browser"},t=b.getFirstMatch(Ne,n)||b.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,n);return t&&(e.version=t),e}},{test:[/bada/i],describe(n){const e={name:"Bada"},t=b.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,n);return t&&(e.version=t),e}},{test:[/tizen/i],describe(n){const e={name:"Tizen"},t=b.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,n)||b.getFirstMatch(Ne,n);return t&&(e.version=t),e}},{test:[/qupzilla/i],describe(n){const e={name:"QupZilla"},t=b.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,n)||b.getFirstMatch(Ne,n);return t&&(e.version=t),e}},{test:[/firefox|iceweasel|fxios/i],describe(n){const e={name:"Firefox"},t=b.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,n);return t&&(e.version=t),e}},{test:[/electron/i],describe(n){const e={name:"Electron"},t=b.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,n);return t&&(e.version=t),e}},{test:[/MiuiBrowser/i],describe(n){const e={name:"Miui"},t=b.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,n);return t&&(e.version=t),e}},{test:[/chromium/i],describe(n){const e={name:"Chromium"},t=b.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,n)||b.getFirstMatch(Ne,n);return t&&(e.version=t),e}},{test:[/chrome|crios|crmo/i],describe(n){const e={name:"Chrome"},t=b.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,n);return t&&(e.version=t),e}},{test:[/GSA/i],describe(n){const e={name:"Google Search"},t=b.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,n);return t&&(e.version=t),e}},{test(n){const e=!n.test(/like android/i),t=n.test(/android/i);return e&&t},describe(n){const e={name:"Android Browser"},t=b.getFirstMatch(Ne,n);return t&&(e.version=t),e}},{test:[/playstation 4/i],describe(n){const e={name:"PlayStation 4"},t=b.getFirstMatch(Ne,n);return t&&(e.version=t),e}},{test:[/safari|applewebkit/i],describe(n){const e={name:"Safari"},t=b.getFirstMatch(Ne,n);return t&&(e.version=t),e}},{test:[/.*/i],describe(n){const e=/^(.*)\/(.*) /,t=/^(.*)\/(.*)[ \t]\((.*)/,i=n.search("\\(")!==-1?t:e;return{name:b.getFirstMatch(i,n),version:b.getSecondMatch(i,n)}}}];var Is=[{test:[/Roku\/DVP/],describe(n){const e=b.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,n);return{name:je.Roku,version:e}}},{test:[/windows phone/i],describe(n){const e=b.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,n);return{name:je.WindowsPhone,version:e}}},{test:[/windows /i],describe(n){const e=b.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,n),t=b.getWindowsVersionName(e);return{name:je.Windows,version:e,versionName:t}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe(n){const e={name:je.iOS},t=b.getSecondMatch(/(Version\/)(\d[\d.]+)/,n);return t&&(e.version=t),e}},{test:[/macintosh/i],describe(n){const e=b.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,n).replace(/[_\s]/g,"."),t=b.getMacOSVersionName(e),r={name:je.MacOS,version:e};return t&&(r.versionName=t),r}},{test:[/(ipod|iphone|ipad)/i],describe(n){const e=b.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,n).replace(/[_\s]/g,".");return{name:je.iOS,version:e}}},{test(n){const e=!n.test(/like android/i),t=n.test(/android/i);return e&&t},describe(n){const e=b.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,n),t=b.getAndroidVersionName(e),r={name:je.Android,version:e};return t&&(r.versionName=t),r}},{test:[/(web|hpw)[o0]s/i],describe(n){const e=b.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,n),t={name:je.WebOS};return e&&e.length&&(t.version=e),t}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(n){const e=b.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,n)||b.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,n)||b.getFirstMatch(/\bbb(\d+)/i,n);return{name:je.BlackBerry,version:e}}},{test:[/bada/i],describe(n){const e=b.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,n);return{name:je.Bada,version:e}}},{test:[/tizen/i],describe(n){const e=b.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,n);return{name:je.Tizen,version:e}}},{test:[/linux/i],describe(){return{name:je.Linux}}},{test:[/CrOS/],describe(){return{name:je.ChromeOS}}},{test:[/PlayStation 4/],describe(n){const e=b.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,n);return{name:je.PlayStation4,version:e}}}],Ls=[{test:[/googlebot/i],describe(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe(n){const e=b.getFirstMatch(/(can-l01)/i,n)&&"Nova",t={type:Oe.mobile,vendor:"Huawei"};return e&&(t.model=e),t}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe(){return{type:Oe.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe(){return{type:Oe.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe(){return{type:Oe.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe(){return{type:Oe.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe(){return{type:Oe.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe(){return{type:Oe.tablet}}},{test(n){const e=n.test(/ipod|iphone/i),t=n.test(/like (ipod|iphone)/i);return e&&!t},describe(n){const e=b.getFirstMatch(/(ipod|iphone)/i,n);return{type:Oe.mobile,vendor:"Apple",model:e}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe(){return{type:Oe.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe(){return{type:Oe.mobile}}},{test(n){return n.getBrowserName(!0)==="blackberry"},describe(){return{type:Oe.mobile,vendor:"BlackBerry"}}},{test(n){return n.getBrowserName(!0)==="bada"},describe(){return{type:Oe.mobile}}},{test(n){return n.getBrowserName()==="windows phone"},describe(){return{type:Oe.mobile,vendor:"Microsoft"}}},{test(n){const e=Number(String(n.getOSVersion()).split(".")[0]);return n.getOSName(!0)==="android"&&e>=3},describe(){return{type:Oe.tablet}}},{test(n){return n.getOSName(!0)==="android"},describe(){return{type:Oe.mobile}}},{test(n){return n.getOSName(!0)==="macos"},describe(){return{type:Oe.desktop,vendor:"Apple"}}},{test(n){return n.getOSName(!0)==="windows"},describe(){return{type:Oe.desktop}}},{test(n){return n.getOSName(!0)==="linux"},describe(){return{type:Oe.desktop}}},{test(n){return n.getOSName(!0)==="playstation 4"},describe(){return{type:Oe.tv}}},{test(n){return n.getOSName(!0)==="roku"},describe(){return{type:Oe.tv}}}],Fs=[{test(n){return n.getBrowserName(!0)==="microsoft edge"},describe(n){if(/\sedg\//i.test(n))return{name:vt.Blink};const t=b.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,n);return{name:vt.EdgeHTML,version:t}}},{test:[/trident/i],describe(n){const e={name:vt.Trident},t=b.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,n);return t&&(e.version=t),e}},{test(n){return n.test(/presto/i)},describe(n){const e={name:vt.Presto},t=b.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,n);return t&&(e.version=t),e}},{test(n){const e=n.test(/gecko/i),t=n.test(/like gecko/i);return e&&!t},describe(n){const e={name:vt.Gecko},t=b.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,n);return t&&(e.version=t),e}},{test:[/(apple)?webkit\/537\.36/i],describe(){return{name:vt.Blink}}},{test:[/(apple)?webkit/i],describe(n){const e={name:vt.WebKit},t=b.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,n);return t&&(e.version=t),e}}];class yr{constructor(e,t=!1){if(e==null||e==="")throw new Error("UserAgent parameter can't be empty");this._ua=e,this.parsedResult={},t!==!0&&this.parse()}getUA(){return this._ua}test(e){return e.test(this._ua)}parseBrowser(){this.parsedResult.browser={};const e=b.find(Ds,t=>{if(typeof t.test=="function")return t.test(this);if(t.test instanceof Array)return t.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.browser=e.describe(this.getUA())),this.parsedResult.browser}getBrowser(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()}getBrowserName(e){return e?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""}getBrowserVersion(){return this.getBrowser().version}getOS(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()}parseOS(){this.parsedResult.os={};const e=b.find(Is,t=>{if(typeof t.test=="function")return t.test(this);if(t.test instanceof Array)return t.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.os=e.describe(this.getUA())),this.parsedResult.os}getOSName(e){const{name:t}=this.getOS();return e?String(t).toLowerCase()||"":t||""}getOSVersion(){return this.getOS().version}getPlatform(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()}getPlatformType(e=!1){const{type:t}=this.getPlatform();return e?String(t).toLowerCase()||"":t||""}parsePlatform(){this.parsedResult.platform={};const e=b.find(Ls,t=>{if(typeof t.test=="function")return t.test(this);if(t.test instanceof Array)return t.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.platform=e.describe(this.getUA())),this.parsedResult.platform}getEngine(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()}getEngineName(e){return e?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""}parseEngine(){this.parsedResult.engine={};const e=b.find(Fs,t=>{if(typeof t.test=="function")return t.test(this);if(t.test instanceof Array)return t.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.engine=e.describe(this.getUA())),this.parsedResult.engine}parse(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this}getResult(){return b.assign({},this.parsedResult)}satisfies(e){const t={};let r=0;const i={};let l=0;if(Object.keys(e).forEach(w=>{const S=e[w];typeof S=="string"?(i[w]=S,l+=1):typeof S=="object"&&(t[w]=S,r+=1)}),r>0){const w=Object.keys(t),S=b.find(w,Y=>this.isOS(Y));if(S){const Y=this.satisfies(t[S]);if(Y!==void 0)return Y}const Q=b.find(w,Y=>this.isPlatform(Y));if(Q){const Y=this.satisfies(t[Q]);if(Y!==void 0)return Y}}if(l>0){const w=Object.keys(i),S=b.find(w,Q=>this.isBrowser(Q,!0));if(S!==void 0)return this.compareVersion(i[S])}}isBrowser(e,t=!1){const r=this.getBrowserName().toLowerCase();let i=e.toLowerCase();const l=b.getBrowserTypeByAlias(i);return t&&l&&(i=l.toLowerCase()),i===r}compareVersion(e){let t=[0],r=e,i=!1;const l=this.getBrowserVersion();if(typeof l=="string")return e[0]===">"||e[0]==="<"?(r=e.substr(1),e[1]==="="?(i=!0,r=e.substr(2)):t=[],e[0]===">"?t.push(1):t.push(-1)):e[0]==="="?r=e.substr(1):e[0]==="~"&&(i=!0,r=e.substr(1)),t.indexOf(b.compareVersions(l,r,i))>-1}isOS(e){return this.getOSName(!0)===String(e).toLowerCase()}isPlatform(e){return this.getPlatformType(!0)===String(e).toLowerCase()}isEngine(e){return this.getEngineName(!0)===String(e).toLowerCase()}is(e,t=!1){return this.isBrowser(e,t)||this.isOS(e)||this.isPlatform(e)}some(e=[]){return e.some(t=>this.is(t))}}/*!
 * Bowser - a browser detector
 * https://github.com/lancedikson/bowser
 * MIT License | (c) Dustin Diaz 2012-2015
 * MIT License | (c) Denis Demchenko 2015-2019
 */class bi{static getParser(e,t=!1){if(typeof e!="string")throw new Error("UserAgent should be a string");return new yr(e,t)}static parse(e){return new yr(e).getResult()}static get BROWSER_MAP(){return Ci}static get ENGINE_MAP(){return vt}static get OS_MAP(){return je}static get PLATFORMS_MAP(){return Oe}}document.documentElement.contentEditable;const Ws=bi.getParser(window.navigator.userAgent),Hs=Ws.getEngineName(),$s=Hs==="WebKit",Vs=n=>{const e=n,t=e.onselectionchange;if(t!==void 0)try{return e.onselectionchange=0,e.onselectionchange===null}catch{}finally{e.onselectionchange=t}return!1},js=Vs(document),zs=!!$s;function yi(n,e){const t=qs(e);n.on=t.on,n.off=t.off,n.notify=t.notify}function qs(n){let e={};function t(i,l){i.split(" ").forEach(p=>{e[p]=e[p]||[],e[p].unshift(l)})}function r(i,l){const p=e[i];if(!p)return;const w=p.indexOf(l);w<0||p.splice(w,1)}return{on(i,l){if(arguments.length===2)t(i,l);else if(arguments.length===1)for(const p in i)t(p,i[p]);return this},off(i,l){arguments.length===2?r(i,l):arguments.length===1?e[i]=[]:e={}},notify(i,l){const p=Array.from(arguments);if(n?(l=i,i=n,p.splice(0,1)):p.splice(0,2),this.switchContext){const S=this.switchContext.events.shift();l!==S&&(this.switchContext=void 0)}const w=e[l];!w||w.every(S=>S.apply(i,p)!==!1)}}}function wr(n){const e=n.pageXOffset!==void 0?n.pageXOffset:(n.document.documentElement||n.document.body.parentNode||n.document.body).scrollLeft,t=n.pageYOffset!==void 0?n.pageYOffset:(n.document.documentElement||n.document.body.parentNode||n.document.body).scrollTop;return{x:e,y:t}}class ze{static findHost(e,t){return ln(e,t)}constructor(e,t){this.setHost(e),this.range=t,this.isCursor=!0}getTags(e){return bt(this.host,this.range,e)}getTagNames(e){return ti(this.getTags(e))}getTagsByName(e){return Jr(this.host,this.range,e)}getInnerTags(e){return Zn(this.range,e)}getAncestorTags(e){return Yn(this.host,this.range,e)}isAtEnd(){return Un(this.host,this.range.endContainer,this.range.endOffset)}isAtTextEnd(){return dn(this.host,this.range.endContainer,this.range.endOffset)}isAtLastLine(){const e=this.win.document.createRange();e.selectNodeContents(this.host),e.collapse(!1);const t=nn(e,this.win),r=nn(this.range.nativeRange,this.win);return Sr(t.bottom,r.bottom)}isAtFirstLine(){const e=this.win.document.createRange();e.selectNodeContents(this.host),e.collapse(!0);const t=nn(e,this.win),r=nn(this.range.nativeRange,this.win);return Sr(t.top,r.top)}isAtBeginning(){return hn(this.host,this.range.startContainer,this.range.startOffset)}insertBefore(e){if(dr(e)&&(e=_t(e)),kn(e))return;e=this.adoptElement(e);let t=e;if(e.nodeType===jn){const r=e.childNodes.length-1;t=e.childNodes[r]}this.range.insertNode(e),this.range.setStartAfter(t),this.range.setEndAfter(t)}insertAfter(e){dr(e)&&(e=_t(e)),!kn(e)&&(e=this.adoptElement(e),this.range.insertNode(e))}setSelection(){this.setVisibleSelection()}setVisibleSelection(){if(this.win.document.activeElement!==this.host){const{x:e,y:t}=wr(this.win);this.win.scrollTo(e,t)}Xe.getSelection(this.win).setSingleRange(this.range)}before(){const e=this.range.cloneRange();return e.collapse(!0),e.setStartBefore(this.host),Mn(e)}textBefore(){const e=this.range.cloneRange();return e.collapse(!0),e.setStartBefore(this.host),e.toString()}beforeHtml(){return sn(this.before())}after(){const e=this.range.cloneRange();return e.collapse(!1),e.setEndAfter(this.host),Mn(e)}textAfter(){const e=this.range.cloneRange();return e.collapse(!1),e.setEndAfter(this.host),e.toString()}afterHtml(){return sn(this.after())}getBoundingClientRect(){return this.range.nativeRange.getBoundingClientRect()}getCoordinates(e="absolute"){const t=this.range.nativeRange.getBoundingClientRect();if(e==="fixed")return t;const{x:r,y:i}=wr(this.win);return{top:t.top+i,bottom:t.bottom+i,left:t.left+r,right:t.right+r,height:t.height,width:t.width}}moveBefore(e){if(this.updateHost(e),this.range.setStartBefore(e),this.range.setEndBefore(e),this.isSelection)return new ze(this.host,this.range)}moveAfter(e){if(this.updateHost(e),this.range.setStartAfter(e),this.range.setEndAfter(e),this.isSelection)return new ze(this.host,this.range)}moveAtBeginning(e=this.host){if(this.updateHost(e),this.range.selectNodeContents(e),this.range.collapse(!0),this.isSelection)return new ze(this.host,this.range)}moveAtEnd(e=this.host){if(this.updateHost(e),this.range.selectNodeContents(e),this.range.collapse(!1),this.isSelection)return new ze(this.host,this.range)}moveAtTextEnd(e){return this.moveAtEnd(gn(e))}setHost(e){e.jquery&&(e=e[0]),this.host=e,this.win=e==null?window:e.ownerDocument.defaultView}updateHost(e){const t=zn(e);t||Ot("Can not set cursor outside of an editable block"),this.setHost(t)}retainVisibleSelection(e){this.save(),e(),this.restore(),this.setVisibleSelection()}save(){this.savedRangeInfo=Kr(this.range),this.savedRangeInfo.host=this.host}restore(){this.savedRangeInfo||Ot("Could not restore selection"),this.host=this.savedRangeInfo.host,this.range=Qr(this.host,this.savedRangeInfo),this.savedRangeInfo=void 0}equals(e){return!(!e||!e.host||!e.host.isEqualNode(this.host)||!e.range||!e.range.equals(this.range))}createElement(e,t={}){const r=this.win.document.createElement(e);for(const i in t){const l=t[i];r.setAttribute(i,l)}return r}createTextNode(e){return this.win.document.createTextNode(e)}adoptElement(e){return on(e,this.win.document)}triggerChange(){const e=document.createEvent("HTMLEvents");e.initEvent("formatEditable",!0,!1),this.host.dispatchEvent(e)}}function nn(n,e){if(n.startContainer.nodeType!==ot)return n.getBoundingClientRect();const t=e.document.createElement("span");t.setAttribute("doc-editable","unwrap"),n.insertNode(t);const r=t.getBoundingClientRect();return t.remove(),r}function Sr(n,e){return n===e||Math.abs(n-e)<=2}var Us={exports:{}};(function(n,e){(function(t,r){n.exports=t(Vn.exports)})(function(t){return t.createModule("TextRange",["WrappedSelection"],function(r,i){var l="undefined",p="character",w="word",S=r.dom,Q=r.util,Y=Q.extend,Re=Q.createOptions,Pe=S.getBody,$e=/^[ \t\f\r\n]+$/,De=/^[ \t\f\r]+$/,et=/^[\t-\r \u0085\u00A0\u1680\u180E\u2000-\u200B\u2028\u2029\u202F\u205F\u3000]+$/,Qe=/^[\t \u00A0\u1680\u180E\u2000-\u200B\u202F\u205F\u3000]+$/,dt="en",It=r.Selection.isDirectionBackward,gt=!1,it=!1,at=!0;(function(){var a=S.createTestElement(document,"<p>1 </p><p></p>",!0),c=a.firstChild,u=r.getSelection();u.collapse(c.lastChild,2),u.setStart(c.firstChild,0),a.innerHTML="1 <br />",u.collapse(a,2),u.setStart(a.firstChild,0),gt=(""+u).length==1,a.innerHTML="1 <p>1</p>",u.collapse(a,2),u.setStart(a.firstChild,0),it=(""+u).length==1,S.removeNode(a),u.removeAllRanges()})();function ee(a,c){var u=a.join(""),d,v=[];function C(A,U,j){v.push({start:A,end:U,isWord:j})}for(var B=0,T,V;d=c.wordRegex.exec(u);){if(T=d.index,V=T+d[0].length,T>B&&C(B,T,!1),c.includeTrailingSpace)for(;Qe.test(a[V]);)++V;C(T,V,!0),B=V}return B<a.length&&C(B,a.length,!1),v}function Tt(a,c){for(var u=a.slice(c.start,c.end),d={isWord:c.isWord,chars:u,toString:function(){return u.join("")}},v=0,C=u.length;v<C;++v)u[v].token=d;return d}function xt(a,c,u){for(var d=u(a,c),v=[],C=0,B;B=d[C++];)v.push(Tt(a,B));return v}var ct={includeBlockContentTrailingSpace:!0,includeSpaceBeforeBr:!0,includeSpaceBeforeBlock:!0,includePreLineTrailingSpace:!0,ignoreCharacters:""};function wn(a){var c=a||"",u=typeof c=="string"?c.split(""):c;return u.sort(function(d,v){return d.charCodeAt(0)-v.charCodeAt(0)}),u.join("").replace(/(.)\1+/g,"$1")}var At={includeBlockContentTrailingSpace:!at,includeSpaceBeforeBr:!gt,includeSpaceBeforeBlock:!it,includePreLineTrailingSpace:!0},pt={en:{wordRegex:/[a-z0-9]+('[a-z0-9]+)*/gi,includeTrailingSpace:!1,tokenizer:ee}},Lt={caseSensitive:!1,withinRange:null,wholeWordsOnly:!1,wrap:!1,direction:"forward",wordOptions:null,characterOptions:null},Xt={wordOptions:null,characterOptions:null},Ft={wordOptions:null,characterOptions:null,trim:!1,trimStart:!0,trimEnd:!0},Zt={wordOptions:null,characterOptions:null,direction:"forward"};function Jt(a){var c,u;return a?(c=a.language||dt,u={},Y(u,pt[c]||pt[dt]),Y(u,a),u):pt[dt]}function mt(a,c){var u=Re(a,c);return c.hasOwnProperty("wordOptions")&&(u.wordOptions=Jt(u.wordOptions)),c.hasOwnProperty("characterOptions")&&(u.characterOptions=Re(u.characterOptions,ct)),u}var yt=S.getComputedStyleProperty,wt;(function(){var a=document.createElement("table"),c=Pe(document);c.appendChild(a),wt=yt(a,"display")=="block",c.removeChild(a)})();var Wt={table:"table",caption:"table-caption",colgroup:"table-column-group",col:"table-column",thead:"table-header-group",tbody:"table-row-group",tfoot:"table-footer-group",tr:"table-row",td:"table-cell",th:"table-cell"};function St(a,c){var u=yt(a,"display",c),d=a.tagName.toLowerCase();return u=="block"&&wt&&Wt.hasOwnProperty(d)?Wt[d]:u}function en(a){for(var c=R(a),u=0,d=c.length;u<d;++u)if(c[u].nodeType==1&&St(c[u])=="none")return!0;return!1}function tn(a){var c;return a.nodeType==3&&(c=a.parentNode)&&yt(c,"visibility")=="hidden"}function Ht(a){return a&&(a.nodeType==1&&!/^(inline(-block|-table)?|none)$/.test(St(a))||a.nodeType==9||a.nodeType==11)}function g(a){return S.isCharacterDataNode(a)||!/^(area|base|basefont|br|col|frame|hr|img|input|isindex|link|meta|param)$/i.test(a.nodeName)}function O(a){for(var c=[];a.parentNode;)c.unshift(a.parentNode),a=a.parentNode;return c}function R(a){return O(a).concat([a])}function P(a){for(;a&&!a.nextSibling;)a=a.parentNode;return a?a.nextSibling:null}function L(a,c){return!c&&a.hasChildNodes()?a.firstChild:P(a)}function G(a){var c=a.previousSibling;if(c){for(a=c;a.hasChildNodes();)a=a.lastChild;return a}var u=a.parentNode;return u&&u.nodeType==1?u:null}function q(a){if(!a||a.nodeType!=3)return!1;var c=a.data;if(c==="")return!0;var u=a.parentNode;if(!u||u.nodeType!=1)return!1;var d=yt(a.parentNode,"whiteSpace");return/^[\t\n\r ]+$/.test(c)&&/^(normal|nowrap)$/.test(d)||/^[\t\r ]+$/.test(c)&&d=="pre-line"}function pe(a){if(a.data==="")return!0;if(!q(a))return!1;var c=a.parentNode;return!!(!c||en(a))}function we(a){var c=a.nodeType;return c==7||c==8||en(a)||/^(script|style)$/i.test(a.nodeName)||tn(a)||pe(a)}function Be(a,c){var u=a.nodeType;return u==7||u==8||u==1&&St(a,c)=="none"}function oe(){this.store={}}oe.prototype={get:function(a){return this.store.hasOwnProperty(a)?this.store[a]:null},set:function(a,c){return this.store[a]=c}};function ae(a,c,u){return function(d){var v=this.cache;if(v.hasOwnProperty(a))return v[a];var C=c.call(this,u?this[u]:this,d);return v[a]=C,C}}function Ie(a,c){this.node=a,this.session=c,this.cache=new oe,this.positions=new oe}var Se={getPosition:function(a){var c=this.positions;return c.get(a)||c.set(a,new ge(this,a))},toString:function(){return"[NodeWrapper("+S.inspectNode(this.node)+")]"}};Ie.prototype=Se;var Me="EMPTY",de="NON_SPACE",Le="UNCOLLAPSIBLE_SPACE",x="COLLAPSIBLE_SPACE",te="TRAILING_SPACE_BEFORE_BLOCK",I="TRAILING_SPACE_IN_BLOCK",ce="TRAILING_SPACE_BEFORE_BR",ve="PRE_LINE_TRAILING_SPACE_BEFORE_LINE_BREAK",ne="TRAILING_LINE_BREAK_AFTER_BR",K="INCLUDED_TRAILING_LINE_BREAK_AFTER_BR";Y(Se,{isCharacterDataNode:ae("isCharacterDataNode",S.isCharacterDataNode,"node"),getNodeIndex:ae("nodeIndex",S.getNodeIndex,"node"),getLength:ae("nodeLength",S.getNodeLength,"node"),containsPositions:ae("containsPositions",g,"node"),isWhitespace:ae("isWhitespace",q,"node"),isCollapsedWhitespace:ae("isCollapsedWhitespace",pe,"node"),getComputedDisplay:ae("computedDisplay",St,"node"),isCollapsed:ae("collapsed",we,"node"),isIgnored:ae("ignored",Be,"node"),next:ae("nextPos",L,"node"),previous:ae("previous",G,"node"),getTextNodeInfo:ae("textNodeInfo",function(a){var c=null,u=!1,d=yt(a.parentNode,"whiteSpace"),v=d=="pre-line";return v?(c=De,u=!0):(d=="normal"||d=="nowrap")&&(c=$e,u=!0),{node:a,text:a.data,spaceRegex:c,collapseSpaces:u,preLine:v}},"node"),hasInnerText:ae("hasInnerText",function(a,c){for(var u=this.session,d=u.getPosition(a.parentNode,this.getNodeIndex()+1),v=u.getPosition(a,0),C=c?d:v,B=c?v:d;C!==B;){if(C.prepopulateChar(),C.isDefinitelyNonEmpty())return!0;C=c?C.previousVisible():C.nextVisible()}return!1},"node"),isRenderedBlock:ae("isRenderedBlock",function(a){for(var c=a.getElementsByTagName("br"),u=0,d=c.length;u<d;++u)if(!we(c[u]))return!0;return this.hasInnerText()},"node"),getTrailingSpace:ae("trailingSpace",function(a){if(a.tagName.toLowerCase()=="br")return"";switch(this.getComputedDisplay()){case"inline":for(var c=a.lastChild;c;){if(!Be(c))return c.nodeType==1?this.session.getNodeWrapper(c).getTrailingSpace():"";c=c.previousSibling}break;case"inline-block":case"inline-table":case"none":case"table-column":case"table-column-group":break;case"table-cell":return"	";default:return this.isRenderedBlock(!0)?`
`:""}return""},"node"),getLeadingSpace:ae("leadingSpace",function(a){switch(this.getComputedDisplay()){case"inline":case"inline-block":case"inline-table":case"none":case"table-column":case"table-column-group":case"table-cell":break;default:return this.isRenderedBlock(!1)?`
`:""}return""},"node")});function ge(a,c){this.offset=c,this.nodeWrapper=a,this.node=a.node,this.session=a.session,this.cache=new oe}function le(){return"[Position("+S.inspectNode(this.node)+":"+this.offset+")]"}var ue={character:"",characterType:Me,isBr:!1,prepopulateChar:function(){var a=this;if(!a.prepopulatedChar){var c=a.node,u=a.offset,d="",v=Me,C=!1;if(u>0)if(c.nodeType==3){var B=c.data,T=B.charAt(u-1),V=a.nodeWrapper.getTextNodeInfo(),A=V.spaceRegex;V.collapseSpaces?A.test(T)?u>1&&A.test(B.charAt(u-2))||(V.preLine&&B.charAt(u)===`
`?(d=" ",v=ve):(d=" ",v=x)):(d=T,v=de,C=!0):(d=T,v=Le,C=!0)}else{var U=c.childNodes[u-1];if(U&&U.nodeType==1&&!we(U)&&(U.tagName.toLowerCase()=="br"?(d=`
`,a.isBr=!0,v=x,C=!1):a.checkForTrailingSpace=!0),!d){var j=c.childNodes[u];j&&j.nodeType==1&&!we(j)&&(a.checkForLeadingSpace=!0)}}a.prepopulatedChar=!0,a.character=d,a.characterType=v,a.isCharInvariant=C}},isDefinitelyNonEmpty:function(){var a=this.characterType;return a==de||a==Le},resolveLeadingAndTrailingSpaces:function(){if(this.prepopulatedChar||this.prepopulateChar(),this.checkForTrailingSpace){var a=this.session.getNodeWrapper(this.node.childNodes[this.offset-1]).getTrailingSpace();a&&(this.isTrailingSpace=!0,this.character=a,this.characterType=x),this.checkForTrailingSpace=!1}if(this.checkForLeadingSpace){var c=this.session.getNodeWrapper(this.node.childNodes[this.offset]).getLeadingSpace();c&&(this.isLeadingSpace=!0,this.character=c,this.characterType=x),this.checkForLeadingSpace=!1}},getPrecedingUncollapsedPosition:function(a){for(var c=this,u;c=c.previousVisible();)if(u=c.getCharacter(a),u!=="")return c;return null},getCharacter:function(a){this.resolveLeadingAndTrailingSpaces();var c=this.character,u,d=wn(a.ignoreCharacters),v=c!==""&&d.indexOf(c)>-1;if(this.isCharInvariant)return u=v?"":c,u;var C=["character",a.includeSpaceBeforeBr,a.includeBlockContentTrailingSpace,a.includePreLineTrailingSpace,d].join("_"),B=this.cache.get(C);if(B!==null)return B;var T="",V=this.characterType==x,A,U,j=!1,fe=this;function ye(){return j||(U=fe.getPrecedingUncollapsedPosition(a),j=!0),U}return V&&(this.type==K?T=`
`:c==" "&&(!ye()||U.isTrailingSpace||U.character==`
`||U.character==" "&&U.characterType==x)||(c==`
`&&this.isLeadingSpace?ye()&&U.character!=`
`&&(T=`
`):(A=this.nextUncollapsed(),A&&(A.isBr?this.type=ce:A.isTrailingSpace&&A.character==`
`?this.type=I:A.isLeadingSpace&&A.character==`
`&&(this.type=te),A.character==`
`?this.type==ce&&!a.includeSpaceBeforeBr||this.type==te&&!a.includeSpaceBeforeBlock||this.type==I&&A.isTrailingSpace&&!a.includeBlockContentTrailingSpace||this.type==ve&&A.type==de&&!a.includePreLineTrailingSpace||(c==`
`?A.isTrailingSpace?this.isTrailingSpace||this.isBr&&(A.type=ne,ye()&&U.isLeadingSpace&&!U.isTrailingSpace&&U.character==`
`?A.character="":A.type=K):T=`
`:c==" "&&(T=" ")):T=c)))),d.indexOf(T)>-1&&(T=""),this.cache.set(C,T),T},equals:function(a){return!!a&&this.node===a.node&&this.offset===a.offset},inspect:le,toString:function(){return this.character}};ge.prototype=ue,Y(ue,{next:ae("nextPos",function(a){var c=a.nodeWrapper,u=a.node,d=a.offset,v=c.session;if(!u)return null;var C,B,T;return d==c.getLength()?(C=u.parentNode,B=C?c.getNodeIndex()+1:0):c.isCharacterDataNode()?(C=u,B=d+1):(T=u.childNodes[d],v.getNodeWrapper(T).containsPositions()?(C=T,B=0):(C=u,B=d+1)),C?v.getPosition(C,B):null}),previous:ae("previous",function(a){var c=a.nodeWrapper,u=a.node,d=a.offset,v=c.session,C,B,T;return d==0?(C=u.parentNode,B=C?c.getNodeIndex():0):c.isCharacterDataNode()?(C=u,B=d-1):(T=u.childNodes[d-1],v.getNodeWrapper(T).containsPositions()?(C=T,B=S.getNodeLength(T)):(C=u,B=d-1)),C?v.getPosition(C,B):null}),nextVisible:ae("nextVisible",function(a){var c=a.next();if(!c)return null;var u=c.nodeWrapper,d=c.node,v=c;return u.isCollapsed()&&(v=u.session.getPosition(d.parentNode,u.getNodeIndex()+1)),v}),nextUncollapsed:ae("nextUncollapsed",function(a){for(var c=a;c=c.nextVisible();)if(c.resolveLeadingAndTrailingSpaces(),c.character!=="")return c;return null}),previousVisible:ae("previousVisible",function(a){var c=a.previous();if(!c)return null;var u=c.nodeWrapper,d=c.node,v=c;return u.isCollapsed()&&(v=u.session.getPosition(d.parentNode,u.getNodeIndex())),v})});var _e=null,M=function(){function a(d){var v=new oe;return{get:function(C){var B=v.get(C[d]);if(B){for(var T=0,V;V=B[T++];)if(V.node===C)return V}return null},set:function(C){var B=C.node[d],T=v.get(B)||v.set(B,[]);T.push(C)}}}var c=Q.isHostProperty(document.documentElement,"uniqueID");function u(){this.initCaches()}return u.prototype={initCaches:function(){this.elementCache=c?function(){var d=new oe;return{get:function(v){return d.get(v.uniqueID)},set:function(v){d.set(v.node.uniqueID,v)}}}():a("tagName"),this.textNodeCache=a("data"),this.otherNodeCache=a("nodeName")},getNodeWrapper:function(d){var v;switch(d.nodeType){case 1:v=this.elementCache;break;case 3:v=this.textNodeCache;break;default:v=this.otherNodeCache;break}var C=v.get(d);return C||(C=new Ie(d,this),v.set(C)),C},getPosition:function(d,v){return this.getNodeWrapper(d).getPosition(v)},getRangeBoundaryPosition:function(d,v){var C=v?"start":"end";return this.getPosition(d[C+"Container"],d[C+"Offset"])},detach:function(){this.elementCache=this.textNodeCache=this.otherNodeCache=null}},u}();function $(){return he(),_e=new M}function re(){return _e||$()}function he(){_e&&_e.detach(),_e=null}Y(S,{nextNode:L,previousNode:G});function Ce(a,c,u,d){u&&(c?we(u.node)&&(u=a.previousVisible()):we(u.node)&&(u=u.nextVisible()));var v=a,C=!1;function B(){var A=null;return c?(A=v,C||(v=v.previousVisible(),C=!v||u&&v.equals(u))):C||(A=v=v.nextVisible(),C=!v||u&&v.equals(u)),C&&(v=null),A}var T,V=!1;return{next:function(){if(V)return V=!1,T;for(var A,U;A=B();)if(U=A.getCharacter(d),U)return T=A,A;return null},rewind:function(){if(T)V=!0;else throw i.createError("createCharacterIterator: cannot rewind. Only one position can be rewound.")},dispose:function(){a=u=null}}}var qe=Array.prototype.indexOf?function(a,c){return a.indexOf(c)}:function(a,c){for(var u=0,d=a.length;u<d;++u)if(a[u]===c)return u;return-1};function Ae(a,c,u){var d=Ce(a,!1,null,c),v=Ce(a,!0,null,c),C=u.tokenizer;function B(fe){for(var ye,Fe,Ye=[],nt=fe?d:v,ut=!1,s=!1;ye=nt.next();){if(Fe=ye.character,et.test(Fe))s&&(s=!1,ut=!0);else if(ut){nt.rewind();break}else s=!0;Ye.push(ye)}return Ye}var T=B(!0),V=B(!1).reverse(),A=xt(V.concat(T),u,C),U=T.length?A.slice(qe(A,T[0].token)):[],j=V.length?A.slice(0,qe(A,V.pop().token)+1):[];return{nextEndToken:function(){for(var fe,ye;U.length==1&&!(fe=U[0]).isWord&&(ye=B(!0)).length>0;)U=xt(fe.chars.concat(ye),u,C);return U.shift()},previousStartToken:function(){for(var fe,ye;j.length==1&&!(fe=j[0]).isWord&&(ye=B(!1)).length>0;)j=xt(ye.reverse().concat(fe.chars),u,C);return j.pop()},dispose:function(){d.dispose(),v.dispose(),U=j=null}}}function Te(a,c,u,d,v){var C=0,B,T=a,V,A,U=Math.abs(u),j;if(u!==0){var fe=u<0;switch(c){case p:for(V=Ce(a,fe,null,d);(B=V.next())&&C<U;)++C,T=B;A=B,V.dispose();break;case w:for(var ye=Ae(a,d,v),Fe=fe?ye.previousStartToken:ye.nextEndToken;(j=Fe())&&C<U;)j.isWord&&(++C,T=fe?j.chars[0]:j.chars[j.chars.length-1]);break;default:throw new Error("movePositionBy: unit '"+c+"' not implemented")}fe?(T=T.previousVisible(),C=-C):T&&T.isLeadingSpace&&!T.isTrailingSpace&&(c==w&&(V=Ce(a,!1,null,d),A=V.next(),V.dispose()),A&&(T=A.previousVisible()))}return{position:T,unitsMoved:C}}function Ue(a,c,u,d){var v=a.getRangeBoundaryPosition(c,!0),C=a.getRangeBoundaryPosition(c,!1),B=d?C:v,T=d?v:C;return Ce(B,!!d,T,u)}function ke(a,c,u){for(var d=[],v=Ue(a,c,u),C;C=v.next();)d.push(C);return v.dispose(),d}function tt(a,c,u){var d=r.createRange(a.node);return d.setStartAndEnd(a.node,a.offset,c.node,c.offset),!d.expand("word",{wordOptions:u})}function m(a,c,u,d,v){var C=It(v.direction),B=Ce(a,C,a.session.getRangeBoundaryPosition(d,C),v.characterOptions),T="",V=[],A,U,j,fe,ye,Fe,Ye=null;function nt(ut,s){var h=V[ut].previousVisible(),N=V[s-1],D=!v.wholeWordsOnly||tt(h,N,v.wordOptions);return{startPos:h,endPos:N,valid:D}}for(;A=B.next();)if(U=A.character,!u&&!v.caseSensitive&&(U=U.toLowerCase()),C?(V.unshift(A),T=U+T):(V.push(A),T+=U),u){if(ye=c.exec(T),ye)if(j=ye.index,fe=j+ye[0].length,Fe){if(!C&&fe<T.length||C&&j>0){Ye=nt(j,fe);break}}else Fe=!0}else if((j=T.indexOf(c))!=-1){Ye=nt(j,j+c.length);break}return Fe&&(Ye=nt(j,fe)),B.dispose(),Ye}function E(a){return function(){var c=!!_e,u=re(),d=[u].concat(Q.toArray(arguments)),v=a.apply(this,d);return c||he(),v}}function X(a,c){return E(function(u,d,v,C){typeof v==l&&(v=d,d=p),C=mt(C,Xt);var B=a;c&&(B=v>=0,this.collapse(!B));var T=Te(u.getRangeBoundaryPosition(this,B),d,v,C.characterOptions,C.wordOptions),V=T.position;return this[B?"setStart":"setEnd"](V.node,V.offset),T.unitsMoved})}function H(a){return E(function(c,u){u=Re(u,ct);for(var d,v=Ue(c,this,u,!a),C=0;(d=v.next())&&et.test(d.character);)++C;v.dispose();var B=C>0;return B&&this[a?"moveStart":"moveEnd"]("character",a?C:-C,{characterOptions:u}),B})}Y(r.rangePrototype,{moveStart:X(!0,!1),moveEnd:X(!1,!1),move:X(!0,!0),trimStart:H(!0),trimEnd:H(!1),trim:E(function(a,c){var u=this.trimStart(c),d=this.trimEnd(c);return u||d}),expand:E(function(a,c,u){var d=!1;u=mt(u,Ft);var v=u.characterOptions;if(c||(c=p),c==w){var C=u.wordOptions,B=a.getRangeBoundaryPosition(this,!0),T=a.getRangeBoundaryPosition(this,!1),V=Ae(B,v,C),A=V.nextEndToken(),U=A.chars[0].previousVisible(),j,fe;if(this.collapsed)j=A;else{var ye=Ae(T,v,C);j=ye.previousStartToken()}return fe=j.chars[j.chars.length-1],U.equals(B)||(this.setStart(U.node,U.offset),d=!0),fe&&!fe.equals(T)&&(this.setEnd(fe.node,fe.offset),d=!0),u.trim&&(u.trimStart&&(d=this.trimStart(v)||d),u.trimEnd&&(d=this.trimEnd(v)||d)),d}else return this.moveEnd(p,1,u)}),text:E(function(a,c){return this.collapsed?"":ke(a,this,Re(c,ct)).join("")}),selectCharacters:E(function(a,c,u,d,v){var C={characterOptions:v};c||(c=Pe(this.getDocument())),this.selectNodeContents(c),this.collapse(!0),this.moveStart("character",u,C),this.collapse(!0),this.moveEnd("character",d-u,C)}),toCharacterRange:E(function(a,c,u){c||(c=Pe(this.getDocument()));var d=c.parentNode,v=S.getNodeIndex(c),C=S.comparePoints(this.startContainer,this.endContainer,d,v)==-1,B=this.cloneRange(),T,V;return C?(B.setStartAndEnd(this.startContainer,this.startOffset,d,v),T=-B.text(u).length):(B.setStartAndEnd(d,v,this.startContainer,this.startOffset),T=B.text(u).length),V=T+this.text(u).length,{start:T,end:V}}),findText:E(function(a,c,u){u=mt(u,Lt),u.wholeWordsOnly&&(u.wordOptions.includeTrailingSpace=!1);var d=It(u.direction),v=u.withinRange;v||(v=r.createRange(),v.selectNodeContents(this.getDocument()));var C=c,B=!1;typeof C=="string"?u.caseSensitive||(C=C.toLowerCase()):B=!0;var T=a.getRangeBoundaryPosition(this,!d),V=v.comparePoint(T.node,T.offset);V===-1?T=a.getRangeBoundaryPosition(v,!0):V===1&&(T=a.getRangeBoundaryPosition(v,!1));for(var A=T,U=!1,j;;)if(j=m(A,C,B,v,u),j){if(j.valid)return this.setStartAndEnd(j.startPos.node,j.startPos.offset,j.endPos.node,j.endPos.offset),!0;A=d?j.startPos:j.endPos}else if(u.wrap&&!U)v=v.cloneRange(),A=a.getRangeBoundaryPosition(v,!d),v.setBoundary(T.node,T.offset,d),U=!0;else return!1}),pasteHtml:function(a){if(this.deleteContents(),a){var c=this.createContextualFragment(a),u=c.lastChild;this.insertNode(c),this.collapseAfter(u)}}});function be(a){return E(function(c,u){var d=!1;return this.changeEachRange(function(v){d=v[a](u)||d}),d})}Y(r.selectionPrototype,{expand:E(function(a,c,u){this.changeEachRange(function(d){d.expand(c,u)})}),move:E(function(a,c,u,d){var v=0;if(this.focusNode){this.collapse(this.focusNode,this.focusOffset);var C=this.getRangeAt(0);d||(d={}),d.characterOptions=Re(d.characterOptions,At),v=C.move(c,u,d),this.setSingleRange(C)}return v}),trimStart:be("trimStart"),trimEnd:be("trimEnd"),trim:be("trim"),selectCharacters:E(function(a,c,u,d,v,C){var B=r.createRange(c);B.selectCharacters(c,u,d,C),this.setSingleRange(B,v)}),saveCharacterRanges:E(function(a,c,u){for(var d=this.getAllRanges(),v=d.length,C=[],B=v==1&&this.isBackward(),T=0,V=d.length;T<V;++T)C[T]={characterRange:d[T].toCharacterRange(c,u),backward:B,characterOptions:u};return C}),restoreCharacterRanges:E(function(a,c,u){this.removeAllRanges();for(var d=0,v=u.length,C,B,T;d<v;++d)B=u[d],T=B.characterRange,C=r.createRange(c),C.selectCharacters(c,T.start,T.end,B.characterOptions),this.addRange(C,B.backward)}),text:E(function(a,c){for(var u=[],d=0,v=this.rangeCount;d<v;++d)u[d]=this.getRangeAt(d).text(c);return u.join("")})}),r.innerText=function(a,c){var u=r.createRange(a);u.selectNodeContents(a);var d=u.text(c);return d},r.createWordIterator=function(a,c,u){var d=re();u=mt(u,Zt);var v=d.getPosition(a,c),C=Ae(v,u.characterOptions,u.wordOptions),B=It(u.direction);return{next:function(){return B?C.previousStartToken():C.nextEndToken()},dispose:function(){C.dispose(),this.next=function(){}}}},r.noMutation=function(a){var c=re();a(c),he()},r.noMutation.createEntryPointFunction=E,r.textRange={isBlockNode:Ht,isCollapsedWhitespaceNode:pe,createPosition:E(function(a,c,u){return a.getPosition(c,u)})}}),t})})(Us);class sr{constructor(e,t){this.current=this.previous=this.nextNode=this.root=e,this.iteratorFunc=this[t||"getNext"]}[Symbol.iterator](){return this}getNextTextNode(){let e;for(;e=this.getNext();)if(e.nodeType===xe&&e.data!=="")return e}getPreviousTextNode(){let e;for(;e=this.getPrevious();)if(e.nodeType===xe&&e.data!=="")return e}next(){const e=this.iteratorFunc();return e?{value:e}:{done:!0}}getNext(){let e=this.current=this.nextNode,t=this.nextNode=void 0;if(this.current)if(t=e.firstChild,t&&e.getAttribute("data-editable")!=="remove")this.nextNode=t;else for(;e!==this.root&&!(this.nextNode=e.nextSibling);)e=e.parentNode;return this.current}getPrevious(){let e=this.current=this.previous,t=this.previous=void 0;if(this.current)if(t=e.lastChild,t&&e.getAttribute("data-editable")!=="remove")this.previous=t;else for(;e!==this.root&&!(this.previous=e.previousSibling);)e=e.parentNode;return this.current}replaceCurrent(e){this.current=e,this.nextNode=void 0,this.previous=void 0;let t=this.current;for(;t!==this.root&&!(this.nextNode=t.nextSibling);)t=t.parentNode}}var Bt={extractText(n){let e="";return Gs(n,t=>{e+=t}),e},highlightMatches(n,e){if(!e||e.length===0)return;const t=new sr(n);let r=0,i=0,l=e[r],p=[],w,S,Q;for(;w=t.getNext();){if(w.nodeType===xe&&w.data!=="")Q=w;else if(w.nodeType===ot&&w.nodeName==="BR"){i+=1;continue}else continue;const Y=Q.data;let Re=i+Y.length;if(l.startIndex<Re&&i<l.endIndex){const Pe=i<=l.startIndex,$e=Re>=l.endIndex;Pe&&(S=l.id||l.startIndex);let De;Pe?De=l.startIndex-i:De=0;let et;$e?et=l.endIndex-i-De:et=Y.length-De;const Qe={element:Q,text:Y.substring(De,De+et),offset:De,length:et,isLastPortion:$e,wordId:S};if(p.push(Qe),$e){const dt=this.wrapMatch(p,l.marker,l.title);t.replaceCurrent(dt),Re=i+Qe.length+Qe.offset,p=[],r+=1,r<e.length&&(l=e[r])}}i=Re}},wrapMatch(n,e,t){return n.map(r=>this.wrapPortion(r,e,t)).pop()},wrapPortion(n,e,t){const r=Xe.createRange();r.setStart(n.element,n.offset),r.setEnd(n.element,n.offset+n.length);const i=e.cloneNode(!0);if(i.setAttribute("data-word-id",n.wordId),t&&i.setAttribute("title",t),r.surroundContents(i),i.nextSibling){const l=i.nextSibling;l.nodeType===xe&&l.data===""&&l.remove()}return i}};function Gs(n,e){const t=new sr(n);let r;for(;r=t.getNext();)r.nodeType===xe&&r.data!==""?e(r.data):r.nodeType===ot&&r.nodeName==="BR"&&e(`
`)}class wi{constructor(e,t="word"){this.marker=e,this.matchMode=t}isElement(e){var t;try{return e?e instanceof((t=e.ownerDocument)==null?void 0:t.defaultView.HTMLElement):!1}catch{return typeof e=="object"&&e.nodeType===1&&typeof e.style=="object"&&typeof e.ownerDocument=="object"}}findMatches(e,t){if(!(!e||e===""||!this.isElement(this.marker))&&t&&t.length>0)return this.searchMatches(e,t)}searchMatches(e,t){const i=(this.matchMode==="word"?Qs:Ks)(t);return[...e.matchAll(i)].map(p=>this.prepareMatch(p))}prepareMatch(e){let t,r;return this.matchMode==="word"?(t=e.index+e[1].length,r=e[2]):(t=e.index,r=e[0]),{startIndex:t,endIndex:t+r.length,match:r,marker:this.marker}}}function Ks(n){const t=`(${(n||[]).map(r=>Si(r)).join("|")})`;return new RegExp(t,"g")}const Nr="\\u0041-\\u005A\\u0061-\\u007A\\u0030-\\u0039\\u00AA\\u00B5\\u00BA\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u00FF\\u0100-\\u017F\\u0180-\\u024F";function Qs(n){const e=(n||[]).map(r=>Si(r)),t=`([^${Nr}]|^)(${e.join("|")})(?=[^${Nr}]|$)`;return new RegExp(t,"g")}function Si(n){return String(n).replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1")}function Ys(n,e){return ln(n,"[data-editable]:not([data-word-id])")===e}const st={highlightText(n,e,t,r){if(this.hasHighlight(n,t))return;const i=Bt.extractText(n),l=`<span class="highlight-${r}"></span>`,p=st.createMarkerNode(l,r,this.win),S=new wi(p,"text").findMatches(i,[e]);if(S&&S.length)return t&&(S[0].id=t),Bt.highlightMatches(n,S),S[0].startIndex},highlightRange(n,e,t,r,i,l="comment"){this.hasHighlight(n,e)&&this.removeHighlight(n,e);const p=Xe.createRange();if(p.selectCharacters(n,t,r),!Ys(p.commonAncestorContainer,n))return-1;const w=st.createMarkerNode(`<span class="highlight-${l}" data-word-id="${e}"></span>`,l,this.win),S=p.extractContents();return w.appendChild(S),p.deleteContents(),p.insertNode(w),st.cleanupStaleMarkerNodes(n,"comment"),i&&i.notify("change",n),t},updateHighlight(n,e,t,r){if(!document.documentElement.classList)return;const i=n.querySelectorAll(`[data-word-id="${e}"]`);for(const l of i)r&&l.classList.remove(r),t&&l.classList.add(t)},removeHighlight(n,e,t){const r=n.querySelectorAll(`[data-word-id="${e}"]`);for(const i of r)Ct(i),n.normalize(),t&&t.notify("change",n)},hasHighlight(n,e){return!!n.querySelectorAll(`[data-word-id="${e}"]`).length},extractHighlightedRanges(n,e){let t="[data-word-id]";e&&(t+=`[data-highlight="${e}"]`);const r=n.querySelectorAll(t);if(!r.length)return;const i={};for(const p of r){const w=p.getAttribute("data-word-id");i[w]||(i[w]=n.querySelectorAll(`[data-word-id="${w}"]`))}const l={};for(const p in i){const w=this.extractMarkerNodePosition(n,i[p]);w&&(l[p]=w)}return l},extractMarkerNodePosition(n,e){const t=Xe.createRange();e.length>1?(t.setStartBefore(e[0]),t.setEndAfter(e[e.length-1])):t.selectNode(e[0]);const r=t.toCharacterRange(n);return{start:r.start,end:r.end,text:t.text(),nativeRange:t.nativeRange}},cleanupStaleMarkerNodes(n,e){const t=n.querySelectorAll(`span[data-highlight="${e}"]`);for(const r of t)r.textContent.length||r.remove()},createMarkerNode(n,e,t){const r=$r(n,t);return r.setAttribute("data-editable","ui-unwrap"),r.setAttribute("data-highlight",e),r}};class Ni extends ze{constructor(){super(...arguments);delete this.isCursor,this.isSelection=!0}text(){return this.range.toString()}html(){return this.range.toHtml()}isAllSelected(){return hn(this.host,this.range.startContainer,this.range.startOffset)&&dn(this.host,this.range.endContainer,this.range.endOffset)}getTextRange(){return this.range.toCharacterRange(this.host)}toString(){return this.range.toString()}isWrappable(){return pn(this.range)}getRects(){return this.range.nativeRange.getClientRects()}link(e,t={}){e&&(t.href=e);const r=this.createElement(Z.linkMarkup.name,Z.linkMarkup.attribs);for(const i in t){const l=t[i];l!==void 0&&(l===null?r.removeAttribute(i):r.setAttribute(i,l))}Z.linkMarkup.trim&&this.trimRange(),this.forceWrap(r)}trimRange(){const e=this.range.toString(),t=e.search(/\S|$/),r=e.search(/\S[\s]+$/),i=r===-1?0:e.length-(r+1);this.range.setStart(this.range.startContainer,this.range.startOffset+t),this.range.setEnd(this.range.endContainer,this.range.endOffset-i)}unlink(){this.removeFormatting(Z.linkMarkup.name)}toggleLink(e,t){const r=this.getTagsByName(Z.linkMarkup.name);if(r.length>=1){const i=r[0];this.isExactSelection(i,"visible")?this.unlink():this.expandTo(i)}else this.link(e,t)}highlight({highlightId:e}){const t=this.textBefore(),r=this.text(),i='<span class="highlight-comment"></span>',l=st.createMarkerNode(i,this.win);l.setAttribute("data-match",r);const p={startIndex:t.length,endIndex:t.length+r.length,match:r,marker:l};Bt.highlightMatches(this.host,[p])}toggle(e){e=this.adoptElement(e),this.range=ri(this.host,this.range,e),this.setSelection()}toggleCustom({tagName:e,attributes:t,trim:r=!1}){const i=this.createElement(e,t);r&&this.trimRange(),this.toggle(i)}makeCustom({tagName:e,attributes:t,trim:r=!1}){const i=this.createElement(e,t);r&&this.trimRange(),this.forceWrap(i)}makeBold(){const e=this.createElement(Z.boldMarkup.name,Z.boldMarkup.attribs);Z.boldMarkup.trim&&this.trimRange(),this.forceWrap(e)}toggleBold(){const e=this.createElement(Z.boldMarkup.name,Z.boldMarkup.attribs);Z.boldMarkup.trim&&this.trimRange(),this.toggle(e)}giveEmphasis(){const e=this.createElement(Z.italicMarkup.name,Z.italicMarkup.attribs);Z.italicMarkup.trim&&this.trimRange(),this.forceWrap(e)}toggleEmphasis(){const e=this.createElement(Z.italicMarkup.name,Z.italicMarkup.attribs);Z.italicMarkup.trim&&this.trimRange(),this.toggle(e)}makeUnderline(){const e=this.createElement(Z.underlineMarkup.name,Z.underlineMarkup.attribs);Z.underlineMarkup.trim&&this.trimRange(),this.forceWrap(e)}toggleUnderline(){const e=this.createElement(Z.underlineMarkup.name,Z.underlineMarkup.attribs);Z.underlineMarkup.trim&&this.trimRange(),this.toggle(e)}insertCharacter(e){const t=this.deleteContent(),r=t.createTextNode(e);return t.insertBefore(r),t.setSelection(),t}surround(e,t){this.range=ai(this.host,this.range,e,t),this.setSelection()}removeSurround(e,t){this.range=jt(this.host,this.range,e),this.range=jt(this.host,this.range,t),this.setSelection()}removeChars(e=[]){for(let t=0;t<e.length;t++){const r=e[t];this.range=jt(this.host,this.range,r)}this.setSelection()}toggleSurround(e,t){this.containsString(e)&&this.containsString(t)?this.removeSurround(e,t):this.surround(e,t)}removeFormatting(e){this.range=oi(this.host,this.range,e),this.setSelection()}deleteContent(){return this.range.deleteContents(),new ze(this.host,this.range)}expandTo(e){this.range=ni(this.host,this.range,e),this.setSelection()}collapseAtBeginning(e){return this.range.collapse(!0),this.setSelection(),new ze(this.host,this.range)}collapseAtEnd(e){return this.range.collapse(!1),this.setSelection(),new ze(this.host,this.range)}forceWrap(e){e=this.adoptElement(e),this.range=er(this.host,this.range,e),this.setSelection()}isExactSelection(e,t){return Jn(this.range,e,t)}containsString(e){return rr(this.range,e)}deleteCharacter(e){this.range=jt(this.host,this.range,e),this.setSelection()}}class an{constructor(e,t){this.host=e&&e.jquery?e[0]:e,this.range=t,this.isAnythingSelected=t!==void 0,this.isCursor=this.isAnythingSelected&&t.collapsed,this.isSelection=this.isAnythingSelected&&!this.isCursor}getCursor(){if(this.isCursor)return new ze(this.host,this.range)}getSelection(){if(this.isSelection)return new Ni(this.host,this.range)}forceCursor(){return this.isSelection?this.getSelection().deleteContent():this.getCursor()}isDifferentFrom(e=new an){const t=this.range,r=e.range;return t&&r?!t.equals(r):!(!t&&!r)}}class Xs{constructor(e,t){this.dispatcher=e,this.win=t||window,this.rangySelection=void 0,this.currentSelection=void 0,this.currentRange=void 0}syncSelection(){try{this.rangySelection=Xe.getSelection(this.win)}catch{return!1}return!0}getRangeContainer(){const e=this.syncSelection();if(this.rangySelection.rangeCount&&e){const t=this.rangySelection.getRangeAt(0),r=zn(t.commonAncestorContainer);if(r)return new an(r,t)}return new an}getFreshRange(){return this.getRangeContainer()}getFreshSelection(){const e=this.getRangeContainer();return e.isCursor?e.getCursor(this.win):e.getSelection(this.win)}getSelection(){return this.currentSelection}forceCursor(){return this.getRangeContainer().forceCursor()}selectionChanged(){const e=this.getRangeContainer();if(e.isDifferentFrom(this.currentRange)){const t=this.currentSelection;this.currentRange=e,t&&(t.isCursor&&!this.currentRange.isCursor?this.dispatcher.notify("cursor",t.host):t.isSelection&&!this.currentRange.isSelection&&this.dispatcher.notify("selection",t.host)),this.currentRange.isCursor?(this.currentSelection=new ze(this.currentRange.host,this.currentRange.range),this.dispatcher.notify("cursor",this.currentSelection.host,this.currentSelection)):this.currentRange.isSelection?(this.currentSelection=new Ni(this.currentRange.host,this.currentRange.range),this.dispatcher.notify("selection",this.currentSelection.host,this.currentSelection)):this.currentSelection=void 0}}}class kt{constructor(e){yi(this),this.selectionWatcher=e}dispatchKeyEvent(e,t,r){switch(e.keyCode){case this.key.left:return this.notify(t,"left",e);case this.key.right:return this.notify(t,"right",e);case this.key.up:return this.notify(t,"up",e);case this.key.down:return this.notify(t,"down",e);case this.key.tab:return e.shiftKey?this.notify(t,"shiftTab",e):this.notify(t,"tab",e);case this.key.esc:return this.notify(t,"esc",e);case this.key.backspace:return this.preventContenteditableBug(t,e),this.notify(t,"backspace",e);case this.key.delete:return this.preventContenteditableBug(t,e),this.notify(t,"delete",e);case this.key.enter:return e.shiftKey?this.notify(t,"shiftEnter",e):this.notify(t,"enter",e);case this.key.ctrl:case this.key.shift:case this.key.alt:return;case 224:case 17:case 91:case 93:return;default:if(e.keyCode===this.key.b&&(e.ctrlKey||e.metaKey))return this.notify(t,"bold",e);if(e.keyCode===this.key.i&&(e.ctrlKey||e.metaKey))return this.notify(t,"italic",e);if(this.preventContenteditableBug(t,e),!r)return;if(!e.ctrlKey&&!e.metaKey)return this.notify(t,"character",e)}}preventContenteditableBug(e,t){if(!zs||t.ctrlKey||t.metaKey)return;const r=this.selectionWatcher.getFreshRange();if(!r.isSelection)return;const i=kt.getNodeToRemove(r.range,e);i&&i.remove()}static getNodeToRemove(e,t){if(e.startOffset!==0)return;let r=e.startContainer;if(r.nodeType===xe&&(r=r.parentNode),r===t)return;const i=Xe.createRange();if(i.setStartBefore(r.firstChild),i.setEndAfter(r.lastChild),i.containsRange(e))return;if(e.startContainer.nodeType===xe){const p=[xe,ot];let w=r.firstChild;do if(p.indexOf(w.nodeType)!==-1)break;while(w=w.nextSibling);if(w!==e.startContainer)return}const l=e.cloneRange();return l.setStartBefore(r),kt.getNodeToRemove(l,t)||r}}kt.key=kt.prototype.key={left:37,up:38,right:39,down:40,tab:9,esc:27,backspace:8,delete:46,enter:13,shift:16,ctrl:17,alt:18,b:66,i:73};let rn=!1;class Zs{constructor(e){const t=e.win;yi(this,e),this.supportsInputEvent=!1,this.document=t.document,this.config=e.config,this.editable=e,this.editableSelector=e.editableSelector,this.selectionWatcher=new Xs(this,t),this.keyboard=new kt(this.selectionWatcher),this.activeListeners=[],this.setup(),this.getEditableBlockByEvent=r=>ln(r.target,e.editableSelector)}setupDocumentListener(e,t,r=!1){const i={event:e,listener:t.bind(this),capture:r};return this.activeListeners.push(i),this.document.addEventListener(e,i.listener,r),this}setup(){this.setupKeyboardEvents(),this.setupEventListeners()}unload(){this.off();for(const e of this.activeListeners)this.document.removeEventListener(e.event,e.listener,e.capture);this.activeListeners.length=0}suspend(){if(!this.suspended){this.suspended=!0;for(const e of this.activeListeners)this.document.removeEventListener(e.event,e.listener,e.capture);this.activeListeners.length=0}}continue(){!this.suspended||(this.suspended=!1,this.setupEventListeners())}setupEventListeners(){this.setupElementListeners(),this.setupKeydownListener(),js?this.setupSelectionChangeListeners():this.setupSelectionChangeFallbackListeners()}setupElementListeners(){this.setupDocumentListener("focus",function(t){const r=this.getEditableBlockByEvent(t);!r||t.target.getAttribute(Z.pastingAttribute)||(this.selectionWatcher.syncSelection(),this.notify("focus",r))},!0).setupDocumentListener("blur",function(t){const r=this.getEditableBlockByEvent(t);!r||r.getAttribute(Z.pastingAttribute)||this.notify("blur",r)},!0).setupDocumentListener("copy",function(t){const r=this.getEditableBlockByEvent(t);if(!r)return;const i=this.selectionWatcher.getFreshSelection();i&&i.isSelection&&this.notify("clipboard",r,"copy",i)}).setupDocumentListener("cut",function(t){const r=this.getEditableBlockByEvent(t);if(!r)return;const i=this.selectionWatcher.getFreshSelection();i&&i.isSelection&&(this.notify("clipboard",r,"cut",i),this.triggerChangeEvent(r))}).setupDocumentListener("paste",function(t){const r=this.getEditableBlockByEvent(t);if(!r)return;t.preventDefault();const i=this.selectionWatcher.getFreshSelection(),l=t.clipboardData.getData("text/html")||t.clipboardData.getData("text/plain"),{blocks:p,cursor:w}=Es(r,i,l);p.length?(Qi(t.target.innerText)?(r.innerHTML=Ki(r.innerHTML,"&nbsp;"," "),this.notify("paste",r,p,this.editable.createCursorAtEnd(r))):this.notify("paste",r,p,w),this.notify("change",r)):w.setVisibleSelection()}).setupDocumentListener("input",function(t){const r=this.getEditableBlockByEvent(t);!r||(rn?this.notify("change",r):rn=!0)}).setupDocumentListener("formatEditable",function(t){const r=this.getEditableBlockByEvent(t);!r||this.notify("change",r)})}triggerChangeEvent(e){rn||this.notify("change",e)}dispatchSwitchEvent(e,t,r){if(e.altKey||e.ctrlKey||e.metaKey||e.shiftKey)return;const i=this.selectionWatcher.getFreshSelection();!i||i.isSelection||(this.switchContext?this.switchContext.events=["cursor"]:this.switchContext={positionX:i.getBoundingClientRect().left,events:["cursor"]},r==="up"&&i.isAtFirstLine()&&(e.preventDefault(),e.stopPropagation(),this.switchContext.events=["switch","blur","focus","cursor"],this.notify("switch",t,r,i)),r==="down"&&i.isAtLastLine()&&(e.preventDefault(),e.stopPropagation(),this.switchContext.events=["switch","blur","focus","cursor"],this.notify("switch",t,r,i)))}setupKeydownListener(){this.setupDocumentListener("keydown",function(e){const t=this.getEditableBlockByEvent(e);if(!t)return;const r=!rn;this.keyboard.dispatchKeyEvent(e,t,r)},!0)}setupKeyboardEvents(){const e=this;this.keyboard.on("up",function(t){e.dispatchSwitchEvent(t,this,"up")}).on("down",function(t){e.dispatchSwitchEvent(t,this,"down")}).on("backspace",function(t){const r=e.selectionWatcher.getFreshRange();if(!r.isCursor)return e.triggerChangeEvent(this);const i=r.getCursor();if(!i.isAtBeginning())return e.triggerChangeEvent(this);t.preventDefault(),t.stopPropagation(),e.notify("merge",this,"before",i)}).on("delete",function(t){const r=e.selectionWatcher.getFreshRange();if(!r.isCursor)return e.triggerChangeEvent(this);const i=r.getCursor();if(!i.isAtTextEnd())return e.triggerChangeEvent(this);t.preventDefault(),t.stopPropagation(),e.notify("merge",this,"after",i)}).on("enter",function(t){t.preventDefault(),t.stopPropagation();const i=e.selectionWatcher.getFreshRange().forceCursor();i.isAtTextEnd()?e.notify("insert",this,"after",i):i.isAtBeginning()?e.notify("insert",this,"before",i):e.notify("split",this,i.before(),i.after(),i)}).on("shiftEnter",function(t){t.preventDefault(),t.stopPropagation();const r=e.selectionWatcher.forceCursor();e.notify("newline",this,r)}).on("bold",function(t){t.preventDefault(),t.stopPropagation();const r=e.selectionWatcher.getFreshSelection();r.isSelection&&e.notify("toggleBold",r)}).on("italic",function(t){t.preventDefault(),t.stopPropagation();const r=e.selectionWatcher.getFreshSelection();r.isSelection&&e.notify("toggleEmphasis",r)}).on("character",function(t){e.notify("change",this)})}setupSelectionChangeListeners(){let e=!1,t=!1;const r=this.selectionWatcher;this.setupDocumentListener("selectionchange",i=>{const l=this.selectionWatcher.getFreshSelection();l&&l.isSelection&&l.isAtBeginning()&&l.isAtEnd()?this.notify("selectToBoundary",l.host,i,"both"):l&&l.isSelection&&l.isAtBeginning()?this.notify("selectToBoundary",l.host,i,"start"):l&&l.isSelection&&l.isAtEnd()&&this.notify("selectToBoundary",l.host,i,"end"),t?e=!0:r.selectionChanged()}),this.setupDocumentListener("mousedown",function(i){!this.getEditableBlockByEvent(i)||(this.config.mouseMoveSelectionChanges===!1&&(t=!0,setTimeout(()=>r.selectionChanged(),0)),this.document.addEventListener("mouseup",()=>{t=!1,e&&(e=!1,r.selectionChanged())},{capture:!0,once:!0}))})}setupSelectionChangeFallbackListeners(){this.setupDocumentListener("mouseup",()=>{setTimeout(()=>this.selectionWatcher.selectionChanged(),0)}),this.setupDocumentListener("keyup",e=>{!this.getEditableBlockByEvent(e)||this.selectionWatcher.selectionChanged()})}}function Js(){this.__data__=[],this.size=0}function mn(n,e){return n===e||n!==n&&e!==e}function vn(n,e){for(var t=n.length;t--;)if(mn(n[t][0],e))return t;return-1}var eo=Array.prototype,to=eo.splice;function no(n){var e=this.__data__,t=vn(e,n);if(t<0)return!1;var r=e.length-1;return t==r?e.pop():to.call(e,t,1),--this.size,!0}function ro(n){var e=this.__data__,t=vn(e,n);return t<0?void 0:e[t][1]}function io(n){return vn(this.__data__,n)>-1}function so(n,e){var t=this.__data__,r=vn(t,n);return r<0?(++this.size,t.push([n,e])):t[r][1]=e,this}function ht(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}ht.prototype.clear=Js;ht.prototype.delete=no;ht.prototype.get=ro;ht.prototype.has=io;ht.prototype.set=so;function oo(){this.__data__=new ht,this.size=0}function ao(n){var e=this.__data__,t=e.delete(n);return this.size=e.size,t}function co(n){return this.__data__.get(n)}function uo(n){return this.__data__.has(n)}var lo=typeof global=="object"&&global&&global.Object===Object&&global,Ri=lo,fo=typeof self=="object"&&self&&self.Object===Object&&self,ho=Ri||fo||Function("return this")(),Mt=ho,go=Mt.Symbol,cn=go,Ei=Object.prototype,po=Ei.hasOwnProperty,mo=Ei.toString,$t=cn?cn.toStringTag:void 0;function vo(n){var e=po.call(n,$t),t=n[$t];try{n[$t]=void 0;var r=!0}catch{}var i=mo.call(n);return r&&(e?n[$t]=t:delete n[$t]),i}var Co=Object.prototype,bo=Co.toString;function yo(n){return bo.call(n)}var wo="[object Null]",So="[object Undefined]",Rr=cn?cn.toStringTag:void 0;function Cn(n){return n==null?n===void 0?So:wo:Rr&&Rr in Object(n)?vo(n):yo(n)}function Et(n){var e=typeof n;return n!=null&&(e=="object"||e=="function")}var No="[object AsyncFunction]",Ro="[object Function]",Eo="[object GeneratorFunction]",To="[object Proxy]";function or(n){if(!Et(n))return!1;var e=Cn(n);return e==Ro||e==Eo||e==No||e==To}var xo=Mt["__core-js_shared__"],Tn=xo,Er=function(){var n=/[^.]+$/.exec(Tn&&Tn.keys&&Tn.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function Ao(n){return!!Er&&Er in n}var Oo=Function.prototype,Bo=Oo.toString;function _o(n){if(n!=null){try{return Bo.call(n)}catch{}try{return n+""}catch{}}return""}var ko=/[\\^$.*+?()[\]{}|]/g,Mo=/^\[object .+?Constructor\]$/,Po=Function.prototype,Do=Object.prototype,Io=Po.toString,Lo=Do.hasOwnProperty,Fo=RegExp("^"+Io.call(Lo).replace(ko,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Wo(n){if(!Et(n)||Ao(n))return!1;var e=or(n)?Fo:Mo;return e.test(_o(n))}function Ho(n,e){return n==null?void 0:n[e]}function ar(n,e){var t=Ho(n,e);return Wo(t)?t:void 0}var $o=ar(Mt,"Map"),Ti=$o,Vo=ar(Object,"create"),Qt=Vo;function jo(){this.__data__=Qt?Qt(null):{},this.size=0}function zo(n){var e=this.has(n)&&delete this.__data__[n];return this.size-=e?1:0,e}var qo="__lodash_hash_undefined__",Uo=Object.prototype,Go=Uo.hasOwnProperty;function Ko(n){var e=this.__data__;if(Qt){var t=e[n];return t===qo?void 0:t}return Go.call(e,n)?e[n]:void 0}var Qo=Object.prototype,Yo=Qo.hasOwnProperty;function Xo(n){var e=this.__data__;return Qt?e[n]!==void 0:Yo.call(e,n)}var Zo="__lodash_hash_undefined__";function Jo(n,e){var t=this.__data__;return this.size+=this.has(n)?0:1,t[n]=Qt&&e===void 0?Zo:e,this}function Rt(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}Rt.prototype.clear=jo;Rt.prototype.delete=zo;Rt.prototype.get=Ko;Rt.prototype.has=Xo;Rt.prototype.set=Jo;function ea(){this.size=0,this.__data__={hash:new Rt,map:new(Ti||ht),string:new Rt}}function ta(n){var e=typeof n;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?n!=="__proto__":n===null}function bn(n,e){var t=n.__data__;return ta(e)?t[typeof e=="string"?"string":"hash"]:t.map}function na(n){var e=bn(this,n).delete(n);return this.size-=e?1:0,e}function ra(n){return bn(this,n).get(n)}function ia(n){return bn(this,n).has(n)}function sa(n,e){var t=bn(this,n),r=t.size;return t.set(n,e),this.size+=t.size==r?0:1,this}function Pt(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}Pt.prototype.clear=ea;Pt.prototype.delete=na;Pt.prototype.get=ra;Pt.prototype.has=ia;Pt.prototype.set=sa;var oa=200;function aa(n,e){var t=this.__data__;if(t instanceof ht){var r=t.__data__;if(!Ti||r.length<oa-1)return r.push([n,e]),this.size=++t.size,this;t=this.__data__=new Pt(r)}return t.set(n,e),this.size=t.size,this}function Dt(n){var e=this.__data__=new ht(n);this.size=e.size}Dt.prototype.clear=oo;Dt.prototype.delete=ao;Dt.prototype.get=co;Dt.prototype.has=uo;Dt.prototype.set=aa;var ca=function(){try{var n=ar(Object,"defineProperty");return n({},"",{}),n}catch{}}(),un=ca;function cr(n,e,t){e=="__proto__"&&un?un(n,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):n[e]=t}function Fn(n,e,t){(t!==void 0&&!mn(n[e],t)||t===void 0&&!(e in n))&&cr(n,e,t)}function ua(n){return function(e,t,r){for(var i=-1,l=Object(e),p=r(e),w=p.length;w--;){var S=p[n?w:++i];if(t(l[S],S,l)===!1)break}return e}}var la=ua(),fa=la,xi=typeof Ze=="object"&&Ze&&!Ze.nodeType&&Ze,Tr=xi&&typeof Je=="object"&&Je&&!Je.nodeType&&Je,ha=Tr&&Tr.exports===xi,xr=ha?Mt.Buffer:void 0,Ar=xr?xr.allocUnsafe:void 0;function da(n,e){if(e)return n.slice();var t=n.length,r=Ar?Ar(t):new n.constructor(t);return n.copy(r),r}var ga=Mt.Uint8Array,Or=ga;function pa(n){var e=new n.constructor(n.byteLength);return new Or(e).set(new Or(n)),e}function ma(n,e){var t=e?pa(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.length)}function va(n,e){var t=-1,r=n.length;for(e||(e=Array(r));++t<r;)e[t]=n[t];return e}var Br=Object.create,Ca=function(){function n(){}return function(e){if(!Et(e))return{};if(Br)return Br(e);n.prototype=e;var t=new n;return n.prototype=void 0,t}}(),ba=Ca;function ya(n,e){return function(t){return n(e(t))}}var wa=ya(Object.getPrototypeOf,Object),Ai=wa,Sa=Object.prototype;function Oi(n){var e=n&&n.constructor,t=typeof e=="function"&&e.prototype||Sa;return n===t}function Na(n){return typeof n.constructor=="function"&&!Oi(n)?ba(Ai(n)):{}}function Yt(n){return n!=null&&typeof n=="object"}var Ra="[object Arguments]";function _r(n){return Yt(n)&&Cn(n)==Ra}var Bi=Object.prototype,Ea=Bi.hasOwnProperty,Ta=Bi.propertyIsEnumerable,xa=_r(function(){return arguments}())?_r:function(n){return Yt(n)&&Ea.call(n,"callee")&&!Ta.call(n,"callee")},Wn=xa,Aa=Array.isArray,Hn=Aa,Oa=9007199254740991;function _i(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=Oa}function ur(n){return n!=null&&_i(n.length)&&!or(n)}function Ba(n){return Yt(n)&&ur(n)}function _a(){return!1}var ki=typeof Ze=="object"&&Ze&&!Ze.nodeType&&Ze,kr=ki&&typeof Je=="object"&&Je&&!Je.nodeType&&Je,ka=kr&&kr.exports===ki,Mr=ka?Mt.Buffer:void 0,Ma=Mr?Mr.isBuffer:void 0,Pa=Ma||_a,Mi=Pa,Da="[object Object]",Ia=Function.prototype,La=Object.prototype,Pi=Ia.toString,Fa=La.hasOwnProperty,Wa=Pi.call(Object);function Ha(n){if(!Yt(n)||Cn(n)!=Da)return!1;var e=Ai(n);if(e===null)return!0;var t=Fa.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&Pi.call(t)==Wa}var $a="[object Arguments]",Va="[object Array]",ja="[object Boolean]",za="[object Date]",qa="[object Error]",Ua="[object Function]",Ga="[object Map]",Ka="[object Number]",Qa="[object Object]",Ya="[object RegExp]",Xa="[object Set]",Za="[object String]",Ja="[object WeakMap]",ec="[object ArrayBuffer]",tc="[object DataView]",nc="[object Float32Array]",rc="[object Float64Array]",ic="[object Int8Array]",sc="[object Int16Array]",oc="[object Int32Array]",ac="[object Uint8Array]",cc="[object Uint8ClampedArray]",uc="[object Uint16Array]",lc="[object Uint32Array]",Ee={};Ee[nc]=Ee[rc]=Ee[ic]=Ee[sc]=Ee[oc]=Ee[ac]=Ee[cc]=Ee[uc]=Ee[lc]=!0;Ee[$a]=Ee[Va]=Ee[ec]=Ee[ja]=Ee[tc]=Ee[za]=Ee[qa]=Ee[Ua]=Ee[Ga]=Ee[Ka]=Ee[Qa]=Ee[Ya]=Ee[Xa]=Ee[Za]=Ee[Ja]=!1;function fc(n){return Yt(n)&&_i(n.length)&&!!Ee[Cn(n)]}function hc(n){return function(e){return n(e)}}var Di=typeof Ze=="object"&&Ze&&!Ze.nodeType&&Ze,Ut=Di&&typeof Je=="object"&&Je&&!Je.nodeType&&Je,dc=Ut&&Ut.exports===Di,xn=dc&&Ri.process,gc=function(){try{var n=Ut&&Ut.require&&Ut.require("util").types;return n||xn&&xn.binding&&xn.binding("util")}catch{}}(),Pr=gc,Dr=Pr&&Pr.isTypedArray,pc=Dr?hc(Dr):fc,Ii=pc;function $n(n,e){if(!(e==="constructor"&&typeof n[e]=="function")&&e!="__proto__")return n[e]}var mc=Object.prototype,vc=mc.hasOwnProperty;function Cc(n,e,t){var r=n[e];(!(vc.call(n,e)&&mn(r,t))||t===void 0&&!(e in n))&&cr(n,e,t)}function bc(n,e,t,r){var i=!t;t||(t={});for(var l=-1,p=e.length;++l<p;){var w=e[l],S=r?r(t[w],n[w],w,t,n):void 0;S===void 0&&(S=n[w]),i?cr(t,w,S):Cc(t,w,S)}return t}function yc(n,e){for(var t=-1,r=Array(n);++t<n;)r[t]=e(t);return r}var wc=9007199254740991,Sc=/^(?:0|[1-9]\d*)$/;function Li(n,e){var t=typeof n;return e=e==null?wc:e,!!e&&(t=="number"||t!="symbol"&&Sc.test(n))&&n>-1&&n%1==0&&n<e}var Nc=Object.prototype,Rc=Nc.hasOwnProperty;function Ec(n,e){var t=Hn(n),r=!t&&Wn(n),i=!t&&!r&&Mi(n),l=!t&&!r&&!i&&Ii(n),p=t||r||i||l,w=p?yc(n.length,String):[],S=w.length;for(var Q in n)(e||Rc.call(n,Q))&&!(p&&(Q=="length"||i&&(Q=="offset"||Q=="parent")||l&&(Q=="buffer"||Q=="byteLength"||Q=="byteOffset")||Li(Q,S)))&&w.push(Q);return w}function Tc(n){var e=[];if(n!=null)for(var t in Object(n))e.push(t);return e}var xc=Object.prototype,Ac=xc.hasOwnProperty;function Oc(n){if(!Et(n))return Tc(n);var e=Oi(n),t=[];for(var r in n)r=="constructor"&&(e||!Ac.call(n,r))||t.push(r);return t}function Fi(n){return ur(n)?Ec(n,!0):Oc(n)}function Bc(n){return bc(n,Fi(n))}function _c(n,e,t,r,i,l,p){var w=$n(n,t),S=$n(e,t),Q=p.get(S);if(Q){Fn(n,t,Q);return}var Y=l?l(w,S,t+"",n,e,p):void 0,Re=Y===void 0;if(Re){var Pe=Hn(S),$e=!Pe&&Mi(S),De=!Pe&&!$e&&Ii(S);Y=S,Pe||$e||De?Hn(w)?Y=w:Ba(w)?Y=va(w):$e?(Re=!1,Y=da(S,!0)):De?(Re=!1,Y=ma(S,!0)):Y=[]:Ha(S)||Wn(S)?(Y=w,Wn(w)?Y=Bc(w):(!Et(w)||or(w))&&(Y=Na(S))):Re=!1}Re&&(p.set(S,Y),i(Y,S,r,l,p),p.delete(S)),Fn(n,t,Y)}function Wi(n,e,t,r,i){n!==e&&fa(e,function(l,p){if(i||(i=new Dt),Et(l))_c(n,e,p,t,Wi,r,i);else{var w=r?r($n(n,p),l,p+"",n,e,i):void 0;w===void 0&&(w=l),Fn(n,p,w)}},Fi)}function Hi(n){return n}function kc(n,e,t){switch(t.length){case 0:return n.call(e);case 1:return n.call(e,t[0]);case 2:return n.call(e,t[0],t[1]);case 3:return n.call(e,t[0],t[1],t[2])}return n.apply(e,t)}var Ir=Math.max;function Mc(n,e,t){return e=Ir(e===void 0?n.length-1:e,0),function(){for(var r=arguments,i=-1,l=Ir(r.length-e,0),p=Array(l);++i<l;)p[i]=r[e+i];i=-1;for(var w=Array(e+1);++i<e;)w[i]=r[i];return w[e]=t(p),kc(n,this,w)}}function Pc(n){return function(){return n}}var Dc=un?function(n,e){return un(n,"toString",{configurable:!0,enumerable:!1,value:Pc(e),writable:!0})}:Hi,Ic=Dc,Lc=800,Fc=16,Wc=Date.now;function Hc(n){var e=0,t=0;return function(){var r=Wc(),i=Fc-(r-t);if(t=r,i>0){if(++e>=Lc)return arguments[0]}else e=0;return n.apply(void 0,arguments)}}var $c=Hc(Ic),Vc=$c;function jc(n,e){return Vc(Mc(n,e,Hi),n+"")}function zc(n,e,t){if(!Et(t))return!1;var r=typeof e;return(r=="number"?ur(t)&&Li(e,t.length):r=="string"&&e in t)?mn(t[e],n):!1}function qc(n){return jc(function(e,t){var r=-1,i=t.length,l=i>1?t[i-1]:void 0,p=i>2?t[2]:void 0;for(l=n.length>3&&typeof l=="function"?(i--,l):void 0,p&&zc(t[0],t[1],p)&&(l=i<3?void 0:l,i=1),e=Object(e);++r<i;){var w=t[r];w&&n(e,w,r,l)}return e})}var Uc=qc(function(n,e,t){Wi(n,e,t)}),Gc=Uc;class Kc{constructor(e){this.spellcheckService=e}check(e,t){if(!e)return t(null);const r=Xr(e);this.spellcheckService(r,i=>{i&&i.length>0?t(null,i):t(null)})}}const Qc={A0:"no-break space","2000":"en quad","2001":"em quad","2002":"en space","2003":"em space","2004":"three-per-em space","2005":"four-per-em space","2006":"six-per-em space","2007":"figure space","2008":"punctuation space","2009":"thin space","200A":"hair space","202F":"narrow no-break space","205F":"medium mathematical space","3000":"ideographic space"},Yc="\\u2000-\\u200A\\u202F\\u205F\\u3000";class Xc{constructor(e){this.marker=e}findMatches(e){if(!e)return;let t=`[${Yc}]`;t=new RegExp(t,"g");const r=[];let i;for(;i=t.exec(e);)r.push(i);return r.map(l=>this.prepareMatch(l))}prepareMatch(e){const t=e.index,r=Zc(e[0]),i=Qc[r];return{startIndex:t,endIndex:t+e.length,match:e[0],title:`${i} (\\u${r})`,marker:this.marker}}}function Zc(n){return`${n.charCodeAt(0).toString(16).toUpperCase()}`}class Jc{constructor(){this.matches=[]}addMatches(e,t){!t||!t.length||(this.matches=eu(this.matches,t))}}function eu(n,e){let t;const r=n.length,i=e.length;let l=-1;const p=[],w={a1:n,i1:0,a2:e,i2:0};for(;w.i1<r||w.i2<i;)t=tu(w),t.startIndex>=l&&p.push(t),l=t.endIndex;return p}function tu(n){const e=n.i1,t=n.i2,r=n.a1[e],i=n.a2[t];return r&&i&&r.startIndex<i.startIndex?(n.i1=e+1,r):r&&i?(n.i2=t+1,i):r?(n.i1=e+1,r):i?(n.i2=t+1,i):void 0}class nu{constructor(e,t,r){this.editable=e,this.win=e.win,this.focusedEditableHost=void 0,this.currentlyCheckedEditableHost=void 0,this.timeout={};const i={checkOnInit:!1,checkOnFocus:!1,checkOnChange:!0,throttle:1e3,removeOnCorrection:!0,spellcheck:{marker:'<span class="highlight-spellcheck"></span>',throttle:1e3,spellcheckService:function(){}},whitespace:{marker:'<span class="highlight-whitespace"></span>'}};this.config=Gc({},i,t);const l=this.config.spellcheck.spellcheckService,p=this.config.spellcheck.marker,w=this.config.whitespace.marker,S=st.createMarkerNode(p,"spellcheck",this.win),Q=st.createMarkerNode(w,"spellcheck",this.win);this.spellcheckService=new Kc(l),this.spellcheck=new wi(S),this.whitespace=new Xc(Q),this.setupListeners()}setupListeners(){this.config.checkOnFocus&&(this.editable.on("focus",(...e)=>this.onFocus(...e)),this.editable.on("blur",(...e)=>this.onBlur(...e))),(this.config.checkOnChange||this.config.removeOnCorrection)&&this.editable.on("change",(...e)=>this.onChange(...e)),this.config.checkOnInit&&this.editable.on("init",(...e)=>this.onInit(...e))}onInit(e){this.highlight(e)}onFocus(e){this.focusedEditableHost!==e&&(this.focusedEditableHost=e,this.editableHasChanged(e))}onBlur(e){this.focusedEditableHost===e&&(this.focusedEditableHost=void 0)}onChange(e){this.config.checkOnChange&&this.editableHasChanged(e,this.config.throttle),this.config.removeOnCorrection&&this.removeHighlightsAtCursor(e)}editableHasChanged(e,t){this.timeout.id&&this.timeout.editableHost===e&&clearTimeout(this.timeout.id);const r=setTimeout(()=>{this.highlight(e),this.timeout={}},t||0);this.timeout={id:r,editableHost:e}}highlight(e){let t=Bt.extractText(e);this.spellcheckService.check(t,(r,i)=>{if(r)return;t=Bt.extractText(e);const l=new Jc;let p=this.spellcheck.findMatches(t,i);l.addMatches("spellcheck",p),p=this.whitespace.findMatches(t),l.addMatches("whitespace",p),this.safeHighlightMatches(e,l.matches)})}safeHighlightMatches(e,t){const r=this.editable.getSelection(e);r?r.retainVisibleSelection(()=>{this.highlightMatches(e,t)}):this.highlightMatches(e,t),this.editable.dispatcher&&this.editable.dispatcher.notify("spellcheckUpdated",e)}highlightMatches(e,t){this.removeHighlights(e),t&&t.length>0&&Bt.highlightMatches(e,t)}removeHighlights(e){e=gr(e,this.win.document);for(const t of Nt('[data-highlight="spellcheck"]',e))Ct(t)}removeHighlightsAtCursor(e){e=gr(e,this.win.document);const t=this.editable.getSelection(e);if(t&&t.isCursor){let r=t.range.startContainer;r.nodeType===xe&&(r=r.parentNode);let i;do{if(r===e)return;if(r.getAttribute("data-highlight")==="spellcheck"){i=r.getAttribute("data-word-id");break}}while(r=r.parentNode);i&&t.retainVisibleSelection(()=>{for(const l of Nt(`[data-word-id="${i}"]`,e))Ct(l)})}}}function Vt(){if(Z.log===!1||!global.console)return;const n=arguments.length===1?arguments[0]:Array.from(arguments);return arguments.length!==1&&n[n.length-1]==="trace"&&(n.pop(),console.trace&&console.trace()),console.log(n)}function ru(n){const e=n.win.document;return{focus(t){!Vr(t)||t.appendChild(e.createTextNode("\uFEFF"))},blur(t){Zr(t)},selection(t,r){Vt(r?"Default selection behavior":"Default selection empty behavior")},cursor(t,r){Vt(r?"Default cursor behavior":"Default cursor empty behavior")},newline(t,r){var i;if(r.isAtTextEnd()){const l=e.createElement("br");r.insertBefore(l),(((i=l.nextSibling)==null?void 0:i.nodeType)!==xe||l.nextSibling.textContent[0]!=="\uFEFF")&&r.insertAfter(e.createTextNode("\uFEFF"))}else r.insertBefore(e.createElement("br"));r.setVisibleSelection()},insert(t,r,i){const l=t.parentNode,p=t.cloneNode(!1);switch(p.id&&p.removeAttribute("id"),r){case"before":l.insertBefore(p,t),t.focus();break;case"after":l.insertBefore(p,t.nextSibling),p.focus();break}},split(t,r,i,l){const p=t.cloneNode(!1);for(p.appendChild(r),t.parentNode.insertBefore(p,t);t.firstChild;)t.removeChild(t.firstChild);t.appendChild(i),qt(p),qt(t),t.focus()},merge(t,r,i){let l,p;switch(r){case"before":l=Cr(t),p=t;break;case"after":l=t,p=vr(t);break}!(l&&p)||(i=l.childNodes.length>0?n.appendTo(l,p.innerHTML):n.prependTo(l,p.innerHTML),p.remove(),i.save(),qt(l),i.restore(),i.setVisibleSelection())},empty(t){Vt("Default empty behavior")},switch(t,r,i){switch(r){case"before":const l=Cr(t);l&&(i.moveAtTextEnd(l),i.setVisibleSelection());break;case"after":const p=vr(t);p&&(i.moveAtBeginning(p),i.setVisibleSelection());break}},move(t,r,i){Vt("Default move behavior")},paste(t,r,i){if(r.length===0)return;if(i.insertBefore(r.shift()),r.length===0)return i.setVisibleSelection();const l=t.parentNode;let p=t;r.forEach(w=>{const S=t.cloneNode(!1);S.id&&S.removeAttribute("id");const Q=_t(w);S.appendChild(Q),l.insertBefore(S,p.nextSibling),p=S}),n.createCursorAtEnd(p).setVisibleSelection()},clipboard(t,r,i){Vt("Default clipboard behavior")},toggleBold(t){t.toggleBold()},toggleEmphasis(t){t.toggleEmphasis()}}}function iu(n){const e=ru(n);return{focus(t){e.focus(t)},blur(t){e.blur(t)},flow(t,r){e.flow(t,r)},selection(t,r){e.selection(t,r)},cursor(t,r){e.cursor(t,r)},newline(t,r){e.newline(t,r)},split(t,r,i,l){e.split(t,r,i,l)},insert(t,r,i){e.insert(t,r,i)},merge(t,r,i){e.merge(t,r,i)},empty(t){e.empty(t)},switch(t,r,i){e.switch(t,r,i)},move(t,r,i){e.move(t,r,i)},clipboard(t,r,i){e.clipboard(t,r,i)},paste(t,r,i){e.paste(t,r,i)},toggleBold(t){e.toggleBold(t)},toggleEmphasis(t){e.toggleEmphasis(t)}}}function lr(n){return[...new sr(n,"getNextTextNode")]}function $i({textNodes:n,absOffset:e}){let t=0,r=0,i;for(let l=0;l<n.length;l++){const p=n[l];if(e<=t+p.textContent.length){i=p,r=e-t;break}t+=p.textContent.length}return{node:i,relativeOffset:r}}function su(n){const e=lr(n),t=(r,i)=>r+i.textContent.length;return e.reduce(t,0)}function ou({host:n,requiredOnFirstLine:e,requiredOnLastLine:t,positionX:r}){const i=n.ownerDocument.createRange();i.selectNodeContents(n);const l=i.getBoundingClientRect(),p=su(n),w=lr(n);if(p===0)return{wasFound:!1};const S={currentOffset:Math.floor(p/2),leftLimit:0,rightLimit:p};let Q=S.currentOffset,Y,Re=20;for(;S.leftLimit<S.rightLimit&&Re>0;){Re=Re-=1,Q=S.currentOffset;const Qe=Wr({textNodes:w,offset:S.currentOffset}).getBoundingClientRect();if(Y=Math.abs(Qe.left-r),e&&l.top!==Qe.top){Lr(S);continue}else if(t&&l.bottom!==Qe.bottom){Fr(S);continue}r<Qe.left?Lr(S):Fr(S)}const $e=Wr({textNodes:w,offset:S.currentOffset}).getBoundingClientRect(),De=Math.abs($e.left-r);return De<Y&&(Y=De,Q=S.currentOffset),{distance:Y,offset:Q,wasFound:!0}}function Lr(n){n.rightLimit=n.currentOffset,n.currentOffset=Math.floor((n.currentOffset+n.leftLimit)/2)}function Fr(n){n.leftLimit=n.currentOffset,n.currentOffset=Math.ceil((n.currentOffset+n.rightLimit)/2)}function Wr({textNodes:n,offset:e}){const{node:t,relativeOffset:r}=$i({textNodes:n,absOffset:e}),i=t.ownerDocument.createRange();return i.setStart(t,r),i.collapse(!0),i}class yn{constructor(e){const t={window,defaultBehavior:!0,mouseMoveSelectionChanges:!1,browserSpellcheck:!0};this.config=Object.assign(t,e),this.win=this.config.window,this.editableSelector=`.${Z.editableClass}`,Xe.initialized||Xe.init(),this.dispatcher=new Zs(this),this.config.defaultBehavior===!0&&this.dispatcher.on(iu(this))}static getGlobalConfig(){return Z}static globalConfig(e){Object.assign(Z,e),mi(Z)}add(e){return this.enable(e),this}remove(e){const t=Nt(e,this.win.document);this.disable(t);for(const r of t)r.classList.remove(Z.editableDisabledClass);return this}disable(e){const t=Nt(e||`.${Z.editableClass}`,this.win.document);for(const r of t)hs(r);return this}enable(e,t){const r=this.config.browserSpellcheck,i=Nt(e||`.${Z.editableDisabledClass}`,this.win.document);for(const l of i)fs(l,{normalize:t,shouldSpellcheck:r}),this.dispatcher.notify("init",l);return this}suspend(e){const t=Nt(e||`.${Z.editableClass}`,this.win.document);for(const r of t)r.removeAttribute("contenteditable");return this.dispatcher.suspend(),this}continue(e){const t=Nt(e||`.${Z.editableClass}`,this.win.document);for(const r of t)r.setAttribute("contenteditable",!0);return this.dispatcher.continue(),this}createCursor(e,t="beginning"){const r=ze.findHost(e,this.editableSelector);if(!r)return;const i=Xe.createRange();return t==="beginning"||t==="end"?(i.selectNodeContents(e),i.collapse(t==="beginning")):e!==r?t==="before"?(i.setStartBefore(e),i.setEndBefore(e)):t==="after"&&(i.setStartAfter(e),i.setEndAfter(e)):Ot("EditableJS: cannot create cursor outside of an editable block."),new ze(r,i)}createCursorAtCharacterOffset({element:e,offset:t}){const r=lr(e),{node:i,relativeOffset:l}=$i({textNodes:r,absOffset:t}),p=Xe.createRange();p.setStart(i,l),p.collapse(!0);const w=ze.findHost(e,this.editableSelector),S=new ze(w,p);return S.setVisibleSelection(),S}createCursorAtBeginning(e){return this.createCursor(e,"beginning")}createCursorAtEnd(e){return this.createCursor(e,"end")}createCursorBefore(e){return this.createCursor(e,"before")}createCursorAfter(e){return this.createCursor(e,"after")}getContent(e){return Kn(e)}appendTo(e,t){const r=on(e,this.win.document),i=this.createCursor(r,"end");return i.insertAfter(typeof t=="string"?_t(t):t),i}prependTo(e,t){const r=on(e,this.win.document),i=this.createCursor(r,"beginning");return i.insertBefore(typeof t=="string"?_t(t):t),i}getSelection(e){let t=this.dispatcher.selectionWatcher.getFreshSelection();if(!(e&&t))return t;const r=t.range;try{r.compareNode(e)!==r.NODE_BEFORE_AND_AFTER&&(t=void 0)}catch{t=void 0}return t}setupHighlighting(e){return this.highlighting=new nu(this,e),this}setupSpellcheck(e){let t;e.markerNode&&(t=e.markerNode.outerHTML),this.setupHighlighting({throttle:e.throttle,spellcheck:{marker:t,spellcheckService:e.spellcheckService}}),this.spellcheck={checkSpelling:r=>{this.highlighting.highlight(r)}}}highlight({editableHost:e,text:t,highlightId:r,textRange:i,raiseEvents:l,type:p="comment"}){return i?typeof i.start!="number"||typeof i.end!="number"?(Ot("Error in Editable.highlight: You passed a textRange object with invalid keys. Expected shape: { start: Number, end: Number }"),-1):i.start===i.end?(Ot("Error in Editable.highlight: You passed a textRange object with equal start and end offsets, which is considered a cursor and therefore unfit to create a highlight."),-1):st.highlightRange(e,r,i.start,i.end,l?this.dispatcher:void 0,p):st.highlightText(e,t,r,p)}getHighlightPositions({editableHost:e,type:t}){return st.extractHighlightedRanges(e,t)}removeHighlight({editableHost:e,highlightId:t,raiseEvents:r}){st.removeHighlight(e,t,r?this.dispatcher:void 0)}decorateHighlight({editableHost:e,highlightId:t,addCssClass:r,removeCssClass:i}){st.updateHighlight(e,t,r,i)}on(e,t){return this.dispatcher.on(e,t),this}off(...e){return this.dispatcher.off.apply(this.dispatcher,e),this}unload(){return this.dispatcher.unload(),this}findClosestCursorOffset({element:e,origCoordinates:t,requiredOnFirstLine:r=!1,requiredOnLastLine:i=!1}){const l=this.dispatcher.switchContext?this.dispatcher.switchContext.positionX:t.left;return ou({host:e,requiredOnFirstLine:r,requiredOnLastLine:i,positionX:l})}}yn.parser=Zi;yn.content=us;yn.browser=bi;["focus","blur","flow","selection","cursor","newline","insert","split","merge","empty","change","switch","move","clipboard","paste","spellcheckUpdated","selectToBoundary"].forEach(n=>{yn.prototype[n]=function(e){return this.on(n,e)}})});export default au();
