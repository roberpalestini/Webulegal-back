import{K as B,_ as J,o as a,c as d,r as L,j as H,a as w,b as t,G as x,k as c,l as m,m as v,A as r,F as f,D as y,u as T,H as g,x as D,w as S,L as R,M as V,N as O,n as _,p as E}from"./vendor.3ce90362.js";import{_ as j}from"./admin-add.c0a05d7b.js";import{_ as N}from"./boligrafo.1cbc6d81.js";import{_ as U,a as W,b as k}from"./expandir.532577ce.js";import{_ as G,a as Y,b as I}from"./descargar.fa43ec5f.js";import{_ as q}from"./boton-agregar.c9c97214.js";import{a as C}from"./index.90840984.js";import{_ as A}from"./DocumentDropdown.3ac4bf8a.js";import{n as X,c as K}from"./navbar.3dc83e26.js";import{Q as u,I as z,q as b,a as Q}from"./quill-table.54d5d997.js";/* empty css                       */import{T as F}from"./vuejs-tree.common.02dd7996.js";import{b as M}from"./share-button-writting-private.46cbf0eb.js";import{E as P}from"./Editor.e4eec21a.js";import"./edit.dc69b3f2.js";import"./Logocompleto.3df4452e.js";import"./cuota.edac84f3.js";const Z=B({name:"EditorTextos",components:{},methods:{openAddField(){$("#staticBackdrop4").modal("show")},imageHandler(s,e){const o=(this.quill.getSelection()||{}).index||this.quill.getLength();o&&this.quill.insertEmbed(o,"image",s,"user")}},setup(){u.register("modules/imageDropAndPaste",z),u.register(b.TableCell),u.register(b.TableRow),u.register(b.Table),u.register(b.Contain),u.register("modules/table",b.TableModule);var s=u.import("parchment");let e=new s.Attributor.Class("custom","ql-custom",{scope:s.Scope.INLINE});return u.register("modules/customClass",e),{}},mounted(){},data(){const s="",n=[];for(let i=1;i<=10;i++)for(let l=1;l<=5;l++)n.push("newtable_"+i+"_"+l);var p=[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["image","video"],[{table:n},{table:"append-row"},{table:"append-col"}],[{customClass:s}],["clean"]];return this.quill=new u("#editor3",{theme:"snow",modules:{table:!0,toolbar:p,imageDropAndPaste:{handler:this.imageHandler}}}),$('[data-toggle="tooltip"]').tooltip(),$(".ql-italic").mouseover(),setTimeout(function(){$(".ql-italic").mouseout()},2500),this.quill=this.content,console.log(this.toolbarOptions),{quill:null,table:null,content:null,toolbarOptions:p}}}),ee=["innerHTML"];function te(s,e,o,n,p,i){return a(),d("div",{id:"quill",innerHTML:this.content},null,8,ee)}var oe=J(Z,[["render",te]]);const se={class:"container-fluid"},ie={class:"row"},ne={class:"col-md-2",style:{height:"calc(100vh - 70px)",overflow:"hidden","overflow-y":"auto",padding:"0"}},ae={class:"col-md-10",style:{height:"calc(100vh - 70px)",border:"1px solid #e2e2e2",position:"relative"}},de={class:"row"},le={class:"col-md-3",style:{position:"relative",overflow:"hidden","overflow-y":"auto","padding-right":"0px","padding-left":"0px",height:"calc(100vh - 70px)"}},re={class:"nav nav-tabs nav-justified"},he={class:"nav-item"},ce={class:"nav-item"},pe={class:"tab-content py-3",id:"myTabContent"},ue={class:"col-12 text-center",style:{"padding-top":"8.5px","padding-bottom":"8.5px","border-bottom":"1px solid #e5e5e5"}},me={class:"col-12",style:{"padding-top":"10px","padding-bottom":"0"}},ge={key:0,class:"spinner-border spinner-border-sm",role:"status"},fe=t("span",{class:"sr-only"},"Loading...",-1),ye=[fe],ve={key:1,style:{padding:"0",margin:"0",width:"100%","list-style":"none"}},be=["onClick"],_e={href:"#",style:{color:"black","font-weight":"600"}},we={class:"col-12",style:{"padding-top":"10px","padding-bottom":"10px"}},xe=t("img",{src:j,style:{width:"20px"}},null,-1),Te=_(" Nueva carpeta raiz"),De=[xe,Te],ke=t("hr",null,null,-1),Pe=t("hr",null,null,-1),Se={key:0,style:{"font-size":"12px","font-weight":"500"}},Oe={class:"col-12 text-center",style:{"padding-top":"8.5px","padding-bottom":"8.5px","border-bottom":"1px solid #e5e5e5"}},Ne={style:{padding:"0px","list-style":"none",width:"100%",display:"flex","justify-content":"flex-start","align-items":"center","flex-direction":"column","align-content":"flex-start"}},$e={href:"#",style:{"font-size":"12px",padding:"5px",background:"rgb(234, 234, 234)","border-radius":"30px",display:"flex","place-content":"flex-start","align-items":"center","flex-direction":"row","padding-left":"10px","padding-right":"10px"}},Ce=["onClick"],Fe=t("i",{class:"fas fa-times"},null,-1),Me=[Fe],Ee={class:"col-12 text-center",style:{"padding-top":"8.5px","padding-bottom":"8.5px","border-bottom":"1px solid #e5e5e5"}},je={class:"col-12 text-center",style:{"padding-top":"8.5px","padding-bottom":"8.5px","border-bottom":"1px solid #e5e5e5"}},Ie=t("img",{src:j,style:{width:"20px"}},null,-1),qe=_(" Nueva etiqueta"),Ae=[Ie,qe],ze={class:"col-12",style:{"padding-top":"10px","padding-bottom":"10px"}},Be={key:0,class:"spinner-border spinner-border-sm",role:"status"},Je=t("span",{class:"sr-only"},"Loading...",-1),Le=[Je],He=t("hr",null,null,-1),Re={key:1,class:"col-12 text-left",style:{padding:"0"}},Ve=t("p",{style:{"font-size":"13px","font-weight":"600"}},"Filtros :",-1),Ue={style:{padding:"0px","list-style":"none",width:"100%",display:"flex","justify-content":"flex-start","align-items":"center","flex-direction":"column","align-content":"flex-start"}},We={href:"#",style:{"font-size":"12px","padding-top":"5px","padding-bottom":"5px",background:"rgb(206, 206, 206)","border-radius":"30px",display:"flex","place-content":"flex-start","align-items":"center","flex-direction":"row","font-weight":"600","padding-left":"10px","padding-right":"10px"}},Ge=["onClick"],Ye=t("i",{class:"fas fa-times"},null,-1),Xe=[Ye],Ke=t("hr",null,null,-1),Qe={style:{padding:"0",margin:"0",width:"100%","list-style":"none"}},Ze=["onClick"],et={href:"#",style:{color:"black","font-weight":"600","font-size":"12px"}},tt={style:{padding:"0",margin:"0",width:"100%","list-style":"none"}},ot=["onClick"],st={href:"#",style:{color:"black","font-weight":"600","font-size":"12px"}},it={class:"col-md-3",style:{"border-left":"1px solid #e6e6e6","border-right":"1px solid #e6e6e6",padding:"0",height:"calc(100vh - 70px)",overflow:"hidden","overflow-y":"auto",position:"relative"}},nt={key:0,class:"spinner-border spinner-border-sm",role:"status",style:{position:"absolute"}},at=t("span",{class:"sr-only"},"Loading...",-1),dt=[at],lt=["onClick","onContextmenu"],rt={key:0,class:"col-12",style:{padding:"0"}},ht={class:"edit-mode"},ct=["onClick"],pt=["onSubmit"],ut=["onUpdate:modelValue"],mt=t("button",{type:"submit",hidden:"true"},null,-1),gt={href:""},ft={key:0,class:"edit-mode",style:{color:"#525252","font-size":"12px"}},yt=["onClick"],vt=["onSubmit"],bt=["onUpdate:modelValue"],_t=t("button",{type:"submit",hidden:"true"},null,-1),wt={style:{position:"absolute:top:0:right:0",height:"100%"}},xt={key:0,src:U,style:{height:"20px",width:"20px"}},Tt=t("span",null,null,-1),Dt={key:0,src:W,style:{height:"20px",width:"20px"}},kt={key:0,src:G,style:{height:"20px",width:"20px"}},Pt={key:1},St={key:0,src:Y,style:{height:"20px",width:"20px",cursor:"pointer"}},Ot={class:"col-md-6 scroll-size-medium",style:{"border-left":"1px solid #e6e6e6","border-right":"1px solid #e6e6e6",padding:"0",height:"calc(100vh - 70px)",overflow:"hidden","overflow-y":"auto",position:"relative"}},Nt={key:0,class:"spinner-border spinner-border-sm",role:"status",style:{position:"absolute"}},$t=t("span",{class:"sr-only"},"Loading...",-1),Ct=[$t],Ft={key:1,class:"col-12",style:{padding:"10px"}},Mt={class:"row"},Et={class:"col-md-8"},jt={class:"col-md-4 text-right"},It={key:0},qt=t("img",{src:k,style:{width:"14px",height:"14px","margin-right":"5px"}},null,-1),At=[qt],zt=t("img",{src:k,style:{width:"14px",height:"14px","margin-right":"5px"}},null,-1),Bt=[zt],Jt={class:"dropdown",style:{margin:"5px",display:"inline"}},Lt=t("button",{class:"btn btn-light dropdown-toggle",type:"button",id:"dropdownMenuButton","data-toggle":"dropdown","aria-expanded":"false"},[t("img",{src:I,style:{width:"14px",height:"14px","margin-right":"5px"}})],-1),Ht={class:"dropdown-menu","aria-labelledby":"dropdownMenuButton"},Rt={style:{display:"inline-block"}},Vt={class:"modal fade",id:"exampleModalLong",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLongTitle","aria-hidden":"true"},Ut={class:"modal-dialog modal-dialog-centered modal-lg",role:"document"},Wt={class:"modal-content"},Gt={class:"modal-body"},Yt={class:"row justify-content-center"},Xt={class:"col-12 text-left",style:{"margin-bottom":"20px"}},Kt=t("p",{style:{padding:"0",margin:"0","margin-top":"8px","font-size":"14px"}}," Para crear el documento, completa el siguiente cuestionario ",-1),Qt={class:"col-4",style:{position:"sticky",top:"0"}},Zt={class:"col-12 view-writing-fields-content"},eo={key:0,class:"col-12",style:{padding:"0","min-height":"300px"}},to={style:{"font-size":"13px",color:"black","font-weight":"600"}},oo=["onUpdate:modelValue","onKeyup"],so={key:1,class:"col-12",style:{padding:"0","min-height":"380px"}},io={key:0,class:"form-group",style:{"text-align":"left",padding:"10px"}},no={style:{"font-size":"13px",color:"black","font-weight":"600"}},ao=["onUpdate:modelValue","onKeyup"],lo={class:"col-12 text-center"},ro={class:"col-8"},ho={class:"col-12 view-writing-content"},co=t("div",{class:"col-12 header"},"Previsualizacion del documento",-1),po=["innerHTML"],uo={style:{padding:"0",margin:"0","list-style":"none"}},mo={style:{padding:"0",margin:"0","list-style":"none","padding-top":"6px","padding-bottom":"6px","border-bottom":"1px solid rgb(225 225 225 / 48%)"}},go={style:{padding:"0",margin:"0","list-style":"none","padding-top":"6px","padding-bottom":"6px"}},fo={class:"modal fade",id:"compartir-privada",tabindex:"-1",role:"dialog","aria-labelledby":"report-contentTitle","aria-hidden":"true"},yo={class:"modal-dialog modal-dialog-centered modal-sm",role:"document"},vo={class:"modal-content",style:{"border-radius":"10px",border:"none",height:"50vh"}},bo=t("div",{class:"modal-header text-center",style:{background:"#dedcdc",color:"#454545","border-top-left-radius":"10px","border-top-right-radius":"10px"}},[t("h5",{class:"modal-title",style:{"font-size":"15px","font-weight":"600","text-align":"center !important",display:"block !important",width:"100%"}}," Compartir en forma privada "),t("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},[t("span",{"aria-hidden":"true"},"\xD7")])],-1),_o={class:"modal-body"},wo={class:"col-md-12",style:{background:"#f2f2f2",color:"#141414","font-weight":"600","text-align":"left",padding:"20px","margin-bottom":"10px"}},xo=_(" Escrib\xED el mail de registro del usuario al que quer\xE9s dar acceso "),To=E('<div class="col-md-12" style="margin-left:1vw;display:flex;justify-content:center;align-items:center;color:#141414;font-weight:600;text-align:left;"><input type="radio" class="show-checkbox" style="height:30px;min-height:33px;border-radius:30px;border:1px solid rgb(199, 199, 199);background:rgb(231, 231, 231);margin-right:0.5vw;"><label style="margin-top:1vh;">Solo Lectura</label><input type="radio" class="show-checkbox" style="height:30px;min-height:33px;border-radius:30px;border:1px solid rgb(199, 199, 199);background:rgb(231, 231, 231);margin-right:0.5vw;margin-left:4vw;"><label style="margin-top:1vh;">Lectura y Edici\xF3n</label></div>',1),Do={class:"col-12 text-center"},ko={class:"modal fade",id:"staticBackdrop","data-backdrop":"static","data-keyboard":"true",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},Po={class:"modal-dialog modal-dialog-centered modal-sm"},So={class:"modal-content",style:{"border-radius":"10px",border:"none",height:"20vh"}},Oo=t("div",{class:"modal-header text-center"},[t("h5",{class:"modal-title"},"Nueva carpeta"),t("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},[t("span",{"aria-hidden":"true"},"\xD7")])],-1),No={class:"modal-body"},$o=t("div",{class:"modal-footer",style:{border:"none"}},[t("button",{type:"submit",class:"btn btn-primary",style:{"font-size":"15px"}}," Crear carpeta ")],-1),Co={class:"modal fade",id:"staticBackdrop2","data-backdrop":"static","data-keyboard":"true",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},Fo={class:"modal-dialog modal-dialog-centered modal-sm"},Mo={class:"modal-content",style:{"border-radius":"10px",border:"none",height:"20vh"}},Eo=t("div",{class:"modal-header text-center"},[t("h5",{class:"modal-title"},"Nueva carpeta"),t("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},[t("span",{"aria-hidden":"true"},"\xD7")])],-1),jo={class:"modal-body"},Io=t("div",{class:"modal-footer",style:{border:"none"}},[t("button",{type:"submit",class:"btn btn-primary",style:{"font-size":"15px"}}," Guardar ")],-1),qo={class:"modal fade",id:"staticBackdrop4","data-backdrop":"static","data-keyboard":"true",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},Ao={class:"modal-dialog modal-dialog-centered modal-sm",style:{height:"5vw"}},zo={class:"modal-content",style:{"border-radius":"10px",border:"none",height:"20vh"}},Bo=E('<div class="modal-header text-center"><h5 class="modal-title">Eliminar carpeta</h5><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">\xD7</span></button></div><div class="modal-body text-danger"> Esta accion no se puede deshacer </div><div class="modal-footer" style="border:none;"><button type="submit" class="btn btn-primary" style="font-size:15px;"> Eliminar </button></div>',3),Jo=[Bo],Lo={class:"modal fade ModalFullScreen",id:"ModalFullScreen",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLongTitle","aria-hidden":"true"},Ho={class:"modal-dialog modal-dialog-centered modal-xl",role:"document"},Ro={class:"modal-content"},Vo={class:"modal-header text-center"},Uo={class:"modal-title"},Wo=t("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},[t("span",{"aria-hidden":"true"},"\xD7")],-1),Go={class:"modal-body"},Yo={class:"row justify-content-center"},Xo={key:0,class:"col-12",style:{padding:"10px"}},Ko={class:"row"},Qo=t("div",{class:"col-md-8"},[t("b")],-1),Zo={class:"col-md-4 text-right"},es={key:0},ts=t("img",{src:k,style:{width:"14px",height:"14px","margin-right":"5px"}},null,-1),os=t("span",null,"Expandir",-1),ss=[ts,os],is=t("img",{src:k,style:{width:"14px",height:"14px","margin-right":"5px"}},null,-1),ns=t("span",null,"Expandir",-1),as=[is,ns],ds={class:"dropdown",style:{margin:"5px",display:"inline"}},ls=t("button",{class:"btn btn-light dropdown-toggle",type:"button",id:"dropdownMenuButton","data-toggle":"dropdown","aria-expanded":"false"},[t("img",{src:I,style:{width:"14px",height:"14px","margin-right":"5px"}})],-1),rs={class:"dropdown-menu","aria-labelledby":"dropdownMenuButton"},hs={class:"modal fade",id:"ModalAddTags","data-backdrop":"static","data-keyboard":"true",tabindex:"-1","aria-hidden":"true"},cs={class:"modal-dialog modal-dialog-centered"},ps=t("div",{class:"modal-header text-center"},[t("h5",{class:"modal-title"},"Agregar etiquetas"),t("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},[t("span",{"aria-hidden":"true"},"\xD7")])],-1),us={class:"modal-body",style:{height:"20vh"}},ms={style:{margin:"16px 0"}},gs=["onClick"],fs={style:{"margin-bottom":"0","font-size":"14px"}},ys=t("img",{src:q,style:{width:"20px",height:"20px"}},null,-1),vs={class:"col-12",style:{"padding-top":"0px"}},bs=t("h4",{style:{"font-weight":"bold","text-align":"left","font-size":"17px"}}," Asignale al documento como minimo tres etiquetas ",-1),_s={key:0,style:{margin:"16px 0"}},ws=["onClick"],xs={style:{"margin-bottom":"0","font-size":"14px"}},Ts=t("img",{src:q,style:{width:"20px",height:"20px"}},null,-1),Ds=t("div",{class:"modal-footer",style:{border:"none"}},[t("button",{type:"submit",class:"btn btn-primary",style:{"font-size":"15px"}}," Guardar ")],-1),ks={class:"modal fade",id:"moveDocumentTofolder","data-backdrop":"static","data-keyboard":"true",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},Ps={class:"modal-dialog modal-dialog-centered"},Ss=t("div",{class:"modal-header text-center"},[t("h5",{class:"modal-title"},"Asignar carpeta"),t("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},[t("span",{"aria-hidden":"true"},"\xD7")])],-1),Os={class:"modal-body"},Ns=t("hr",null,null,-1),$s={key:0,style:{padding:"0px","list-style":"none",width:"100%",display:"flex","justify-content":"flex-start","align-items":"center","flex-direction":"column","align-content":"flex-start"}},Cs={style:{width:"100%",display:"flex","justify-content":"flex-start","align-items":"flex-start","flex-direction":"column","align-content":"flex-start","margin-bottom":"5px"}},Fs={href:"#",style:{"font-size":"12px",padding:"5px",background:"rgb(234, 234, 234)","border-radius":"30px",display:"flex","place-content":"flex-start","align-items":"center","flex-direction":"row","padding-left":"10px","padding-right":"10px"}},Ms=["onClick"],Es=t("i",{class:"fas fa-times"},null,-1),js=[Es],Is=t("div",{class:"modal-footer",style:{border:"none"}},[t("button",{type:"submit",class:"btn btn-primary",style:{"font-size":"15px"}}," Guardar ")],-1),qs={components:{RichTextEditor:oe,DocumentDropdown:A,QuillEditor:Q,editor:P},data(){return{activeItem:"folders",version:"1.00",auth:localStorage.getItem("auth"),userId:localStorage.getItem("userIdValue"),userDecoded:null,endpoint:window.ENDPOINT+"/shared/get/folders",endpointTags:window.ENDPOINT+"/shared/get/tags",endpointPrivateTags:window.ENDPOINT+"/private/get/tags",endpointSearch:window.ENDPOINT+"/shared/search",endpointDocuments:window.ENDPOINT+"/shared/get/folders/documents",endpointDocumentsByTags:window.ENDPOINT+"/private/get/tags/documents",endpointDocument:window.ENDPOINT+"/shared/get/document",endpointWriting:window.ENDPOINT+"/shared/get/writing",endpointGetAllWritingsShared:window.ENDPOINT+"/shared/get/documents",endpointGetAllDocumentsShared:window.ENDPOINT+"/library/get/documents/shared-with-me",endpointOrganizePrivateTags:window.ENDPOINT+"/private/save/tags/organize",endpointGetAll:window.ENDPOINT+"/writings/get/documents",endpointGetAllLibrarie:window.ENDPOINT+"/librarie/get/documents",endpointTextPreview:window.ENDPOINT+"/writings/fields/preview",endpointSaveFolders:window.ENDPOINT+"/shared/save/folders",endpointSavePrivateTags:window.ENDPOINT+"/private/save/tags",endpointSaveFoldersChild:window.ENDPOINT+"/shared/save/folders/childs",endpointMoveSave:window.ENDPOINT+"/shared/save/folders/organize",endpointDeleteDocument:window.ENDPOINT+"/shared/delete/documents",endpointSave:window.ENDPOINT+"/writings/folders/edit",editor_enabled:!1,items:[],itemsTags:[],itemsTagsPrivate:[],newTagName:"",tags:[],tagSelected:[],documents:[],loadingFolders:!0,loadingDocument:!1,loadingDocuments:!1,tagsSelected:[],contentDocument:null,activeDocumentId:null,documentModal:{data:{title:null,description:null,complete:0,fields:[],content:null}},document:{data:{title:null,description:null,complete:0}},searchTarget:{target:null},searchTargetFolders:{target:null},editField:{index:null,id:null,enabled:!1},temp:{editFont:"Arial"},treeDisplayData:[],treeDisplayData2:[],nameNewFolder:{title:null},nameEditFolder:{title:null},showContextMenu:!1,selected:{row:{},action:"",clientX:null,clientY:null},selectedIdDocument:null,selectedIndexDocument:null,pathMoveSelected:null,modalMoveDocument:!1,temp:{index:null,node:null},documentMoveTemp:!1,valEmail:""}},created(){const o=[];for(let n=1;n<=10;n++)for(let p=1;p<=5;p++)o.push("newtable_"+n+"_"+p);this.toolbarOptions=[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["image","video"],[{table:o},{table:"append-row"},{table:"append-col"}],["clean"]],document.addEventListener("click",()=>{this.showContextMenu=!1,this.selected.row={},this.selected.clientX=null,this.selected.clientY=null}),setTimeout(()=>{this.quill=new u("#editor-full",{theme:"snow",placeholder:"Disfruta Webulegal.com! Empeza eligiendo el documento",modules:{table:!0,toolbar:this.toolbarOptions,imageDropAndPaste:{handler:this.imageHandler}},readOnly:!0}),this.quill=new u("#editor-full2",{theme:"snow",placeholder:"",modules:{}})},300),this.quill=new u("#editor-full3",{theme:"snow",modules:{table:!0,toolbar:this.toolbarOptions,imageDropAndPaste:{handler:this.imageHandler}}})},mounted(){this.loadTags(),this.loadPrivateTags(),this.loadAllDocuments(),this.loadFolders(),this.loadFoldersTree2(),console.log(JSON.stringify(this.document)),console.log("doc"+this.authId),this.$route.query.id&&(this.activeDocumentId=this.$route.query.id,this.getDocument(this.$route.query.id))},computed:{searchTagsInResults(){return this.documentsSearch.filter(s=>{if(this.tagsSelected.length>0)for(var e=s.data.tags.length-1;e>=0;e--)for(var o=s.data.tags[e],e=this.tagsSelected.length-1;e>=0;e--){var n=this.tagsSelected[e];if(o._id==n.id)return s}else return s})},fixerEditMode(){for(var s=this.documents.length-1;s>=0;s--)this.documents[s]._ext={edit_title:!1,edit_description:!1};return this.documents},getDocumentsByTagPrivate(s,e){this.$Progress.start(),this.tagsSelected.push({text:e,id:s}),this.loadingDocuments=!0;const o={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({auth:this.auth,tags:this.tagsSelected,data:{name:this.tagsSelected.map(n=>n.text),type:"library"}})};fetch(this.endpointTaggedPrivateDocuments,o).then(n=>n.json()).then(n=>{if(n.empty){this.loadingDocuments=!1,this.documents=[],this.$Progress.finish();return}n.error==!0||(this.documents=n,this.loadingDocuments=!1,this.$Progress.finish())})},filteredResourcesPrivateTags(){return this.searchTarget.target?(this.searchDocuments(),this.itemsTagsPrivate.filter(s=>s.data.name.toLowerCase().startsWith(this.searchTarget.target.toLowerCase()))):this.itemsTagsPrivate},filteredResourcesTags(){return this.searchTarget.target?(this.searchDocuments(),this.tags.filter(s=>s.data.name.toLowerCase().startsWith(this.searchTarget.target.toLowerCase()))):this.tags},filteredResources(){return this.searchTargetFolders.target?this.items.filter(s=>s.text.startsWith(this.searchTargetFolders.target)):this.items},myCustomStyles(){return{tree:{style:{height:"auto",maxHeight:"300px",overflowY:"visible",display:"inline-block",textAlign:"left"}},editNode:{class:"button-edit-tree",style:{color:"#EE5F5B"}},row:{style:{width:"500px",cursor:"pointer"},child:{class:"",style:{height:"35px"},active:{style:{height:"35px"}}}},rowIndent:{paddingLeft:"20px"},text:{style:{"font-weight":"600","font-size":"12px"},active:{style:{"font-weight":"bold",color:"#1200FF","font-size":"12px"}}}}},myCustomOptions(){return{treeEvents:{expanded:{state:!0,fn:(s,e)=>{alert(s)}},collapsed:{state:!0,fn:(s,e)=>{alert(s)}},selected:{state:!1,fn:this.mySelectedFunction},checked:{state:!1,fn:this.myCheckedFunction}},events:{expanded:{state:!0},selected:{state:!0},checked:{state:!0},editableName:{state:!0,calledEvent:"expanded"}},addNode:{state:!0,class:"add_icon",style:{color:"red"},fn:this.addNodeFunction,appearOnHover:!0},editNode:{state:!0,fn:this.deleteFolder,appearOnHover:!0},deleteNode:{state:!1,fn:this.deleteNodeFunction,appearOnHover:!0},showTags:!0}},myCustomStyles(){return{tree:{style:{height:"auto",maxHeight:"300px",overflowY:"visible",display:"inline-block",textAlign:"left"}},editNode:{class:"button-edit-tree",style:{color:"#EE5F5B"}},deleteNode:{class:"button-move-tree",style:{color:"#EE5F5B"}},row:{style:{width:"500px",cursor:"pointer"},child:{class:"",style:{height:"35px"},active:{style:{height:"35px"}}}},rowIndent:{paddingLeft:"20px"},text:{style:{"font-weight":"600","font-size":"12px"},active:{style:{"font-weight":"bold",color:"#1200FF","font-size":"12px"}}}}},myCustomOptions(){return{treeEvents:{expanded:{state:!0,fn:(s,e)=>{this.getChilds(s)}},collapsed:{state:!0},selected:{state:!1,fn:this.mySelectedFunction},checked:{state:!1,fn:this.myCheckedFunction}},events:{expanded:{state:!0},selected:{state:!0},checked:{state:!0},editableName:{state:!0,calledEvent:"expanded"}},addNode:{state:!0,fn:this.addNodeFunction,appearOnHover:!0},editNode:{state:!0,fn:this.deleteFolder,appearOnHover:!0},deleteNode:{state:!0,fn:s=>{this.getDocumentsFromFolder(s.id)},appearOnHover:!0},showTags:!0}},myCustomStyles2(){return{tree:{style:{height:"auto",maxHeight:"300px",overflowY:"visible",display:"inline-block",textAlign:"left"}},deleteNode:{class:"button-move-tree",style:{color:"#EE5F5B"}},row:{style:{width:"500px",cursor:"pointer"},child:{class:"",style:{height:"35px"},active:{style:{height:"35px"}}}},rowIndent:{paddingLeft:"20px"},text:{style:{"font-weight":"600","font-size":"12px"},active:{style:{"font-weight":"bold",color:"#1200FF","font-size":"12px"}}}}},myCustomOptions2(){return{treeEvents:{expanded:{state:!0,fn:(s,e)=>{this.getChildsTree2(s)}},collapsed:{state:!0},selected:{state:!1,fn:this.mySelectedFunction},checked:{state:!1,fn:this.myCheckedFunction}},events:{expanded:{state:!0},selected:{state:!0},checked:{state:!0},editableName:{state:!0,calledEvent:"expanded"}},addNode:{state:!1,class:"add_icon",style:{color:"red"},fn:this.addNodeFunction,appearOnHover:!0},editNode:{state:!1,fn:null,appearOnHover:!0},deleteNode:{state:!0,fn:this.selectPathMove,appearOnHover:!1}}}},methods:{isActive(s){return this.activeItem===s},setActive(s){this.activeItem=s},removeTag(s){this.tagSelected.splice(s,1)},selectTag(s){this.tagSelected.length<5?this.tagSelected.push(this.tags[s]):this.$toast.show("Solo puedes seleccionar 5 etiquetas",{position:"bottom-right"})},searchTags(){const s={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({auth:this.auth,search:this.searchInputTags.target})};fetch(this.endpointSearchTags,s).then(e=>e.json()).then(e=>{e.empty?this.tags=[]:(this.tags=e,console.log("soytags"))})},openModalAddTags(){$("#ModalAddTags").modal("show")},compartirPrivado(s){const e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:s})};fetch(window.ENDPOINT+"/writings/share/private",e).then(o=>o.json()).then(o=>{this.$toast.success("Se envio por email.",{position:"bottom-right"})})},openCompartirPrivada(){$("#compartir-privada").modal("show"),console.log(this.document.data.idUser),console.log(this.authId)},hacerPublico(s){this.selectedIdDocument=s._id;const e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({auth:this.auth,id:this.selectedIdDocument})};fetch(window.ENDPOINT+"/writings/organize",e).then(o=>o.json()).then(o=>{this.$toast.success("El documento ahora es publico.",{position:"bottom-right"})})},openFullScreen(){$(".ModalFullScreen").modal("show");const s=document.querySelector("#editor-full3").innerHTML;this.document.data.content=s,document.querySelector("#editor-full3").innerHTML=s},openCreateTagModal(){$("#ModalAddTags").modal("show")},createNewTag(s){this.$Progress.start();const e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({auth:this.auth,data:{name:s,type:"shared"}})};fetch(this.endpointSavePrivateTags,e).then(o=>o.json()).then(o=>{this.newTagName="",this.$Progress.finish(),this.$toast.success("Crear con \xE9xito nuevas etiquetas",{position:"bottom-right"}),$("#ModalAddTags").modal("hide")})},insertDocumentTags(s,e){this.$Progress.start();const o={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({auth:this.auth,data:{name:e.map(n=>n.data.name),documentId:s,type:"shared"}})};fetch(this.endpointOrganizePrivateTags,o).then(n=>n.json()).then(n=>{this.$Progress.finish(),this.tagSelected=[],this.$toast.success("Crear con \xE9xito nuevas etiquetas",{position:"bottom-right"}),$("#ModalAddTags").modal("hide")})},goEditDocumentPrivate(s){this.document.data.type!=="document"&&this.document.data.complete!=0?(console.log(s+"cvhvh"),localStorage.setItem("editDocument",JSON.stringify(s)),console.log(s),this.$router.push({name:"autowriting-edit",params:{id:s._id}})):(console.log(s+"document"),localStorage.setItem("editDocumentPrivate",JSON.stringify(s)),console.log(s),this.$router.push({name:"document-edit",params:{id:s._id}}))},openModalMoveDocument(){const s={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({auth:this.auth,id:this.selectedIdDocument})};fetch(endpointDocument,s).then(e=>e.json()).then(e=>{this.documentMoveTemp=e,$("#moveDocumentTofolder").modal("show")})},openCreateFolderRootModal(){$("#staticBackdrop").modal("show")},autoSaveFull(){const s=document.querySelector("#editor2-full").innerHTML;this.document.data.content=s,document.querySelector("#editor2").innerHTML=s;const e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({auth:this.auth,id:this.document._id,data:{content:s}})};fetch(window.ENDPOINT+"/writings/edit/auto",e).then(o=>o.json()).then(o=>{})},autoSave(){const s=document.querySelector("#editor2").innerHTML;this.document.data.content=s;const e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({auth:this.auth,id:this.document._id,data:{content:s}})};fetch(window.ENDPOINT+"/writings/edit/auto",e).then(o=>o.json()).then(o=>{})},saveEditMode(s,e){const o={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({auth:this.auth,id:s,data:{title:this.documents[e].data.title,description:this.documents[e].data.description}})};fetch(window.ENDPOINT+"/writings/edit",o).then(n=>n.json()).then(n=>{this.documents[e]._ext.edit_title=!1,this.documents[e]._ext.edit_description=!1,this.$Progress.finish(),this.$toast.success("Documento editado",{position:"bottom-right"}),this.document._id==s&&(this.document.data.title=this.documents[e].data.title,this.document.data.description=this.documents[e].data.description)})},actionTeste(s,e){if(e=="font"){document.execCommand("fontName",!1,this.temp.editFont);return}switch(e){case"h1":case"h2":case"p":document.execCommand("formatBlock",!1,e);break;default:document.execCommand(e,!1,null);break}},download(s,e,o){var n=document.createElement("a");n.setAttribute("href",s),n.setAttribute("download",e),n.setAttribute("target","_blank"),document.body.appendChild(n),n.click(),document.body.removeChild(n)},exportPDF(){this.$Progress.start();const s={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({auth:this.auth,id:this.activeDocumentId})};fetch(window.ENDPOINT+"/writings/export/pdf",s).then(e=>e.json()).then(e=>{this.$toast.show("Descargando",{position:"bottom-right"}),this.download(window.ENDPOINTEXPORTS+"/"+e.name,e.name,"data:application/pdf"),this.$Progress.finish(),console.log(e)})},exportWord(){this.$Progress.start();const s={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({auth:this.auth,id:this.activeDocumentId})};fetch(window.ENDPOINT+"/writings/export/word",s).then(e=>e.json()).then(e=>{this.$toast.show("Descargando",{position:"bottom-right"}),this.download(window.ENDPOINTEXPORTS+"/"+e.name,e.name,"data:application/vnd.openxmlformats-officedocument.wordprocessingml.document"),this.$Progress.finish(),console.log(e)})},createDocument(){this.$Progress.start();const s={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({auth:this.auth,id:this.documentModal._id,doc_original:this.documentModal._id,fields:this.documentModal.data.fields,content:this.documentModal.data.content})};fetch(window.ENDPOINT+"/writings/document/create/writing",s).then(e=>e.json()).then(e=>{if(this.tagsSelected.length>0){const o={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({auth:this.auth,tags:this.tagsSelected})};fetch(this.endpointDocuments,o).then(n=>n.json()).then(n=>{console.log(n),n.error==!0||(this.documents=n,this.loadingDocuments=!1)})}else this.loadAllDocuments();this.$Progress.finish(),this.$toast.success("Documento creado correctamente",{position:"bottom-right"}),$("#exampleModalLong").modal("hide")})},previewText(s=null){const e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({auth:this.auth,id:this.documentModal._id,fields:this.documentModal.data.fields})};fetch(this.endpointTextPreview,e).then(o=>o.json()).then(o=>{this.documentModal.data.content=o.content})},openmodalcomplete(){$("#exampleModalLong").modal("show"),this.previewText()},loadTags(){this.$Progress.start();const s={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({auth:this.auth})};fetch(this.endpointTags,s).then(e=>e.json()).then(e=>{if(e.empty){this.loadingFolders=!1,this.tags=[],this.$Progress.finish();return}e.error==!0||(C("data.title",e),this.tags=e,this.loadingFolders=!1,this.$Progress.finish())})},loadPrivateTags(){this.$Progress.start();const s={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({auth:this.auth,data:{type:"shared"}})};fetch(this.endpointPrivateTags,s).then(e=>e.json()).then(e=>{if(e.empty){this.loadingFolders=!1,this.itemsTagsPrivate=[],this.$Progress.finish();return}e.error==!0||(C("data.title",e),this.itemsTagsPrivate=e,this.loadingFolders=!1,this.$Progress.finish())})},loadAllDocuments(){this.$Progress.start();const s={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({auth:this.auth})};fetch(this.endpointGetAllDocumentsShared,s).then(e=>e.json()).then(e=>{if(console.log("dataconsoleee"+e),e.length==0){this.loadingDocuments=!1,this.documents=[],this.$Progress.finish();return}this.documents=e}),fetch(this.endpointGetAllWritingsShared,s).then(e=>e.json()).then(e=>{if(e.length==0){this.loadingDocuments=!1,this.documents=[],this.$Progress.finish();return}this.loadingDocuments=!1,this.documents=[...this.documents,...e],console.log(this.documents),this.$Progress.finish()})},searchDocuments(){const s={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({auth:this.auth,target:this.searchTarget.target})};fetch(this.endpointSearch,s).then(e=>e.json()).then(e=>{if(e.length>0){if(e.length>0)for(var o=e.length-1;o>=0;o--)e[o]._ext={edit_title:!1,edit_description:!1};this.documentsTags=e,this.$Progress.finish()}this.$Progress.finish()})},search(){if(this.searchTargetFolders.target==""){this.loadAllDocuments();return}this.$Progress.start();const s={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({auth:this.auth,target:this.searchTargetFolders.target})};fetch(window.ENDPOINT+"/writings/search",s).then(e=>e.json()).then(e=>{if(e.length==0){this.loadingDocuments=!1,this.documents=[],this.$Progress.finish();return}this.loadingDocuments=!1,this.documents=e,this.$Progress.finish()})},removeFilterTag(s,e){if(this.$Progress.start(),delete this.tagsSelected[s],this.tagsSelected=this.tagsSelected.filter(function(n){return typeof n!="undefined"}),this.tagsSelected.length==0){this.loadAllDocuments();return}const o={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({auth:this.auth,tags:this.tagsSelected})};fetch(this.endpointDocuments,o).then(n=>n.json()).then(n=>{if(n.empty){this.loadingDocuments=!1,this.documents=[],this.$Progress.finish();return}n.error==!0||(this.documents=n,this.$Progress.finish())})},getDocumentModal(s){this.$Progress.start(),this.activeDocumentId=s,this.loadingDocument=!0;const e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({auth:this.auth,id:s})};fetch(this.endpointWriting,e).then(o=>o.json()).then(o=>{if(o.code){this.document=!1,this.loadingDocument=!1,this.$Progress.finish();return}if(o.empty){this.document=!1,this.loadingDocument=!1,this.$Progress.finish();return}if(o.error!=!0){if(o.data.version||(this.version="1.00"),o.data.complete==0){if(this.editor_enabled=!1,o.data.form_complete){this.documentModal=o,this.contentDocument=o.data.content,this.loadingDocument=!1,this.$Progress.finish(),o.data.version&&(this.version="2.00"),this.openmodalcomplete();return}}else this.editor_enabled=!0;this.$Progress.finish()}})},getDocument(s){this.$Progress.start(),this.activeDocumentId=s,this.loadingDocument=!0;const e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({auth:this.auth,id:s})};fetch(this.endpointDocument,e).then(o=>o.json()).then(o=>{if(o.code){this.document=!1,this.loadingDocument=!1,this.$Progress.finish();return}if(o.empty){this.document=!1,this.loadingDocument=!1,this.$Progress.finish();return}o.error==!0||(o.data.complete==0?(this.editor_enabled=!1,this.document=o,this.contentDocument=o.data.content,window.tinymce.activeEditor.setContent(this.contentDocument),this.loadingDocument=!1,this.$Progress.finish()):(this.editor_enabled=!0,this.document=o,this.contentDocument=o.data.content,window.tinymce.activeEditor.setContent(this.contentDocument),this.loadingDocument=!1,this.$Progress.finish()))})},getDocumentsByTag(s,e){this.$Progress.start(),this.tagsSelected.push({text:e,id:s}),this.loadingDocuments=!0;const o={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({auth:this.auth,data:{name:this.tagsSelected.map(n=>n.text),type:"shared"}})};fetch(this.endpointDocumentsByTags,o).then(n=>n.json()).then(n=>{if(n.empty){this.loadingDocuments=!1,this.documents=[],this.$Progress.finish();return}n.error==!0||(this.documents=n,this.loadingDocuments=!1,this.$Progress.finish())})},loadFolders(){const s={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({auth:this.auth})};fetch(this.endpoint,s).then(e=>e.json()).then(e=>{setTimeout(()=>{if(e.empty){this.treeDisplayData=[],this.loadingFolders=!1;return}e.error==!0||(this.treeDisplayData=this.prepareArray(e),this.loadingFolders=!1)},200)})},loadFoldersTree2(){const s={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({auth:this.auth})};fetch(this.endpoint,s).then(e=>e.json()).then(e=>{setTimeout(()=>{if(e.empty){this.treeDisplayData2=[],this.loadingFolders=!1;return}e.error==!0||(this.treeDisplayData2=this.prepareArray(e),this.loadingFolders=!1)},200)})},getDocumentsFromFolder(s,e){this.lastnodeId=s,this.$Progress.start(),this.loadingDocuments=!0;const o={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({auth:this.auth,folders:s})};fetch(this.endpointDocuments,o).then(n=>n.json()).then(n=>{setTimeout(()=>{if(n.empty){this.loadingDocuments=!1,this.documents=[],this.$Progress.finish();return}n.error==!0||(this.documents=n,this.loadingDocuments=!1,this.$Progress.finish())},200)})},mySelectedFunction:function(s,e){console.log(`is ${s} selected ? ${e}`),console.log(this.$refs["my-tree"].getSelectedNode())},selectPathMoveSave(){this.$Progress.start(),console.log(this.selectedIdDocument);const s={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({auth:this.auth,folders:this.documentMoveTemp.data.categories,id:this.selectedIdDocument})};fetch(this.endpointMoveSave,s).then(e=>e.json()).then(e=>{console.log(e),this.modalMoveDocument=!1,this.$Progress.finish(),this.$toast.success("El documento fue movido correctamente",{position:"bottom-right"}),$("#moveDocumentTofolder").modal("hide")})},pathMoveSelectedRemove(s,e){delete this.pathMoveSelected[s],this.pathMoveSelected=this.pathMoveSelected.filter(function(o){return typeof o!="undefined"})},removeFolderInModal(s,e=null){delete this.documentMoveTemp.data.categories[s],this.documentMoveTemp.data.categories=this.documentMoveTemp.data.categories.filter(function(o){return typeof o!="undefined"})},selectPathMove(s){this.documentMoveTemp.data.categories.push({id:s.id,text:s.text})},deleteDocument(s,e=null){this.$Progress.start(),this.selectedIdDocument=s,this.selectedIndexDocument=e;const o={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({auth:this.auth,id:s})};fetch(this.endpointDeleteDocument,o).then(n=>n.json()).then(n=>{this.$Progress.finish(),this.$toast.success("Documento eliminado",{position:"bottom-right"}),delete this.documents[this.selectedIndexDocument],this.loadAllDocuments(),this.documents=this.documents.filter(function(p){return typeof p!="undefined"})})},addNodeFunction:function(s){$("#staticBackdrop2").modal("show"),this.modalCreateNode=s},createFolder(){this.$Progress.start();const s={text:this.nameNewFolder.title,id:Math.floor(Math.random()*100),state:{checked:!1,selected:!1,expanded:!1},parent:this.modalCreateNode.id},e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({auth:this.auth,data:s})};fetch(this.endpointSaveFoldersChild,e).then(o=>o.json()).then(o=>{this.$Progress.finish(),$("#staticBackdrop2").modal("hide"),this.nameNewFolder={title:null},this.getChilds(this.modalCreateNode.id),this.loadFoldersTree2()})},createFolderRoot(){this.$Progress.start();const s={text:this.nameNewFolder.title,id:Math.floor(Math.random()*100),state:{checked:!1,selected:!1,expanded:!1},nodes:[],parent:null};this.treeDisplayData.push(s);var e=this.treeDisplayData;this.treeDisplayData=[],this.treeDisplayData=e;const o={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({auth:this.auth,data:s})};fetch(this.endpointSaveFolders,o).then(n=>n.json()).then(n=>{this.$Progress.finish(),$("#staticBackdrop").modal("hide"),this.nameNewFolder={title:null},this.loadFoldersTree2()})},openContextmenu(s,e,o=null){this.showContextMenu=!0,this.selected.row=e,this.selected.clientX=(s.pageX||s.clientX)+1+"px",this.selected.clientY=(s.pageY||s.clientY)+"px",this.selectedIdDocument=e._id,this.selectedIndexDocument=o,this.pathMoveSelected=e.data.categories},modalDeleteFolder(){const e=this.$refs["my-tree"].findNodePath(this.temp.node.id).slice(-2,-1)[0];if(e===void 0){var o=this.$refs["my-tree"].nodes.findIndex(n=>n.id==this.temp.node.id);this.$refs["my-tree"].nodes.splice(o,1)}else{const n=this.$refs["my-tree"].findNode(e);if(n.nodes===void 0){var o=this.$refs["my-tree"].nodes.findIndex(l=>l.id==this.temp.node.id);this.$refs["my-tree"].nodes.splice(o,1),$("#staticBackdrop4").modal("hide"),this.deleteForlderRequest(this.temp.node.id);return}const p=n.nodes.findIndex(i=>i.id==this.temp.node.id);n.nodes.splice(p,1)}$("#staticBackdrop4").modal("hide"),this.deleteForlderRequest(this.temp.node.id)},openNewTag(){$("#newTagSuggest").modal("show")},deleteFolder(s,e){console.log("deleteforlder",s,e),this.temp={index:e,node:s},$("#staticBackdrop4").modal("show")},deleteForlderRequest(s){this.$Progress.start();var e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({auth:this.auth,id:s})};fetch(window.ENDPOINT+"/shared/delete/folders",e).then(o=>o.json()).then(o=>{this.$Progress.finish()})},saveFolders(s=!1){this.$Progress.start();var e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({auth:this.auth,data:this.treeDisplayData})};if(s)var e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({auth:this.auth,data:this.treeDisplayData,delete:!0,target:this.temp.node})};fetch(this.endpointSave,e).then(o=>o.json()).then(o=>{this.$Progress.finish(),this.pathMoveSelected=[]})},getChilds(s){this.$Progress.start();const e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({auth:this.auth,parent:s})};fetch(window.ENDPOINT+"/shared/get/folders/childs",e).then(o=>o.json()).then(o=>{o.empty||(this.$refs["my-tree"].findNode(s).nodes=this.prepareArray(o),this.nodeSelect=this.prepareArray(o),this.$Progress.finish())})},getChildsTree2(s){this.$Progress.start();const e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({auth:this.auth,parent:s})};fetch(window.ENDPOINT+"/writings/get/folders/child",e).then(o=>o.json()).then(o=>{o.empty||(this.$refs["my-tre-2"].findNode(s).nodes=this.prepareArray(o),this.nodeSelect=this.prepareArray(o),this.$Progress.finish())})},prepareArray(s){for(var e=[],o=s.length-1;o>=0;o--)e.push({id:s[o]._id,text:s[o].data.text,nodes:[{id:"934",text:"Cargando carpetas..",nodes:[],state:{checked:!1,selected:!1,expanded:!1}}],state:{checked:!1,selected:!1,expanded:!1}});return e}}},ti=Object.assign(qs,{setup(s){return u.register("modules/imageDropAndPaste",z),u.register(b.TableCell),u.register(b.TableRow),u.register(b.Table),u.register(b.Contain),u.register("modules/table",b.TableModule),(e,o)=>{const n=L("component"),p=H("tooltip");return a(),d(f,null,[w(X),t("main",null,[t("div",se,[t("div",ie,[t("div",ne,[w(K)]),t("div",ae,[t("div",de,[t("div",le,[t("ul",re,[t("li",he,[t("a",{class:x(["nav-link",{active:e.isActive("folders")}]),onClick:o[0]||(o[0]=c(i=>e.setActive("folders"),["prevent"]))},"Carpetas",2)]),t("li",ce,[t("a",{class:x(["nav-link",{active:e.isActive("tags")}]),onClick:o[1]||(o[1]=c(i=>e.setActive("tags"),["prevent"]))},"Etiquetas",2)])]),t("div",pe,[t("div",{class:x(["tab-pane fade",{"active show":e.isActive("folders")}]),id:"folders"},[t("div",ue,[m(t("input",{type:"text",class:"form-control type-input-3","onUpdate:modelValue":o[2]||(o[2]=i=>e.searchTargetFolders.target=i),onKeyup:o[3]||(o[3]=i=>e.search()),placeholder:"Buscar..."},null,544),[[v,e.searchTargetFolders.target]])]),t("div",me,[e.loadingFolders?(a(),d("div",ge,ye)):r("",!0),e.items.length>0?(a(),d("ul",ve,[(a(!0),d(f,null,y(e.filteredResources,(i,l)=>(a(),d("li",{style:{padding:"0",margin:"0",width:"100%","list-style":"none"},key:l,onClick:c(h=>e.getDocumentsByTag(i.id,i.text),["prevent"])},[t("a",_e,g(i.text),1)],8,be))),128))])):r("",!0)]),t("div",we,[t("a",{href:"#",style:{"font-size":"13px","font-weight":"600"},onClick:o[4]||(o[4]=c(i=>e.openCreateFolderRootModal(),["prevent"]))},De),ke,t("a",{href:"#",style:{"font-size":"13px","font-weight":"600"},onClick:o[5]||(o[5]=c(i=>e.loadAllDocuments(),["prevent"]))}," Todos los documentos"),Pe,w(T(F),{id:"my-tree-id",ref:"my-tree","custom-options":e.myCustomOptions,"custom-styles":e.myCustomStyles,nodes:e.treeDisplayData},null,8,["custom-options","custom-styles","nodes"]),e.treeDisplayData.length==0?(a(),d("span",Se,"No se encontraron carpetas.")):r("",!0)]),t("div",Oe,[t("ul",Ne,[(a(!0),d(f,null,y(e.tagsSelected,(i,l)=>(a(),d("li",{style:{width:"100%",display:"flex","justify-content":"flex-start","align-items":"flex-start","flex-direction":"column","align-content":"flex-start","margin-bottom":"5px"},key:l},[t("a",$e,[_(g(i.text)+" ",1),t("a",{href:"#",style:{"margin-left":"10px"},onClick:h=>e.removeFilterTag(l,i.text)},Me,8,Ce)])]))),128))])])],2),t("div",{class:x(["tab-pane fade",{"active show":e.isActive("tags")}]),id:"tags"},[t("div",Ee,[m(t("input",{type:"text",class:"form-control type-input-3","onUpdate:modelValue":o[6]||(o[6]=i=>e.searchTarget.target=i),placeholder:"Buscar etiqueta.."},null,512),[[v,e.searchTarget.target]])]),t("div",je,[t("a",{href:"#",style:{"font-size":"13px","font-weight":"600"},onClick:o[7]||(o[7]=c(i=>e.openCreateTagModal(),["prevent"]))},Ae)]),t("div",ze,[e.loadingFolders?(a(),d("div",Be,Le)):r("",!0),t("a",{href:"#",style:{"font-size":"13px","font-weight":"600"},onClick:o[8]||(o[8]=c(i=>e.loadAllDocuments(),["prevent"]))}," Todos los documentos"),He,e.tagsSelected.length>0?(a(),d("div",Re,[Ve,t("ul",Ue,[(a(!0),d(f,null,y(e.tagsSelected,(i,l)=>(a(),d("li",{style:{width:"100%",display:"flex","justify-content":"flex-start","align-items":"flex-start","flex-direction":"column","align-content":"flex-start","margin-bottom":"5px"},key:l},[t("a",We,[_(g(i.text)+" ",1),t("a",{href:"#",style:{"margin-left":"10px"},onClick:h=>e.removeFilterTag(l,i.text)},Xe,8,Ge)])]))),128))]),Ke])):r("",!0),t("ul",Qe,[(a(!0),d(f,null,y(e.filteredResourcesPrivateTags,(i,l)=>(a(),d("li",{style:{padding:"0",margin:"0",width:"100%","list-style":"none","line-height":"15px","margin-bottom":"15px"},key:l,onClick:c(h=>e.getDocumentsByPrivate(i._id,i.data.name),["prevent"])},[t("a",et,g(i.data.name),1)],8,Ze))),128))]),t("ul",tt,[(a(!0),d(f,null,y(e.filteredResourcesTags,(i,l)=>(a(),d("li",{style:{padding:"0",margin:"0",width:"100%","list-style":"none","line-height":"15px","margin-bottom":"15px"},key:l,onClick:c(h=>e.getDocumentsByTag(i._id,i.data.title),["prevent"])},[t("a",st,g(i.data.title),1)],8,ot))),128))])])],2)])]),t("div",it,[e.loadingDocuments?(a(),d("div",nt,dt)):r("",!0),(a(!0),d(f,null,y(e.fixerEditMode,(i,l)=>(a(),d("div",{class:x(["col-12",{activeDocument:i._id===e.activeDocumentId}]),style:{padding:"15px","border-bottom":"1px solid #e6e6e6",cursor:"pointer",position:"relative"},key:l,onClick:h=>e.getDocument(i._id),onContextmenu:c(h=>e.openContextmenu(h,i,l),["prevent"])},[i._ext.edit_title==!1?(a(),d("div",rt,[t("span",ht,[_(g(i.data.title)+" ",1),t("img",{src:N,onClick:c(h=>i._ext.edit_title=!0,["prevent"])},null,8,ct)])])):r("",!0),i._ext.edit_title?(a(),d("form",{key:1,onSubmit:c(h=>e.saveEditMode(i._id,l),["prevent"]),class:"col-12",style:{padding:"0",display:"flex","margin-bottom":"10px"}},[m(t("input",{type:"text",class:"form-control col-12","onUpdate:modelValue":h=>i.data.title=h,style:{"font-size":"13px","border-radius":"30px",height:"30px","min-height":"30px","max-height":"30px",background:"white","font-weight":"700"}},null,8,ut),[[v,i.data.title]]),mt],40,pt)):r("",!0),m((a(),d("a",gt,[i._ext.edit_description?r("",!0):(a(),d("p",ft,[_(g(i.data.description)+" ",1),t("img",{src:N,onClick:c(h=>i._ext.edit_description=!0,["prevent"])},null,8,yt)]))])),[[p,"Editar descripci\xF3n"]]),i._ext.edit_description?(a(),d("form",{key:2,onSubmit:c(h=>e.saveEditMode(i._id,l),["prevent"]),class:"col-12",style:{padding:"0px",display:"flex","flex-direction":"row","flex-wrap":"wrap","margin-bottom":"10px"}},[m(t("input",{type:"text",class:"form-control","onUpdate:modelValue":h=>i.data.description=h,style:{"font-size":"12px","border-radius":"8px",height:"fit-content","min-height":"fit-content","max-height":"fit-content",background:"white","margin-bottom":"5px"}},null,8,bt),[[v,i.data.description]]),_t],40,vt)):r("",!0),t("div",wt,[m((a(),d("a",null,[i.data.share==0?(a(),d("img",xt)):r("",!0),Tt])),[[p,"Documento privado"]]),m((a(),d("a",null,[i.data.share==1?(a(),d("img",Dt)):r("",!0)])),[[p,"Documento publico"]]),i.data.complete==1?m((a(),d("img",kt,null,512)),[[p,"Automatizado"]]):r("",!0),i.data.complete==0?m((a(),d("span",Pt,[i.data.form_complete?(a(),d("img",St)):r("",!0)])),[[p,"Modelo"]]):r("",!0)])],42,lt))),128))]),t("div",Ot,[e.loadingDocument?(a(),d("div",Nt,Ct)):r("",!0),e.document?(a(),d("div",Ft,[t("div",Mt,[t("div",Et,[t("b",null,g(e.document.data.title),1)]),t("div",jt,[e.document.data.complete==0?(a(),d("span",It,[e.document.data.form_complete?m((a(),d("a",{key:0,href:"#",style:{margin:"5px"},onClick:o[9]||(o[9]=i=>e.getDocumentModal(e.document._id))},At)),[[p,"Expandir"]]):r("",!0)])):r("",!0),e.document.data.complete==1?m((a(),d("a",{key:1,href:"#",style:{margin:"5px"},onClick:o[10]||(o[10]=i=>e.openFullScreen())},Bt)),[[p,"Expandir"]]):r("",!0),(a(),D(R(e.document.data.complete==1),null,{default:S(()=>[t("div",Jt,[Lt,t("div",Ht,[t("a",{class:"dropdown-item",href:"#",onClick:o[11]||(o[11]=c(i=>e.exportWord(),["prevent"]))},"Documento Word"),t("a",{class:"dropdown-item",href:"#",onClick:o[12]||(o[12]=c(i=>e.exportPDF(),["prevent"]))},"Documento PDF")])])]),_:1})),e.document.data.share==1?(a(),D(M,{key:2,id:e.document.data.id_share_comuniy},null,8,["id"])):r("",!0),t("div",Rt,[w(A,{document:e.document,onGoEditDocumentPrivate:o[13]||(o[13]=i=>e.goEditDocumentPrivate(e.document)),onOpenModalMoveDocument:o[14]||(o[14]=i=>e.openModalMoveDocument()),onOpenModalAddTags:o[15]||(o[15]=i=>e.openModalAddTags()),onSaveShare:o[16]||(o[16]=i=>e.hacerPublico(e.document)),onDeleteDocument:o[17]||(o[17]=i=>e.deleteDocument(e.activeDocumentId)),onOpenCompartirPrivada:o[18]||(o[18]=i=>e.openCompartirPrivada())},null,8,["document"])])])])])):r("",!0),w(T(P),{id:"crearEscrito","api-key":"9a51lim0mxaojg1o8fhwtga2lfro3fnyw6k21n3r146f7weq",modelValue:e.contentDocument,init:{lenguage:"es_ES",branding:!1,height:"91vh",menubar:!0,powerpaste_allow_local_images:!0,powerpaste_keep_unsupported_src:!0,smart_paste:!0,powerpaste_html_import:"prompt",powerpaste_word_import:"clean",plugins:"anchor autolink charmap codesample emoticons image link lists media searchreplace table visualblocks wordcount checklist mediaembed casechange export formatpainter pageembed linkchecker a11ychecker tinymcespellchecker permanentpen powerpaste advtable advcode editimage tableofcontents footnotes mergetags autocorrect typography inlinecss",toolbar:"undo redo |  fontfamily forecolor  fontsize | bold italic underline strikethrough  removeformat| localfile link image media table mergetags | addcomment showcomments | spellcheckdialog typography blocks| align lineheight | checklist numlist bullist indent outdent | emoticons charmap | "}},null,8,["modelValue"])])])])])])]),t("div",Vt,[t("div",Ut,[t("div",Wt,[t("div",Gt,[t("div",Yt,[t("div",Xt,[t("b",null,g(e.document.data.title),1),t("p",null,g(e.document.data.description),1),Kt]),t("div",Qt,[t("div",Zt,[e.version=="1.00"?(a(),d("div",eo,[(a(!0),d(f,null,y(e.documentModal.data.fields,(i,l)=>(a(),d("div",{class:"form-group",key:l,style:{"text-align":"left",padding:"10px"}},[t("label",to,g(i.replace),1),m(t("input",{type:"text",class:"form-control input-field",style:{height:"30px !important","min-height":"30px !important","border-top":"none !important","border-right":"none !important","border-bottom":"2px solid rgb(141, 141, 141) !important","border-left":"none !important","border-image":"initial !important",background:"transparent !important","font-size":"13px !important",color:"black !important","font-weight":"500 !important","border-radius":"0 !important"},"onUpdate:modelValue":h=>i.user.input=h,onKeyup:h=>e.previewText(l)},null,40,oo),[[v,i.user.input]])]))),128))])):r("",!0),e.version=="2.00"?(a(),d("div",so,[(a(!0),d(f,null,y(e.documentModal.data.fields,(i,l)=>(a(),d("div",{key:l},[i.existent==!1?(a(),d("div",io,[t("label",no,g(i.replace),1),m(t("input",{type:"text",class:"form-control input-field",style:{height:"30px !important","min-height":"30px !important","border-top":"none !important","border-right":"none !important","border-bottom":"2px solid rgb(141, 141, 141) !important","border-left":"none !important","border-image":"initial !important",background:"transparent !important","font-size":"13px !important",color:"black !important","font-weight":"500 !important","border-radius":"0 !important"},"onUpdate:modelValue":h=>i.user.input=h,onKeyup:h=>e.previewText(l)},null,40,ao),[[v,i.user.input]])])):r("",!0)]))),128))])):r("",!0),t("div",lo,[t("button",{type:"submit",class:"btn btn-primary",style:{width:"120px",position:"relative"},onClick:o[19]||(o[19]=i=>e.createDocument())}," Crear ")])])]),t("div",ro,[t("div",ho,[co,t("div",{class:"col-12 content",innerHTML:e.documentModal.data.content,style:{color:"black"}},null,8,po)])])])])])])]),t("div",{class:"box",onContextmenu:o[22]||(o[22]=i=>e.onContextMenu(i)),style:V([{position:"fixed","z-index":"1000",background:"rgb(248 248 248)",width:"150px",height:"auto",padding:"10px",border:"1px solid rgb(226, 226, 226) !important","border-radius":"6px"},{top:e.selected.clientY,left:e.selected.clientX}])},[t("ul",uo,[t("li",mo,[t("a",{href:"#",style:{"font-size":"11px","font-weight":"600",color:"black"},onClick:o[20]||(o[20]=i=>e.openModalMoveDocument())},"Mover")]),t("li",go,[t("a",{href:"#",style:{"font-size":"11px","font-weight":"600",color:"black"},onClick:o[21]||(o[21]=i=>e.deleteDocument())},"Eliminar")])])],36),t("div",fo,[t("div",yo,[t("div",vo,[bo,t("div",_o,[t("div",wo,[xo,m(t("input",{type:"text",class:"modal-text","onUpdate:modelValue":o[23]||(o[23]=i=>O(valEmail)?valEmail.value=i:null),style:{height:"30px","min-height":"33px","border-radius":"30px",border:"1px solid rgb(199, 199, 199)",background:"rgb(231, 231, 231)","margin-top":"15px"}},null,512),[[v,e.valEmail]])]),To,t("div",Do,[t("button",{type:"submit",class:"btn btn-primary",style:{width:"120px",position:"relative","margin-top":"3vh"},onClick:o[24]||(o[24]=i=>e.compartirPrivado(e.valEmail))}," Compartir ")])])])])]),t("div",ko,[t("div",Po,[t("div",So,[t("form",{class:"modal-content",onSubmit:o[26]||(o[26]=c(i=>e.createFolderRoot(),["prevent"])),style:{"border-radius":"10px",border:"none"}},[Oo,t("div",No,[m(t("input",{type:"text",class:"form-control type-input-2","onUpdate:modelValue":o[25]||(o[25]=i=>e.nameNewFolder.title=i),required:"true"},null,512),[[v,e.nameNewFolder.title]])]),$o],32)])])]),t("div",Co,[t("div",Fo,[t("div",Mo,[t("form",{class:"modal-content",onSubmit:o[28]||(o[28]=c(i=>e.createFolder(),["prevent"]))},[Eo,t("div",jo,[m(t("input",{type:"text",class:"form-control type-input-2","onUpdate:modelValue":o[27]||(o[27]=i=>e.nameNewFolder.title=i),required:"true"},null,512),[[v,e.nameNewFolder.title]])]),Io],32)])])]),t("div",qo,[t("div",Ao,[t("div",zo,[t("form",{class:"modal-content",onSubmit:o[29]||(o[29]=c(i=>e.modalDeleteFolder(),["prevent"])),style:{"border-radius":"10px",border:"none"}},Jo,32)])])]),t("div",Lo,[t("div",Ho,[t("div",Ro,[t("div",Vo,[t("h5",Uo,g(e.document.data.title),1),Wo]),t("div",Go,[t("div",Yo,[e.document.data.title?(a(),d("div",Xo,[t("div",Ko,[Qo,t("div",Zo,[e.document.data.complete==0?(a(),d("span",es,[e.document.data.form_complete?(a(),d("a",{key:0,href:"#",class:"textHover",style:{margin:"5px"},onClick:o[30]||(o[30]=i=>e.getDocumentModal(e.document._id))},ss)):r("",!0)])):r("",!0),e.document.data.complete==1?(a(),d("a",{key:1,href:"#",class:"textHover",style:{margin:"5px"},onClick:o[31]||(o[31]=i=>e.openFullScreen())},as)):r("",!0),e.document.data.complete==1?(a(),D(n,{key:2},{default:S(()=>[t("div",ds,[ls,t("div",rs,[t("a",{class:"dropdown-item",href:"#",onClick:o[32]||(o[32]=c(i=>e.exportWord(),["prevent"]))},"Documento Word"),t("a",{class:"dropdown-item",href:"#",onClick:o[33]||(o[33]=c(i=>e.exportPDF(),["prevent"]))},"Documento PDF")])])]),_:1})):r("",!0),e.document.data.share==1?(a(),D(M,{key:3,id:e.document.data.id_share_comuniy},null,8,["id"])):r("",!0)])])])):r("",!0),w(T(P),{id:"crearEscrito","api-key":"9a51lim0mxaojg1o8fhwtga2lfro3fnyw6k21n3r146f7weq",modelValue:e.contentDocument,init:{lenguage:"es_ES",branding:!1,height:"91vh",menubar:!0,powerpaste_allow_local_images:!0,powerpaste_keep_unsupported_src:!0,smart_paste:!0,powerpaste_html_import:"prompt",powerpaste_word_import:"clean",plugins:"anchor autolink charmap codesample emoticons image link lists media searchreplace table visualblocks wordcount checklist mediaembed casechange export formatpainter pageembed linkchecker a11ychecker tinymcespellchecker permanentpen powerpaste advtable advcode editimage tableofcontents footnotes mergetags autocorrect typography inlinecss",toolbar:"undo redo |  fontfamily forecolor  fontsize | bold italic underline strikethrough  removeformat| localfile link image media table mergetags | addcomment showcomments | spellcheckdialog typography blocks| align lineheight | checklist numlist bullist indent outdent | emoticons charmap | "}},null,8,["modelValue"])])])])])]),t("div",hs,[t("div",cs,[t("form",{class:"modal-content",style:{"border-radius":"10px",border:"none"},onSubmit:o[35]||(o[35]=c(i=>e.activeDocumentId?e.insertDocumentTags(e.activeDocumentId,e.tagSelected):e.createNewTag(e.newTagName),["prevent"]))},[ps,t("div",us,[t("ul",ms,[(a(!0),d(f,null,y(e.tagSelected,(i,l)=>(a(),d("li",{key:i._id,style:{padding:"2px 16px",width:"max-content",display:"flex","column-gap":"6px","align-items":"center","border-radius":"12px",background:"#f6f5f5","border-bottom":"1px solid #e6e6e6","font-size":"12px",color:"black","font-weight":"500"},onClick:h=>e.selectTag(l)},[t("p",fs,g(i.data.name),1),ys],8,gs))),128))]),t("div",vs,[bs,m(t("input",{"onUpdate:modelValue":o[34]||(o[34]=i=>O(newTagName)?newTagName.value=i:null),type:"text",class:"form-control input-search-dashboard",placeholder:"Escribe para agregar una etiqueta"},null,512),[[v,e.newTagName]])]),e.activeDocumentId?(a(),d("div",_s,[(a(!0),d(f,null,y(e.tags,(i,l)=>(a(),d("div",{key:i._id,style:{padding:"2px 16px",width:"max-content",display:"flex","column-gap":"6px","align-items":"center","border-radius":"12px",background:"#f6f5f5","border-bottom":"1px solid #e6e6e6","font-size":"12px",color:"black","font-weight":"500"},onClick:h=>e.selectTag(l)},[t("p",xs,g(i.data.name),1),Ts],8,ws))),128))])):r("",!0)]),Ds],32)])]),t("div",ks,[t("div",Ps,[t("form",{class:"modal-content",onSubmit:o[36]||(o[36]=c(i=>e.selectPathMoveSave(),["prevent"]))},[Ss,t("div",Os,[w(T(F),{id:"my-tree-id",ref:"my-tre-2","custom-options":e.myCustomOptions2,"custom-styles":e.myCustomStyles2,nodes:e.treeDisplayData2},null,8,["custom-options","custom-styles","nodes"]),Ns,e.documentMoveTemp?(a(),d("ul",$s,[(a(!0),d(f,null,y(e.documentMoveTemp.data.categories,(i,l)=>(a(),d("li",Cs,[t("a",Fs,[_(g(i.text)+" ",1),t("a",{href:"#",style:{"margin-left":"10px"},onClick:h=>e.removeFolderInModal(l,i.id)},js,8,Ms)])]))),256))])):r("",!0)]),Is],32)])])],64)}}});export{ti as default};
