import{o as r,c as d,a as c,b as t,k as m,H as a,x as g,A as f,F as p,D as _,n as h,l as v,m as y}from"./vendor.3ce90362.js";import{_ as w}from"./flecha-izquierda.f982a190.js";import{n as b,c as x}from"./navbar.3dc83e26.js";import{T as u}from"./toolbar-writings-comunity.edad3899.js";import"./Logocompleto.3df4452e.js";import"./etiqueta.f26d8a8f.js";import"./cuota.edac84f3.js";const T={class:"container-fluid"},D={class:"row"},N={class:"col-md-2",style:{height:"calc(100vh - 70px)",overflow:"hidden","overflow-y":"auto",padding:"0"}},P={class:"col-md-10 text-center",style:{padding:"20px",border:"1px solid #E2E2E2",background:"rgb(255,255,255,0.1)",height:"calc(100vh - 70px)",overflow:"hidden","overflow-y":"auto"}},k={class:"row justify-content-center"},O={class:"col-12 text-left",style:{"padding-top":"0","padding-bottom":"20px"}},S=t("img",{src:w,style:{height:"20px",width:"20px"}},null,-1),L=[S],$={class:"col-12 text-left"},M={style:{padding:"0",margin:"0","margin-top":"8px","font-size":"14px"}},z=h("Compartido por: "),C={style:{padding:"0",margin:"0","margin-top":"8px","font-size":"14px"}},E=h("Puntuacion: "),j=["innerHTML"],V=t("p",{style:{padding:"0",margin:"0","margin-top":"8px","font-size":"14px"}},"Para crear el documento, completa el siguiente cuestionario",-1),B={class:"col-4",style:{position:"sticky",top:"0"}},H={class:"col-12 view-writing-fields-content"},I={class:"form-group",style:{"text-align":"left",padding:"10px"}},q={style:{"font-size":"13px",color:"black","font-weight":"600"}},A=["onUpdate:modelValue","onKeyup"],J={class:"col-8"},F={class:"col-12 view-writing-content"},K=t("div",{class:"col-12 header"}," Previsualizacion del documento ",-1),U=["innerHTML"],G={components:{ToolBarDocument:u},data(){return{auth:localStorage.getItem("auth"),endpoint:window.ENDPOINT+"/comunity/documents/get",endpointTextPreview:window.ENDPOINT+"/comunity/fields/preview",endpointSaveDocument:window.ENDPOINT+"/comunity/document/copy/writing",endpointDetails:window.ENDPOINT+"/writings/documents/check/details",documentCopy:!1,details:{copy:!1,validate:!1},fields:[],content:null,document:{data:{title:"",description:"",content:"",validate:!1,user:{data:{profile:{lastname:null,firstname:null}}}}}}},created(){},mounted(){},computed:{},methods:{createDocument(){this.$Progress.start();const o={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({auth:this.auth,id:this.document._id,doc_original:this.document.data.doc_original,fields:this.fields,content:this.content})};fetch(window.ENDPOINT+"/comunity/document/create/writing",o).then(e=>e.json()).then(e=>{this.$Progress.finish(),this.$toast.success("Documento creado correctamente",{position:"bottom-right"}),this.$router.push({name:"my-writings-folders",query:{id:e.id}})})},getStars(o){if(o<=10)return 1;if(o<=20)return 2;if(o<=30)return 3;if(o<=40)return 4;if(o<=50||o>=50)return 5},displayStars(o){for(var e='<svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="24px" viewBox="0 0 24 24" width="24px" fill="#000000" style="fill: #ead723"><g><path d="M0,0h24v24H0V0z" fill="none"/><path d="M0,0h24v24H0V0z" fill="none"/></g><g><path d="M12,17.27L18.18,21l-1.64-7.03L22,9.24l-7.19-0.61L12,2L9.19,8.63L2,9.24l5.46,4.73L5.82,21L12,17.27z"/></g></svg>',i=this.getStars(o),n=1,s="";n<=i;)s=s+e,n++;return console.log(i,n,s),s},getDocument(o){this.$Progress.start();const e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({auth:this.auth,id:o})};fetch(this.endpoint,e).then(i=>i.json()).then(i=>{this.document=i,this.fieldsDisplay(i.data.fields),this.content=i.data.content,this.getDetails=!0,this.$Progress.finish()})},fieldsDisplay(o){this.fields=o},changeMode(o){},search(){},pause(){},hover(){},fieldsDisplay(o){this.fields=o},previewText(o){const e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({auth:this.auth,id:this.$route.params.id,fields:this.fields})};fetch(this.endpointTextPreview,e).then(i=>i.json()).then(i=>{console.log(i),this.content=i.content})}}},et=Object.assign(G,{setup(o){return(e,i)=>(r(),d(p,null,[c(b),t("form",null,[t("div",T,[t("div",D,[t("div",N,[c(x)]),t("div",P,[t("div",k,[t("div",O,[t("a",{href:"@",onClick:i[0]||(i[0]=m(n=>e.$router.go(-1),["prevent"]))},L)]),t("div",$,[t("b",null,a(e.document.data.title),1),t("p",null,a(e.document.data.description),1),t("p",M,[z,t("b",null,a(e.document.data.user.data.profile.firstname)+" "+a(e.document.data.user.data.profile.lastname),1)]),t("p",C,[E,t("div",{innerHTML:e.displayStars(e.document.data.cout_validate),style:{display:"inline-block"}},null,8,j)]),V]),e.getDetails?(r(),g(u,{key:0,id:e.document._id},null,8,["id"])):f("",!0),t("div",B,[t("div",H,[(r(!0),d(p,null,_(e.document.data.fields,(n,s)=>(r(),d("div",I,[t("label",q,a(n.replace),1),v(t("input",{type:"text",class:"form-control input-field",style:{height:"30px !important","min-height":"30px !important","border-top":"none !important","border-right":"none !important","border-bottom":"2px solid rgb(141, 141, 141) !important","border-left":"none !important","border-image":"initial !important",background:"transparent !important","font-size":"13px !important",color:"black !important","font-weight":"500 !important","border-radius":"0 !important"},"onUpdate:modelValue":l=>n.user.input=l,onKeyup:l=>e.previewText(s)},null,40,A),[[y,n.user.input]])]))),256)),t("a",{class:"btn btn-primary",style:{width:"120px",position:"relative"},onClick:i[1]||(i[1]=n=>e.createDocument())},"Crear")])]),t("div",J,[t("div",F,[K,t("div",{class:"col-12 content",innerHTML:e.content},null,8,U)])])])])])])])],64))}});export{et as default};
