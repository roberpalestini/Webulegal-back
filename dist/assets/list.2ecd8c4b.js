import{o as a,c as d,a as p,b as t,k as l,F as m,D as v,l as n,m as r,a1 as u,n as c,H as h,A as _}from"./vendor.3ce90362.js";import{_ as y}from"./edit.dc69b3f2.js";import{_ as b}from"./trash.123024ab.js";import{n as S,c as P}from"./navbar.3dc83e26.js";import"./Logocompleto.3df4452e.js";const E={class:"container-fluid"},w={class:"row"},N={class:"col-md-2",style:{height:"calc(100vh - 70px)",overflow:"hidden","overflow-y":"auto",padding:"0"}},O={class:"col-md-10 text-center",style:{padding:"20px",border:"1px solid #E2E2E2",background:"white",height:"calc(100vh - 70px)",overflow:"hidden","overflow-y":"auto","border-bottom":"1px solid #E5E5E5"}},T={class:"row justify-content-center"},k={class:"col-md-12"},j={class:"col-md-12",style:{"margin-bottom":"30px"}},x={style:{"font-weight":"bold","text-align":"left","font-size":"17px"}},C=c("Medios de pago "),I={class:"table"},D=t("thead",null,[t("tr",null,[t("th",{scope:"col"},"#"),t("th",{scope:"col"},"Titulo"),t("th",{scope:"col"},"Predeterminado"),t("th",{scope:"col"},"Precio final"),t("th",{scope:"col"})])],-1),V={scope:"row"},U={key:0,class:"text-success"},q=c(),A={key:1,class:"text-danger"},B=["onClick"],J=t("img",{src:y,style:{width:"14px",height:"14px","margin-right":"5px"}},null,-1),L=c(" Editar"),z=[J,L],M=["onClick"],F=t("img",{src:b,style:{width:"14px",height:"14px","margin-right":"5px"}},null,-1),G=c(" Eliminar"),H=[F,G],K={class:"modal fade",id:"createPayment","data-backdrop":"static","data-keyboard":"true",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},Q={class:"modal-dialog modal-dialog-centered"},R=t("div",{class:"modal-header text-center"},[t("h5",{class:"modal-title"},"Nuevo precio"),t("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},[t("span",{"aria-hidden":"true"},"\xD7")])],-1),W={class:"modal-body"},X={class:"form-group"},Y=t("label",null,"Titulo",-1),Z={class:"form-group"},tt=t("label",null,"Precio",-1),et={class:"form-group"},ot=t("label",null,"Activar precio predeterminado",-1),st=t("option",{value:"true"},"Si",-1),it=t("option",{value:"false"},"No",-1),nt=[st,it],at=t("div",{class:"modal-footer",style:{border:"none"}},[t("button",{type:"submit",class:"btn btn-primary",style:{"font-size":"15px"}}," Guardar ")],-1),dt={class:"modal fade",id:"editPayment","data-backdrop":"static","data-keyboard":"true",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},lt={class:"modal-dialog modal-dialog-centered"},rt=t("div",{class:"modal-header text-center"},[t("h5",{class:"modal-title"},"Editar precio"),t("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},[t("span",{"aria-hidden":"true"},"\xD7")])],-1),ct={class:"modal-body"},ht={class:"form-group"},pt=t("label",null,"Titulo",-1),mt={class:"form-group"},ut=t("label",null,"Precio",-1),_t={class:"form-group"},ft=t("label",null,"Activar precio predeterminado",-1),gt=t("option",{value:"true"},"Si",-1),vt=t("option",{value:"false"},"No",-1),yt=[gt,vt],bt=t("div",{class:"modal-footer",style:{border:"none"}},[t("button",{type:"submit",class:"btn btn-primary",style:{"font-size":"15px"}}," Guardar ")],-1),St={data(){return{settings:{access_token:null,mode:null},form:{title:null,unit_price:0,active:!1},formEdit:{title:null,unit_price:0,active:!1},endpoint:window.ENDPOINT+"/admin/payments",endpointSave:window.ENDPOINT+"/admin/payments/create",endpointUpdate:window.ENDPOINT+"/admin/payments/edit",endpointDelete:window.ENDPOINT+"/admin/payments/delete",endpointSaveSettings:window.ENDPOINT+"/admin/payments/settings/edit",endpointLoadSettings:window.ENDPOINT+"/admin/payments/settings/get",data:[]}},created(){this.load()},mounted(){},computed:{},methods:{openNew(){$("#createPayment").modal("show")},openEdit(i){this.formEdit=this.data[i],$("#editPayment").modal("show")},removeAction(i){this.$Progress.start();const e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({auth:localStorage.getItem("auth"),id:i})};fetch(this.endpointDelete,e).then(o=>o.json()).then(o=>{this.$Progress.finish(),this.load()})},load(){this.$Progress.start();const i={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({auth:localStorage.getItem("auth")})};fetch(this.endpoint,i).then(e=>e.json()).then(e=>{this.data=e,this.$Progress.finish()})},loadSettings(){this.$Progress.start();const i={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({auth:localStorage.getItem("auth")})};fetch(this.endpointLoadSettings,i).then(e=>e.json()).then(e=>{this.settings=e,this.$Progress.finish()})},saveSettings(){this.$Progress.start();const i={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({auth:localStorage.getItem("auth"),data:this.settings})};fetch(this.endpointSaveSettings,i).then(e=>e.json()).then(e=>{this.$Progress.finish(),this.load(),this.loadSettings()})},save(){this.$Progress.start();const i={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({auth:localStorage.getItem("auth"),data:this.form})};fetch(this.endpointSave,i).then(e=>e.json()).then(e=>{this.$Progress.finish(),this.load(),$("#createPayment").modal("hide")})},saveEdit(){this.$Progress.start();const i={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({auth:localStorage.getItem("auth"),data:{title:this.formEdit.title,unit_price:this.formEdit.unit_price,active:this.formEdit.active},id:this.formEdit._id})};fetch(this.endpointUpdate,i).then(e=>e.json()).then(e=>{this.$Progress.finish(),this.load(),$("#editPayment").modal("hide")})}}},Tt=Object.assign(St,{setup(i){return(e,o)=>(a(),d(m,null,[p(S),t("main",null,[t("div",E,[t("div",w,[t("div",N,[p(P)]),t("div",O,[t("div",T,[t("div",k,[t("div",j,[t("h4",x,[C,t("button",{type:"submit",class:"btn btn-primary",style:{width:"auto",position:"relative","z-index":"1000"},onClick:o[0]||(o[0]=l(s=>e.openNew(),["prevent"]))},"A\xF1adir nuevo")])]),t("table",I,[D,t("tbody",null,[(a(!0),d(m,null,v(e.data,(s,f)=>(a(),d("tr",null,[t("th",V,h(s._id),1),t("td",null,h(s.title),1),t("td",null,[s.active=="true"?(a(),d("span",U,"Si")):_("",!0),q,s.active=="false"?(a(),d("span",A,"No")):_("",!0)]),t("td",null,"$"+h(s.unit_price),1),t("td",null,[t("a",{href:"#",onClick:l(g=>e.openEdit(f),["prevent"])},z,8,B),t("a",{href:"#",onClick:l(g=>e.removeAction(s._id),["prevent"]),style:{"font-weight":"500","margin-left":"15px"}},H,8,M)])]))),256))])])])])])])])]),t("div",K,[t("div",Q,[t("form",{class:"modal-content",onSubmit:o[4]||(o[4]=l(s=>e.save(),["prevent"]))},[R,t("div",W,[t("div",X,[Y,n(t("input",{type:"text",class:"form-control","onUpdate:modelValue":o[1]||(o[1]=s=>e.form.title=s)},null,512),[[r,e.form.title]])]),t("div",Z,[tt,n(t("input",{type:"number",class:"form-control","onUpdate:modelValue":o[2]||(o[2]=s=>e.form.unit_price=s)},null,512),[[r,e.form.unit_price]])]),t("div",et,[ot,n(t("select",{class:"form-control","onUpdate:modelValue":o[3]||(o[3]=s=>e.form.active=s)},nt,512),[[u,e.form.active]])])]),at],32)])]),t("div",dt,[t("div",lt,[t("form",{class:"modal-content",onSubmit:o[8]||(o[8]=l(s=>e.saveEdit(),["prevent"]))},[rt,t("div",ct,[t("div",ht,[pt,n(t("input",{type:"text",class:"form-control","onUpdate:modelValue":o[5]||(o[5]=s=>e.formEdit.title=s)},null,512),[[r,e.formEdit.title]])]),t("div",mt,[ut,n(t("input",{type:"number",class:"form-control","onUpdate:modelValue":o[6]||(o[6]=s=>e.formEdit.unit_price=s)},null,512),[[r,e.formEdit.unit_price]])]),t("div",_t,[ft,n(t("select",{class:"form-control","onUpdate:modelValue":o[7]||(o[7]=s=>e.formEdit.active=s)},yt,512),[[u,e.formEdit.active]])])]),bt],32)])])],64))}});export{Tt as default};
