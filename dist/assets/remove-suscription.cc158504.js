import{o as n,c as d,a as h,b as t,F as c,D as m,k as p,l,m as r,A as f,H as i,n as u}from"./vendor.3ce90362.js";import{n as g,c as _}from"./navbar.3dc83e26.js";import"./Logocompleto.3df4452e.js";const b={class:"container-fluid"},y={class:"row"},v={class:"col-md-2",style:{height:"calc(100vh - 70px)",overflow:"hidden","overflow-y":"auto",padding:"0"}},E={class:"col-md-10 text-center",style:{padding:"20px",border:"1px solid #E2E2E2",background:"white",height:"calc(100vh - 70px)",overflow:"hidden","overflow-y":"auto","border-bottom":"1px solid #E5E5E5"}},S={class:"row justify-content-center"},P={class:"col-md-12"},w=t("div",{class:"col-md-12",style:{"margin-bottom":"30px"}},[t("h4",{style:{"font-weight":"bold","text-align":"left","font-size":"17px"}},"Bajas de suscripcion")],-1),N={class:"table"},O=t("thead",null,[t("tr",null,[t("th",{scope:"col"},"#"),t("th",{scope:"col"},"Email"),t("th",{scope:"col"},"Nombre y apellido"),t("th",{scope:"col"},"Fecha de baja"),t("th",{scope:"col"},"Id de suscripcion")])],-1),T={scope:"row"},x={class:"modal fade",id:"createPayment","data-backdrop":"static","data-keyboard":"true",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},j={class:"modal-dialog modal-dialog-centered"},k=t("div",{class:"modal-header text-center"},[t("h5",{class:"modal-title"},"Nuevo codigo"),t("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},[t("span",{"aria-hidden":"true"},"\xD7")])],-1),I={class:"modal-body"},C={class:"form-group"},D=t("label",null,"Titulo",-1),V={class:"form-group"},U=t("label",null,"Codigo",-1),B={class:"form-group"},L=t("label",null,"Precio",-1),q=t("div",{class:"modal-footer",style:{border:"none"}},[t("button",{type:"submit",class:"btn btn-primary",style:{"font-size":"15px"}}," Guardar ")],-1),J={class:"modal fade",id:"editPayment","data-backdrop":"static","data-keyboard":"true",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},z={class:"modal-dialog modal-dialog-centered"},F=t("div",{class:"modal-header text-center"},[t("h5",{class:"modal-title"},"Editar codigo"),t("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},[t("span",{"aria-hidden":"true"},"\xD7")])],-1),R={class:"modal-body"},A={class:"form-group"},G=t("label",null,"Titulo",-1),M={class:"form-group"},H=t("label",null,"Codigo",-1),K={class:"form-group"},Q=t("label",null,"Precio",-1),W=t("div",{class:"modal-footer",style:{border:"none"}},[t("button",{type:"submit",class:"btn btn-primary",style:{"font-size":"15px"}}," Guardar ")],-1),X={class:"modal fade",id:"openRegisters","data-backdrop":"static","data-keyboard":"true",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},Y={class:"modal-dialog modal-dialog-centered"},Z={class:"modal-content"},tt=t("div",{class:"modal-header text-center"},[t("h5",{class:"modal-title"},"Usuarios registrados"),t("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},[t("span",{"aria-hidden":"true"},"\xD7")])],-1),et={key:0,class:"modal-body"},ot={class:"col-md-12 text-left",style:{padding:"15px","font-size":"12px","margin-bottom":"15px",border:"1px solid #E7E7E7"}},st=["src"],at=u(),it={style:{"font-weight":"600","font-size":"14px"}},nt={data(){return{settings:{access_token:null,mode:null},form:{title:null,unit_price:0,code:null},formEdit:{title:null,unit_price:0,code:null},endpoint:window.ENDPOINT+"/admin/payments/suscriptions/remove",endpointSave:window.ENDPOINT+"/admin/payments/code/create",endpointUpdate:window.ENDPOINT+"/admin/payments/code/edit",endpointDelete:window.ENDPOINT+"/admin/payments/code/delete",endpointSaveSettings:window.ENDPOINT+"/admin/payments/settings/edit",endpointLoadSettings:window.ENDPOINT+"/admin/payments/settings/get",data:[],registers:[]}},created(){this.load()},mounted(){},computed:{},methods:{openRegisters(a){a.length>0&&(this.registers=a,$("#openRegisters").modal("show"))},openNew(){$("#createPayment").modal("show")},openEdit(a){this.formEdit=this.data[a],$("#editPayment").modal("show")},removeAction(a){this.$Progress.start();const e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({auth:localStorage.getItem("auth"),id:a})};fetch(this.endpointDelete,e).then(s=>s.json()).then(s=>{this.$Progress.finish(),this.load()})},load(){this.$Progress.start();const a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({auth:localStorage.getItem("auth")})};fetch(this.endpoint,a).then(e=>e.json()).then(e=>{this.data=e,this.$Progress.finish()})},loadSettings(){this.$Progress.start();const a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({auth:localStorage.getItem("auth")})};fetch(this.endpointLoadSettings,a).then(e=>e.json()).then(e=>{this.settings=e,this.$Progress.finish()})},saveSettings(){this.$Progress.start();const a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({auth:localStorage.getItem("auth"),data:this.settings})};fetch(this.endpointSaveSettings,a).then(e=>e.json()).then(e=>{this.$Progress.finish(),this.load(),this.loadSettings()})},save(){this.$Progress.start();const a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({auth:localStorage.getItem("auth"),data:this.form})};fetch(this.endpointSave,a).then(e=>e.json()).then(e=>{this.$Progress.finish(),this.load(),$("#createPayment").modal("hide")})},saveEdit(){this.$Progress.start();const a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({auth:localStorage.getItem("auth"),data:{title:this.formEdit.title,unit_price:this.formEdit.unit_price,active:this.formEdit.active},id:this.formEdit._id})};fetch(this.endpointUpdate,a).then(e=>e.json()).then(e=>{this.$Progress.finish(),this.load(),$("#editPayment").modal("hide")})}}},ht=Object.assign(nt,{setup(a){return(e,s)=>(n(),d(c,null,[h(g),t("main",null,[t("div",b,[t("div",y,[t("div",v,[h(_)]),t("div",E,[t("div",S,[t("div",P,[w,t("table",N,[O,t("tbody",null,[(n(!0),d(c,null,m(e.data,(o,dt)=>(n(),d("tr",null,[t("th",T,i(o.user.id),1),t("td",null,i(o.user.email),1),t("td",null,i(o.user.firstname)+" "+i(o.user.lastname),1),t("td",null,i(o.date),1),t("td",null,[t("b",null,i(o.suscription_id),1)])]))),256))])])])])])])])]),t("div",x,[t("div",j,[t("form",{class:"modal-content",onSubmit:s[3]||(s[3]=p(o=>e.save(),["prevent"]))},[k,t("div",I,[t("div",C,[D,l(t("input",{type:"text",class:"form-control","onUpdate:modelValue":s[0]||(s[0]=o=>e.form.title=o)},null,512),[[r,e.form.title]])]),t("div",V,[U,l(t("input",{type:"text",class:"form-control","onUpdate:modelValue":s[1]||(s[1]=o=>e.form.code=o)},null,512),[[r,e.form.code]])]),t("div",B,[L,l(t("input",{type:"number",class:"form-control","onUpdate:modelValue":s[2]||(s[2]=o=>e.form.unit_price=o)},null,512),[[r,e.form.unit_price]])])]),q],32)])]),t("div",J,[t("div",z,[t("form",{class:"modal-content",onSubmit:s[7]||(s[7]=p(o=>e.saveEdit(),["prevent"]))},[F,t("div",R,[t("div",A,[G,l(t("input",{type:"text",class:"form-control","onUpdate:modelValue":s[4]||(s[4]=o=>e.formEdit.title=o)},null,512),[[r,e.formEdit.title]])]),t("div",M,[H,l(t("input",{type:"text",class:"form-control","onUpdate:modelValue":s[5]||(s[5]=o=>e.formEdit.code=o)},null,512),[[r,e.formEdit.code]])]),t("div",K,[Q,l(t("input",{type:"number",class:"form-control","onUpdate:modelValue":s[6]||(s[6]=o=>e.formEdit.unit_price=o)},null,512),[[r,e.formEdit.unit_price]])])]),W],32)])]),t("div",X,[t("div",Y,[t("form",Z,[tt,e.registers.length>0?(n(),d("div",et,[(n(!0),d(c,null,m(e.registers,o=>(n(),d("div",ot,[t("img",{src:"https://ui-avatars.com/api/?background=000000&color=fff&name="+o.firstname+o.lastname,style:{height:"30px","border-radius":"100%"}},null,8,st),at,t("span",it,i(o.firstname)+" "+i(o.lastname),1),u(" "+i(o.email),1)]))),256))])):f("",!0)])])])],64))}});export{ht as default};
